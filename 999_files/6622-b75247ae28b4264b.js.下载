"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6622],{82256:function(e,t,i){i.d(t,{U:function(){return p}});var a=i(52676),n=i(75271),r=i(80110),s=i(56407),o=i(49568),l=i(85707),d=i(23187),c=i(45586),u=i(57672),h=i(93216),m=i(44567);let p=e=>{let{id:t,className:i,content:p,title:x,tooltip:g,expanded:j,defaultExpanded:b=!0,showExpandIcon:f=!0,expandIcon:S,sx:v,withDivider:w,onChange:y}=e,C=(0,n.useRef)(null),T=(0,u.Z)();return(0,a.jsxs)(o.Z,{id:t,className:i,ref:C,sx:w?(0,m.j)({padding:"0 !important"},v):v,expanded:j,onChange:(e,t)=>{null==y||y(e,t),t&&setTimeout(()=>{var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},T.transitions.duration.standard)},defaultExpanded:b,children:[(0,a.jsx)(l.Z,{expandIcon:f?S:null,"aria-controls":"panel3-content",id:"panel3-header",sx:{fontSize:"14px",fontWeight:600,...w&&{px:1.25}},children:(()=>{let e="string"==typeof x?(0,a.jsx)(r.Z,{variant:"editor-h3",children:x}):x;return g?(0,a.jsx)(s.Z,{direction:"row",alignItems:"center",children:(0,a.jsx)(h.ZP,{title:"string"==typeof g?g:(0,a.jsx)(g,{}),anchor:e})}):e})()}),w?(0,a.jsx)(d.Z,{}):null,(0,a.jsx)(c.Z,{sx:w?{mt:1.25,px:1.25}:{},children:p})]})}},89765:function(e,t,i){i.d(t,{Z:function(){return w}});var a=i(52676);i(75271);var n=i(80110),r=i(22988),s=i(56407),o=i(57672),l=i(34979),d=i(38956),c=i(93216),u=i(21375),h=i(24088),m=i(7999),p=i(48867),x=i(97779),g=i(27806),j=i(19005),b=i(30872),f=i(44567);let S={xs:20,md:18},v={xs:16,md:14};function w(e){let{sx:t,type:i,showUpgradeButton:w=!0,showDalleCreditsInfo:y=!1,isDALL:C=!1}=e,{isMobile:T}=(0,x.j)(),{data:_}=(0,j.$_)(),Z=(0,p.k)(),N=(null==_?void 0:_.trial_credit_balance)||0,k=null==_?void 0:_.subscription_active,P=(null==_?void 0:_.subscription_monthly_credit)||0,A=(null==_?void 0:_.dalle2_credit_balance)||0,E=(null==_?void 0:_.subscription_monthly_finetuned_model_count)||0,U=(0,o.Z)(),{isProUser:I}=(0,b.V)(),{subscription_pause_status:M}=_||{},R=!0!==k&&N<=5;if(!Z)return null;let D={fontSize:{xs:16,md:12},fontWeight:600,letterSpacing:"-0.24px"};return"model"===i?(()=>{let e=0===E;return(0,a.jsx)(r.Z,{sx:{width:"auto",height:{xs:64,md:48},m:{xs:"14px 16px 10px!important",md:"10px 10px 10px!important"},px:"10px",borderRadius:m.E0,color:e?m.MA:m.MK,background:"dark"===U.palette.mode?e?"rgba(255, 74, 34, 0.05)":"rgba(22, 216, 102, 0.05)":"transparent",border:e?"1px solid rgba(255, 74, 34, 0.1)":"1px solid rgba(22, 216, 102, 0.1)",display:"flex",alignItems:"center",justifyContent:"flex-start"},children:(0,a.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(n.Z,{variant:"body2",fontWeight:"bold",component:"span",children:"Model training quota left:"}),(0,a.jsx)(n.Z,{variant:"body2",fontWeight:"bold",component:"span",sx:{minWidth:"20px",textAlign:"center"},children:E})]})})})():(0,a.jsxs)(s.Z,{direction:"row",sx:(0,f.j)({width:"auto",height:{xs:64,md:48},m:{xs:"10px 10px 10px!important",md:"10px 10px 10px!important"},px:"10px",borderRadius:m.E0,alignItems:"center",justifyContent:"space-between",color:R?"rgba(255, 74, 34, 1)":m.MK,bgcolor:R?"rgba(255, 74, 34, 0.05)":"rgba(22, 216, 102, 0.05)",border:R?"1px solid rgba(255, 74, 34, 0.1)":"1px solid rgba(22, 216, 102, 0.10)"},t),children:[(0,a.jsxs)(s.Z,{direction:"row",alignItems:"center",whiteSpace:"nowrap",letterSpacing:"-0.24px",children:[k?(0,a.jsx)(g.PhCurrencyEth,{size:S,sx:{mr:"4px"}}):(0,a.jsx)(g.PhClock,{size:S,sx:{mr:"4px"}}),C&&y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{variant:"editor-label1",fontWeight:"bold",children:C?(0,a.jsx)(d.g,{value:Number(A.toFixed(0))}):null}),"\xa0",(0,a.jsx)(c.ZP,{icon:(0,a.jsx)(g.PhInfoFill,{color:m.ZE,size:v,sx:{ml:.5}}),anchor:(0,a.jsx)(n.Z,{variant:"editor-label1",fontWeight:"bold",children:"DALL\xb7E credits"}),title:(0,a.jsx)(r.Z,{children:(0,a.jsx)(c.k5,{children:"DALL\xb7E credits need to be purchased separately"})})})]}):k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{variant:"editor-label1",fontWeight:"bold",children:(0,a.jsx)(d.g,{value:P})}),"\xa0",(0,a.jsx)(l.J,{anchorText:"paid credits left",isPaused:"paused"===M})]}):(0,a.jsx)(s.Z,{direction:T?"column":"row",justifyContent:T?"center":"flex-start",alignItems:T?"flex-start":"center",ml:T?1:0,children:(0,a.jsx)(c.ZP,{anchor:(0,a.jsxs)(n.Z,{variant:"editor-label1",fontWeight:600,children:[N," trial credits left"," "]}),icon:(0,a.jsx)(g.PhInfoDuotone,{size:v,sx:{ml:.5}}),title:(0,a.jsxs)(r.Z,{children:[(0,a.jsxs)(c.k5,{children:["Trial credits allow you to use all the ",(0,a.jsx)(c.Tb,{href:"https://openart.ai/pricing",text:"premium features"}),"."]}),(0,a.jsx)("br",{}),(0,a.jsxs)(c.k5,{children:["Join",(0,a.jsx)(c.Tb,{text:" Discord ",href:h.Vs}),"for 50 trial credits."]}),(0,a.jsx)("br",{}),(0,a.jsxs)(c.k5,{children:["Subscribe to",(0,a.jsx)(c.Tb,{text:" YouTube ",href:h.g5}),"for 50 trial credits"]}),(0,a.jsx)("br",{}),(0,a.jsxs)(c.k5,{children:["Follow our",(0,a.jsx)(c.Tb,{text:" Twitter/X ",href:h.N$}),"for 50 trial credits"]}),(0,a.jsx)("br",{}),(0,a.jsxs)(c.k5,{children:["Follow our",(0,a.jsx)(c.Tb,{text:" Instagram ",href:h._v}),"for 50 trial credits"]}),(0,a.jsx)("br",{}),(0,a.jsxs)(c.k5,{children:["Follow our",(0,a.jsx)(c.Tb,{text:" LinkedIn ",href:h.Hk}),"for 100 trial credits"]})]})})})]}),C&&w?(0,a.jsx)(u.Z,{title:"Purchase",modelType:C?"dalle":"",sx:D}):!I&&w?(0,a.jsx)(u.Z,{buttonType:"upgrade",sx:D}):null]})}},47586:function(e,t,i){i.d(t,{oH:function(){return u}});var a,n,r=i(52676),s=i(75271),o=i(45138),l=i(4102),d=i(69937),c=i(328);function u(e){return(0,r.jsx)(h,{...e,type:"text"})}function h(e){let{showClear:t,value:i,onChange:a,debounceTime:n,placeholder:u,sx:h,clearSx:m,type:p,startAdornment:x,...g}=e,[j,b]=(0,s.useState)(t),[f,S]=(0,s.useState)(i),v=e=>{null==a||a(e),e?b(!0):b(!1)},w=e=>{S(e)};return(0,s.useEffect)(()=>{S(i)},[i]),(0,s.useEffect)(()=>{let e=(0,d.Z)(v,n||0);return e(f),()=>{e.cancel()}},[f]),(0,r.jsx)(o.Z,{...g,placeholder:u,sx:h,type:p,value:f,onChange:e=>w(e.target.value),InputProps:{endAdornment:j?(0,r.jsx)(l.Z,{position:"end",children:(0,r.jsx)(c.Z,{icon:"ant-design:close-outlined",sx:{cursor:"pointer",width:20,height:20,...m},onClick:()=>{w("")}})}):null,startAdornment:x}})}(a=n||(n={})).text="text",a.number="number"},79349:function(e,t,i){i.d(t,{i:function(){return l}});var a=i(52676),n=i(56407),r=i(57672),s=i(32790),o=i(62573);function l(e){let t=(0,r.Z)(),i=(i,n,r)=>(0,a.jsx)(o.Br,{active:e.value===i,label:n,sx:{flex:1,padding:"3px 5px",opacity:r?1:.5,transition:t.transitions.create(["background-color","opacity"],{duration:t.transitions.duration.shortest}),bgcolor:r?s.Um:s.dY,"&:hover":{...r?{}:{bgcolor:s.gb}},"&:active":{bgcolor:s.Um}},onClick:t=>{e.onChange(i,t)}});return(0,a.jsxs)(n.Z,{direction:"row",sx:{bgcolor:s.dY,padding:"2px",borderRadius:"5px",...e.sx},children:[i(e.leftValue,e.leftLabel,e.value===e.leftValue),e.midValue?i(e.midValue,e.midLabel,e.value===e.midValue):null,i(e.rightValue,e.rightLabel,e.value===e.rightValue)]})}},45842:function(e,t,i){i.d(t,{XZ:function(){return n},n7:function(){return r},qV:function(){return s}});var a=i(38807);let n={height:22,width:22,bgcolor:"transparent"},r={borderRadius:"5px",border:"1px solid #444",fontSize:14,fontWeight:600,textTransform:"none"},s=(0,a.Z)(n,"height","width")},62297:function(e,t,i){i.d(t,{$$:function(){return l},$u:function(){return f},GN:function(){return o},Jr:function(){return u},Lk:function(){return y},Sg:function(){return j},YY:function(){return b},ai:function(){return v},i8:function(){return s},lU:function(){return Z},n_:function(){return g},pI:function(){return p},po:function(){return d},qh:function(){return c},qo:function(){return w},td:function(){return x},u3:function(){return C},uV:function(){return h},vE:function(){return S},xJ:function(){return _},yB:function(){return r},zT:function(){return m}});var a=i(71481),n=i(1516);function r(){return(0,n.Z)()}function s(e,t){return t.getObjects().includes(e)}function o(e,t){let i=document.createElement("a");i.href=e,i.download=t,i.click()}function l(e){let t={color:e,alpha:1};if(null==e?void 0:e.startsWith("rgba")){let i=e.match(/rgba\(([^)]+)\)/)[1].split(",");t.color=`rgb(${i[0]}, ${i[1]}, ${i[2]})`,t.alpha=Number.parseFloat(i[3])}return t}function d(e){return new Promise((t,i)=>{let a=new Image;a.crossOrigin="anonymous",a.addEventListener("load",()=>{(a.width>8192||a.height>8192)&&i("Image dimensions exceed the maximum supported size of 8192 pixels."),t(a)}),a.addEventListener("error",()=>{i("Failed to load image. Please check the image URL or network connection.")}),a.src=e})}function c(e){return new Promise(t=>{let i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0),i.toBlob(e=>{t(e)})})}function u(e){let t=e.split(","),i=t[0].match(/:(.*?);/)[1],a=atob(t[1]),n=a.length,r=new Uint8Array(n);for(;n--;)r[n]=a.codePointAt(n);return new Blob([r],{type:i})}i(63107);let h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return await Promise.all(e.map(e=>new Promise(i=>e.clone(e=>{i(t(e))}))))},m=e=>`rgba(22, 216, 102, ${e})`;function p(e){let t=m(.7),i=`<svg xmlns="http://www.w3.org/2000/svg" height="${e}" width="${e}"><circle cx="${e/2}" cy="${e/2}" r="${e/2}" fill="${t}" /></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`}function x(e){return`url('${p(e)}') ${e/2} ${e/2}, auto`}let g=e=>`rgba(251, 34, 195, ${e})`;function j(e){let t=g(1),i=`<svg xmlns="http://www.w3.org/2000/svg" height="${e}" width="${e}" viewBox="0 0 ${e} ${e}">
    <circle cx="${e/2}" cy="${e/2}" r="${e/2-2}" fill="none" stroke="${t}" stroke-width="4" />
  </svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`}function b(e){return`url('${j(e)}') ${e/2} ${e/2}, auto`}async function f(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.width,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.height,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,{width:o,height:l}=e,c=a/o,u=n/l;if(o<=t&&l<=i&&o===a&&l===n&&e instanceof HTMLImageElement)return e.src.startsWith("data:")?[await d(e.src),1*r,1*s]:[e,c*r,u*s];let h=document.createElement("canvas");h.width=a,h.height=n,h.getContext("2d").drawImage(e,0,0,a,n);let m=await d(h.toDataURL()),p=Math.min(t/a,i/n);if(!(p<1))return[await d(h.toDataURL()),c*r,u*s];{let e=document.createElement("canvas"),t=a*p,i=n*p;return e.width=t,e.height=i,e.getContext("2d").drawImage(m,0,0,t,i),[await d(e.toDataURL()),p*c*r,p*u*s]}}let S=e=>new Promise((t,i)=>{let a=document.createElement("input");a.type="file",a.accept="image/*",a.addEventListener("change",a=>{var n;let r=null===(n=a.target.files)||void 0===n?void 0:n[0];if(r){let a=new FileReader;a.addEventListener("load",a=>{try{var n;let i=null===(n=a.target)||void 0===n?void 0:n.result;null==e||e(null,i),t(i)}catch(a){let t=`Error processing file: ${a.message}`;null==e||e(t),i(t)}}),a.addEventListener("error",()=>{let t="Error reading file";null==e||e(t),i(t)}),a.readAsDataURL(r)}else{let t="No file selected";null==e||e(t),i(t)}}),a.addEventListener("close",()=>{let t="File selection was closed";null==e||e(t),i(t)}),a.addEventListener("error",()=>{let t="An error occurred during file selection";null==e||e(t),i(t)}),a.addEventListener("cancel",()=>{let t="User cancelled: File selection was canceled";null==e||e(t),i(t)}),a.click()}),v=async(e,t)=>{let i=document.createElement("canvas"),a=i.getContext("2d");i.width=e.width,i.height=e.height,a.drawImage(e,0,0,i.width,i.height);let n=a.getImageData(0,0,i.width,i.height),r=document.createElement("canvas");r.width=e.width,r.height=e.height;let s=r.getContext("2d");s.drawImage(t,0,0,e.width,e.height);let o=s.getImageData(0,0,e.width,e.height);for(let e=0;e<n.data.length;e+=4){let t=o.data[e+3];n.data[e+3]=255-t}return a.putImageData(n,0,0),i},w=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=t/Math.max(e.width,e.height),n=new a.fabric.StaticCanvas(null,{width:t,height:t});return new Promise(t=>{e.clone(a=>{let r=n.getVpCenter();a.set({scaleX:i,scaleY:i,left:r.x-e.getScaledWidth()*i/2/e.scaleX,top:r.y-e.getScaledHeight()*i/2/e.scaleY,visible:!0}),a.clipPath=null,n.add(a),n.renderAll(),t(n.toDataURL()),n.dispose()})})};async function y(e){return new Promise((t,i)=>{let a=new Blob([e],{type:"image/png"}),n=URL.createObjectURL(a),r=new Image;r.crossOrigin="anonymous",r.addEventListener("load",()=>{(r.width>16e3||r.height>16e3)&&i("Image dimensions exceed the maximum supported size of 16000 pixels."),t(r)}),r.addEventListener("error",()=>{i("Failed to load image. Please check the image URL or network connection.")}),r.src=n})}async function C(e,t,i){let a=new Blob([e],{type:"image/png"}),n=URL.createObjectURL(a),r=await d(n),s=document.createElement("canvas"),o=s.getContext("2d");if(!o)throw Error("Unable to get 2D context");return s.width=Math.round(r.width/t),s.height=Math.round(r.height/i),o.drawImage(r,0,0,s.width,s.height),URL.revokeObjectURL(n),(await new Promise(e=>{s.toBlob(t=>{if(t)e(t);else throw Error("Canvas to Blob conversion failed")},"image/png")})).arrayBuffer()}class T{initShaders(){let e=`
      attribute vec2 a_position;
      attribute vec2 a_texCoord;
      varying vec2 v_texCoord;
      void main() {
        gl_Position = vec4(a_position, 0, 1);
        v_texCoord = a_texCoord;
      }
    `,t=`
      precision mediump float;
      uniform sampler2D u_image;
      varying vec2 v_texCoord;
      void main() {
        gl_FragColor = texture2D(u_image, v_texCoord);
      }
    `,i=this.compileShader(e,this.gl.VERTEX_SHADER),a=this.compileShader(t,this.gl.FRAGMENT_SHADER);if(this.program=this.gl.createProgram(),this.gl.attachShader(this.program,i),this.gl.attachShader(this.program,a),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${this.gl.getProgramInfoLog(this.program)}`);this.gl.useProgram(this.program),this.positionLocation=this.gl.getAttribLocation(this.program,"a_position"),this.texCoordLocation=this.gl.getAttribLocation(this.program,"a_texCoord")}compileShader(e,t){let i=this.gl.createShader(t);if(this.gl.shaderSource(i,e),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${this.gl.getShaderInfoLog(i)}`);return i}initBuffers(){this.positionBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.gl.STATIC_DRAW),this.texCoordBuffer=this.gl.createBuffer()}drawImage(e,t){let{gl:i}=this;this.canvas.width=t.width,this.canvas.height=t.height,i.viewport(0,0,t.width,t.height);let a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),i.enableVertexAttribArray(this.positionLocation),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.vertexAttribPointer(this.positionLocation,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.texCoordLocation),i.bindBuffer(i.ARRAY_BUFFER,this.texCoordBuffer);let n=t.x/e.width,r=t.y/e.height,s=(t.x+t.width)/e.width,o=(t.y+t.height)/e.height;i.bufferData(i.ARRAY_BUFFER,new Float32Array([n,o,s,o,n,r,s,r]),i.STATIC_DRAW),i.vertexAttribPointer(this.texCoordLocation,2,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLE_STRIP,0,4)}constructor(e){if(this.canvas=e,this.gl=e.getContext("webgl",{premultipliedAlpha:!1}),!this.gl)throw Error("WebGL not supported");this.initShaders(),this.initBuffers()}}function _(e,t){if(!window.WebGLRenderingContext)return new Promise((i,a)=>{let n=document.createElement("canvas");n.width=t.width,n.height=t.height;let r=n.getContext("2d");if(!r){a(Error("Unable to get 2D context from canvas"));return}if(e instanceof HTMLImageElement)r.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);else if(e instanceof HTMLCanvasElement){let i=e.getContext("2d");if(!i){a(Error("Unable to get 2D context from source canvas"));return}let n=i.getImageData(t.x,t.y,t.width,t.height);r.putImageData(n,0,0)}else{a(Error("Invalid source type. Must be HTMLImageElement or HTMLCanvasElement"));return}let s=new Image;s.addEventListener("load",()=>i(s)),s.addEventListener("error",()=>a(Error("Failed to load cropped image"))),s.src=n.toDataURL()});let i=document.createElement("canvas");return new T(i).drawImage(e,t),new Promise(e=>{let t=new Image;t.addEventListener("load",()=>e(t)),t.src=i.toDataURL()})}function Z(e,t){let i=new a.fabric.Point(e.x,e.y),n=t instanceof HTMLCanvasElement?t.getBoundingClientRect():t;return i.x-=n.left,i.y-=n.top,i}},45956:function(e,t,i){i.d(t,{V:function(){return h}});var a=i(52676),n=i(66266),r=i(47976),s=i(13724),o=i(91415),l=i(22988),d=i(56407),c=i(80110),u=i(24088);let h=e=>{let{isMobile:t,pagePath:i=u.ep,title:h="Train your own model",titleMobile:m="Train Model",description:p="Fine-tune your model within 10 minutes.",newTab:x=!1}=e,g=(0,n.useRouter)();return(0,a.jsxs)(s.Z,{sx:{height:"100%",border:"1px dashed #0084FF",cursor:"pointer"},onClick:()=>{x?window.open(i,"_blank"):g.push(i)},children:[(0,a.jsx)(o.Z,{component:"div",sx:{backgroundColor:"rgba(0, 132, 255, 0.10)",height:{xs:150,sm:200,md:300,lg:300,xl:350},width:"100%",position:"relative"}}),(0,a.jsx)(l.Z,{sx:{position:"absolute",top:0,height:"calc(100% - 110px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(r.Z,{sx:{height:44,width:44,color:"#0084FF"}})}),(0,a.jsxs)(d.Z,{sx:{height:"110px",px:1,py:2,position:"absolute",bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.6)"},children:[(0,a.jsx)(c.Z,{gutterBottom:!0,variant:t?"body1":"h5",sx:t?{fontSize:"16px",fontWeight:600}:null,component:"div",noWrap:!0,children:t?m:h}),(0,a.jsx)(c.Z,{gutterBottom:!0,variant:"body2",color:"text.secondary",children:p})]})]})}},65708:function(e,t,i){i.d(t,{i:function(){return P}});var a=i(52676),n=i(88651),r=i(18826),s=i(56407),o=i(77379),l=i(82639),d=i(6721),c=i(8765),u=i(24368),h=i(75271),m=i(58684),p=i(80110),x=i(97792),g=i(11955),j=i(23187),b=i(72660),f=i(27574),S=i(45138),v=i(22988),w=i(35570),y=i(34216),C=i(97779),T=i(35583),_=i(4629),Z=i(28989),N=i(16585);let k=e=>{let{...t}=e,[i,n]=(0,T.g)(),{isMobile:r}=(0,C.j)(),d=(0,u.aT)(),[c,k]=(0,h.useState)(""),{model:P}=t,[A,E]=(0,h.useState)(null),[U,I]=(0,h.useState)(!1);(0,h.useEffect)(()=>{if(null==P?void 0:P.sample_images){let e=[];for(let t of P.sample_images)e.push({image_url:t,is_nsfw:!1});E(e)}},[null==P?void 0:P.sample_images]);let M=async e=>{if(((null==e?void 0:e.training_mode)==="style"||(null==e?void 0:e.training_mode)==="character")&&!(null==e?void 0:e.object_prompt)&&!c){(0,Z.QD)("Please describe the style");return}try{let t=await i({id:e.id,object_prompt:c,force_retrain:U});(null==t?void 0:t.id)===e.id&&(N.B("model_training",{training_type:"retrain",guiding_word:c,model_name:e.model_name,image_num:e.sample_images.length,model_type:e.training_mode,step_num:(null==e?void 0:e.step_num)??1e3}),R(),await d.normal({title:(0,a.jsx)(p.Z,{variant:"h4",children:"Re-training started"}),content:(0,a.jsx)(p.Z,{variant:"body1",children:"Please check back in 5-10 minutes."})}))}catch(e){var t,n,r,s,o,l;if(null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.nsfw_images)for(let t of((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.nsfw_images.length)<(null==A?void 0:A.length)&&I(!0),null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.nsfw_images))(null==A?void 0:A.some(e=>e.image_url===t))&&E(e=>e.map(e=>e.image_url===t?{...e,is_nsfw:!0}:e))}},R=()=>{t.onClose({},"backdropClick")};return(0,a.jsxs)(x.Z,{...t,sx:{"& .MuiDialog-paper":{maxWidth:660,width:"600px",maxHeight:"700px"}},children:[(0,a.jsxs)(g.Z,{children:[(0,a.jsx)(p.Z,{fontSize:"16px",fontWeight:600,children:"Start re-training?"}),(0,a.jsx)(y.h,{dark:!1,onClick:R,sx:{position:"absolute",top:{xs:4,md:10},right:{xs:4,md:10}}})]}),(0,a.jsx)(j.Z,{sx:{width:"100%",height:"1px",backgroundColor:"rgba(68, 68, 68, 0.1)",marginTop:"20px"}}),(0,a.jsx)(b.Z,{sx:{pt:"24px!important",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,a.jsxs)(s.Z,{spacing:2,direction:"column",children:[(0,a.jsx)(f.Z,{component:"div",severity:"info",sx:{mt:1,mb:1,fontWeight:600,color:"#FEFEFE",width:"100%","& .MuiAlert-message":{width:"100%"},display:"flex",alignItems:"center"},children:(0,a.jsxs)(p.Z,{variant:"body2",sx:{fontWeight:500},component:"div",children:["Read the"," ",(0,a.jsx)("a",{href:"https://openart.notion.site/Re-training-Guide-for-the-new-FLUX-based-Models-119269c1f5858064b3bbc71683ff85e6?pvs=74",target:"_blank",style:{textDecoration:"underline",fontWeight:700},rel:"noreferrer",children:"Re-training Guide"})," ","for best results."]})}),(0,a.jsxs)(p.Z,{fontWeight:"500",children:["Re-train this model for ",(0,a.jsx)("b",{children:"FREE"})," with the upgraded FLUX-based fine-tuning."]}),(null==P?void 0:P.training_mode)!=="style"&&(null==P?void 0:P.training_mode)!=="character"||(null==P?void 0:P.object_prompt)?null:(0,a.jsxs)(s.Z,{spacing:2,direction:"column",sx:{mt:5},children:[(0,a.jsxs)(p.Z,{fontWeight:"700",children:["Describe the ",null==P?void 0:P.training_mode,":"]}),(0,a.jsx)(S.Z,{fullWidth:!0,value:c,onChange:e=>k(e.target.value),placeholder:(null==P?void 0:P.training_mode)==="style"?_.W2:_.fK,variant:"outlined",multiline:!0,minRows:5}),(null==P?void 0:P.sample_images)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{sx:{mt:2},fontWeight:"700",children:"Sample Images:"}),(0,a.jsx)(v.Z,{sx:{display:"grid",gridTemplateColumns:`repeat(${r?2:4}, 1fr)`,gap:2},children:null==A?void 0:A.map(e=>(0,a.jsx)(v.Z,{sx:{border:e.is_nsfw?"3px solid #EC681E":"none",borderRadius:"10px",aspectRatio:"1/1"},children:(0,a.jsx)("img",{loading:"lazy",height:"120",width:"100%",alt:"",src:e.image_url,style:{borderRadius:"10px",objectFit:"cover"}})},e.image_url))})]}):null]})]})}),(0,a.jsxs)(w.Z,{children:[(0,a.jsx)(o.Z,{variant:"outlined",sx:{color:"rgba(153, 153, 153, 1)",fontSize:"12px",fontWeight:"600",borderRadius:"5px"},onClick:R,children:"Cancel"}),U?(0,a.jsx)(l.Z,{title:"We’ve detected one or more NSFW images. We’ll remove them in the retraining process.",placement:"top",open:U,arrow:!0,children:(0,a.jsx)(m.Z,{loading:n,variant:"contained",sx:{color:"white",backgroundColor:"rgba(236, 104, 30, 1)",fontSize:"12px",fontWeight:"600",borderRadius:"5px",":hover":{backgroundColor:"rgba(236, 104, 30, 0.8)"}},onClick:async()=>{await M(P)},children:"Force Re-train"})}):(0,a.jsx)(m.Z,{loading:n,variant:"contained",sx:{color:"white",backgroundColor:"rgb(9, 41, 247)",fontSize:"12px",fontWeight:"600",borderRadius:"5px",":hover":{backgroundColor:"rgba(9, 41, 247, 0.8)"}},onClick:async()=>{await M(P)},children:"Re-train"})]})]})},P=e=>{let{model:t,reTrainButtonSx:i,deleteButtonSx:h,normalDeleteButton:m}=e,p=(0,u.aT)(),[x]=(0,T.Fc)(),g=e=>{p.confirm({title:"Are you sure to delete this model?",content:"this model will be removed from the model hub",iconType:"warning",onConfirm:()=>{x({id:e.id})}})},{showModal:j}=(0,c.dd)(),b=async e=>{j(k,{model:e})};return(0,a.jsxs)(s.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,a.jsx)(o.Z,{variant:"contained",sx:{backgroundColor:"rgba(9, 41, 247, 0.8)",color:"white",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(9, 41, 247, 1)",transform:"scale(1.05)",boxShadow:"0 0 10px rgba(9, 41, 247, 0.5)"},...i},size:"small",endIcon:(0,a.jsx)(l.Z,{title:"To keep creating, re-train this model for free with the new FLUX-based fine-tuning.",children:(0,a.jsx)(n.Z,{fontSize:"small"})}),onClick:()=>b(t),children:"Re-train"}),m?(0,a.jsx)(o.Z,{variant:"outlined",sx:{backgroundColor:"rgba(11, 12, 12, 1)",color:"white",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(11, 12, 12, 1)",transform:"scale(1.05)",boxShadow:"0 0 10px rgba(11, 12, 12, 1)"},...h},size:"small",onClick:()=>g(t),children:"Delete"}):(0,a.jsx)(d.Z,{size:"small",onClick:()=>g(t),children:(0,a.jsx)(r.Z,{sx:{color:"primary.main"},fontSize:"small"})})]})}},65500:function(e,t,i){i.d(t,{Z:function(){return h}});var a=i(52676),n=i(75271),r=i(77379),s=i(60588),o=i(22988),l=i(76651),d=i(7999),c=i(27806),u=i(4629);function h(e){let{value:t,onChange:i}=e,[h,m]=n.useState(null),p=()=>{m(null)},x=e=>{"clear"===e.value?i(""):(""===t&&i(e.value),""===t||t.includes(e.value)||i(`${t}, ${e.value}`)),p()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.Z,{variant:"outlined",onClick:e=>{m(e.currentTarget)},sx:{ml:"auto",p:"2px 4px",whiteSpace:"nowrap",fontSize:"12px",borderColor:d.UX,borderRadius:d.E0},children:[(0,a.jsx)(c.PhPlus,{size:13}),"Commonly-Used"]}),(0,a.jsx)(s.ZP,{open:!!h,anchorEl:h,onClose:p,disableScrollLock:!0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:(0,a.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:"12px",maxWidth:"480px",columnGap:"8px",rowGap:"12px"},children:u.SU.map((e,t)=>(0,a.jsx)(l.Z,{size:"small",label:e.label,onClick:()=>x(e),color:"clear"===e.value?"default":e.color,variant:"clear"===e.value?"outlined":"contained",onDelete:"clear"===e.value?()=>x(e):null},`chip-${t}`))})})]})}},16391:function(e,t,i){i.d(t,{L:function(){return l}});var a=i(52676),n=i(27574),r=i(70811),s=i(62573),o=i(95314);let l=e=>{let{banner:t,value:i,onChange:l,sliderConfigProps:d,hideInfluenceStrength:c=!1}=e;return(0,a.jsxs)(r.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(o.U,{value:i.image_url,uploadUrl:"/media/upload_image",onChange:e=>{l({...i,image_url:(null==e?void 0:e.imageUrl)??"",height:null==e?void 0:e.height,width:null==e?void 0:e.width})}}),t?(0,a.jsx)(n.Z,{severity:"info",children:t}):null,i.image_url&&!c?(0,a.jsx)(s.X9,{showResult:!0,min:.1,max:1,step:.01,value:i.influenceStrength,onChange:e=>{l({...i,influenceStrength:e})},label:"Influence Strength",tipText:"The higher this number is, the more influence the upload imaged will have on the generated image.",...d??{}}):null]})}},62336:function(e,t,i){i.d(t,{K:function(){return s}});var a=i(52676),n=i(75271),r=i(45138);let s=e=>{let{value:t,onChange:i}=e,s="23px",o=`calc(${s} * 1)`,[l,d]=(0,n.useState)(o);return(0,n.useEffect)(()=>{d("unset")},[]),(0,a.jsx)(r.Z,{InputProps:{slotProps:{input:{sx:{lineHeight:s,minHeight:o,maxHeight:l}}}},sx:{marginTop:3,"& > .MuiInputBase-multiline":{p:"10px 12px"}},size:"small",placeholder:"Anything you’d like to exclude?",multiline:!0,fullWidth:!0,value:t,onChange:e=>i(e.target.value)})}},91109:function(e,t,i){i.d(t,{e:function(){return r}});var a=i(52676),n=i(49620);let r=e=>{let{value:t,onChange:i,max:r=15,min:s=2,step:o=1}=e;return(0,a.jsx)(n.X,{label:"Prompt Adherence (CFG)",tipText:"How strictly the model will stick to the prompt. Lower numbers let AI be more creative, while higher numbers force it to stick to the prompt.",value:t,min:s,max:r,step:o,showResult:!0,onChange:i})}},65323:function(e,t,i){i.d(t,{Z:function(){return s}});var a=i(52676),n=i(43807),r=i(43246);let s=e=>{let{options:t,value:i,onChange:s}=e;return(0,a.jsx)(n.Z,{size:"small",value:i,onChange:e=>{s(e.target.value)},sx:{mt:"8px!important"},children:t.map(e=>(0,a.jsx)(r.Z,{value:e.value,children:e.label},e.value))})}},61314:function(e,t,i){i.d(t,{A:function(){return r}});var a=i(52676),n=i(49620);let r=e=>{let{value:t,onChange:i,max:r,min:s,step:o,unit:l,disabled:d,label:c,tipText:u}=e;return(0,a.jsx)(n.X,{tipText:u,label:c,disabled:d,value:t,unit:l,min:s,max:r,step:o,onChange:i,inline:!0,showResult:!0})}},72662:function(e,t,i){i.d(t,{R:function(){return o}});var a=i(52676),n=i(56407),r=i(54323),s=i(49620);let o=e=>{let{label:t="Steps",value:i,onChange:o,max:l,min:d,step:c=1,disabled:u,stepTipText:h="How long AI runs before generating the final image. Usually, higher is better but to a certain degree. The default we use is 25 steps which should be enough for generating any kind of image."}=e;return(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(s.X,{label:t,tipText:h,tooltipSx:{width:"fit-content"},disabled:u,value:i,onChange:o,min:d,max:l,step:c,sx:{mt:1},showResult:!0}),u?(0,a.jsx)(r.Y,{feature:"to change the number of steps"}):null]})}},56114:function(e,t,i){i.d(t,{O:function(){return h}});var a=i(52676),n=i(75036),r=i(13724),s=i(22988),o=i(80110),l=i(91415),d=i(70811),c=i(71933);let u=e=>{let t;return"string"==typeof e?t=(0,c.DY)(new Date(e).getTime()):"object"==typeof e&&e._seconds&&(t=(0,c.DY)(1e3*e._seconds)),t};function h(e){let{model:t,isSelected:i,showCreatedTime:c=!0,authorName:h,onSelect:m,multiSelect:p=!1}=e;if(!t.character)return null;let{character_name:x,short_description:g,thumbnail:j,created_at:b}=t.character;return(0,a.jsxs)(r.Z,{onClick:()=>m(t),sx:{position:"relative",height:"100%",border:"2px solid",cursor:"pointer",borderColor:"background.paper",opacity:.7,...i&&{opacity:1,borderColor:"primary.main"},"&:hover":{opacity:1}},children:[p?(0,a.jsx)(s.Z,{sx:{position:"absolute",top:8,right:8,zIndex:10001,width:24,height:24,backgroundColor:i?"#2563EB":"transparent",color:i?"white":"#9CA3AF",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"5px",boxShadow:"2px 2px 3.8px 0px rgba(0, 0, 0, 0.44)",border:i?"none":"white 1px solid"},children:i?(0,a.jsx)(n.Z,{sx:{fontSize:18}}):null}):null,(0,a.jsx)(d.Z,{direction:"column",sx:{position:"absolute",bottom:0,left:0,right:0,index:1e4,height:"110px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",display:"flex",p:1},children:(0,a.jsxs)(d.Z,{direction:"column",children:[(0,a.jsx)(o.Z,{variant:"body1",fontWeight:"bold",children:x}),c&&b?(0,a.jsxs)(o.Z,{variant:"caption",children:["Created at: ",u(b)]}):null,h?(0,a.jsxs)(o.Z,{variant:"caption",children:["By ",h]}):null,g?(0,a.jsx)(o.Z,{variant:"caption",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:g}):null]})}),(0,a.jsx)(l.Z,{component:"img",alt:x,sx:{height:{xs:150,sm:200,md:300,lg:300,xl:350}},image:j,title:x})]})}},6318:function(e,t,i){i.d(t,{Z:function(){return k}});var a=i(52676),n=i(75271),r=i(97792),s=i(11955),o=i(56407),l=i(77379),d=i(72660),c=i(22988),u=i(63132),h=i(58306),m=i(19509),p=i(41926),x=i(45956),g=i(56114),j=i(26110),b=i(24088);function f(e){let{models:t,isFetching:i,selected:n,showCreateCard:r=!0,emptyComponent:s,showCreatedTime:o=!0,authorName:l,multiSelect:d=!1,onSelect:u}=e,h=i?[]:r?[{}].concat(t):t;return!i&&0===t.length&&s?s:i||0!==t.length||r?(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(p.Z,{loading:i}),(0,a.jsx)(m.ZP,{container:!0,spacing:3,alignItems:"stretch",children:h.map((e,t)=>{var i;let s=n.some(t=>t.id===e.id);return(0,a.jsx)(m.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,xl:2,sx:{height:{xs:"300px",sm:"auto"}},children:0===t&&r?(0,a.jsx)(x.V,{newTab:!0,title:"Create a character",titleMobile:"Create character",description:"Create a character within 10 minutes.",pagePath:b.eb}):(0,a.jsx)(g.O,{model:e,isSelected:s,onSelect:e=>{d?s?u(n.filter(t=>t.id!==e.id).map(e=>e)):u([...n.map(e=>e),e]):u([e])},authorName:(null===(i=e.character)||void 0===i?void 0:i.username)??"",showCreatedTime:o,multiSelect:d})},`${e.id}-${t}`)})})]}):(0,a.jsx)(j.U,{showChooseFromLibrary:!1,sx:{width:"200px",border:"none",backgroundColor:"transparent",margin:"100px auto"}})}var S=i(80110),v=i(76651),w=i(23638),y=i(39204),C=i(97779),T=i(27806);let _=e=>{let{innerSelected:t,minLimit:i,maxLimit:n,myCharacterList:r,handleSelect:s,multiSelect:l}=e,{isMobile:d}=(0,C.j)();if(!l)return null;let u={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-10,transition:{duration:.2}}},h={initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{duration:.2}},exit:{scale:.8,opacity:0,transition:{duration:.1}}};return(0,a.jsx)(w.M,{mode:"popLayout",children:t.length<=0?(0,a.jsx)(y.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:u,children:(0,a.jsxs)(o.Z,{sx:{height:"52px",backgroundColor:"rgba(255, 255, 255, 0.06)",borderRadius:"4px",p:"12px",border:"none",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"4px",padding:"1px",background:"linear-gradient(90deg, rgba(22, 216, 102) 0%, rgba(9, 41, 247) 100%)",mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",maskComposite:"exclude",WebkitMaskComposite:"xor",pointerEvents:"none"}},justifyContent:"start",direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(c.Z,{sx:{color:"#16D866",fontSize:"14px",fontWeight:700,background:"rgba(22, 216, 102, 0.10)",borderRadius:"5px",padding:"2px 5px"},children:"NEW"}),(0,a.jsx)(T.MaterialSymbolsSelectCheckBox,{size:16}),(0,a.jsxs)(S.Z,{variant:"body2",fontSize:d?10:14,fontWeight:500,children:["You can select up to ",n," characters to create multi-character image now! Note that it only works with Prompts for now."]})]})},"info-view"):(0,a.jsx)(y.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:u,children:(0,a.jsxs)(o.Z,{sx:{minHeight:"52px",backgroundColor:"rgba(255, 255, 255, 0.06)",borderRadius:"4px",p:"12px"},justifyContent:"start",direction:"row",alignItems:"center",spacing:1,flexWrap:"wrap",gap:1,children:[(0,a.jsx)(S.Z,{variant:"body2",fontSize:14,fontWeight:500,children:`${t.length} / ${n} Selected`}),(0,a.jsx)(c.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(0,a.jsx)(w.M,{children:t.map(e=>{let i=null==r?void 0:r.some(t=>t.id===e.id);return(0,a.jsx)(y.E.div,{variants:h,initial:"initial",animate:"animate",exit:"exit",layout:!0,children:(0,a.jsx)(v.Z,{label:(0,a.jsxs)(o.Z,{direction:"row",spacing:.5,alignItems:"center",children:[(0,a.jsx)(S.Z,{variant:"caption",sx:{fontSize:"10px",whiteSpace:"nowrap"},children:e.model_name}),(0,a.jsx)(c.Z,{component:"span",sx:{fontSize:"10px",ml:.5,px:.5,py:.2,borderRadius:"3px",backgroundColor:i?"rgba(22, 216, 102, 0.15)":"rgba(9, 41, 247, 0.2)",color:i?"#16D866":"#4D6AFF",whiteSpace:"nowrap"},children:i?"My":"Library"})]}),sx:{fontSize:"10px",fontWeight:500,color:"#BFBFBF",height:"auto","& .MuiChip-label":{overflow:"visible"}},onDelete:()=>{s(t.filter(t=>t.id!==e.id))}})},e.id)})})})]})},"chip-view")})};var Z=i(52423),N=i(86660);function k(e){let{open:t,defaultTab:i="character",onClose:m,selected:p,handleSelectModel:x,multiSelect:g=!1,minLimit:j=1,maxLimit:b=2,hideCharacterIds:S=[]}=e,[v,w]=(0,n.useState)(p.map(e=>e.originalConfig)),{data:y,isFetching:C}=(0,Z.M0)(),{data:k,isFetching:P}=(0,Z.Lg)(),A=(0,N.Z)("up","lg"),[E,U]=(0,n.useState)(i),I=(0,n.useCallback)(()=>{if(!g){null==m||m();return}v.length>=j?(x(v),null==m||m()):console.warn(`Please select at least ${j} character(s)`)},[g,v,j,m,x]),M=(0,n.useCallback)(e=>{let t=e.slice(0,b);w(t),g||(t.length>=j?(x(t),null==m||m()):console.warn(`Please select at least ${j} character(s)`))},[g,x,m,b,j]),R=(0,n.useMemo)(()=>{let e=S?null==y?void 0:y.filter(e=>!S.includes(e.id)):y,t=S?null==k?void 0:k.filter(e=>!S.includes(e.id)):k;return"character"===E?(0,a.jsx)(f,{models:e,isFetching:C,onClose:I,selected:v,onSelect:M,multiSelect:g}):"character_library"===E?(0,a.jsx)(f,{models:t,isFetching:P,onClose:I,selected:v,onSelect:M,multiSelect:g}):void 0},[S,y,k,E,C,I,v,M,g,P]);return(0,a.jsxs)(r.Z,{open:t,onClose:I,fullScreen:!0,transitionDuration:{enter:300,exit:200},sx:{"& .MuiDialog-paperFullScreen":{margin:0}},children:[(0,a.jsx)(s.Z,{mb:1,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper"},children:(0,a.jsx)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,a.jsxs)(l.Z,{size:"large",variant:"text",color:"primary",sx:{mb:1},onClick:I,disabled:g?v.length<j:null,children:[(0,a.jsx)(T.IcSharpKeyboardBackspace,{size:24,sx:{mr:1}}),"Back"]})})}),(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(o.Z,{direction:A?"row":"column",justifyContent:A?"space-between":"start",alignItems:"center",children:(0,a.jsxs)(h.Y,{value:E,onChange:(e,t)=>{U(t)},centered:!0,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper",pb:2},children:[(0,a.jsx)(u.i,{label:"My Characters",value:"character"}),(0,a.jsx)(u.i,{label:"Character Library",value:"character_library"})]})}),(0,a.jsx)(_,{innerSelected:v,minLimit:j,maxLimit:b,myCharacterList:y,handleSelect:M,multiSelect:g}),(0,a.jsx)(c.Z,{my:3,children:R})]})]})}},67430:function(e,t,i){i.d(t,{K:function(){return h}});var a=i(52676),n=i(75271),r=i(43517),s=i(80110),o=i(3059),l=i(22988),d=i(56407),c=i(93216),u=i(27806);let h=e=>{let{value:t,onChange:i,disabled:n}=e;return(0,a.jsx)(r.Z,{labelPlacement:"start",label:(0,a.jsx)(c.ZP,{title:(0,a.jsx)(m,{}),anchor:(0,a.jsx)(s.Z,{variant:"editor-label1",children:"Seamless Tiling"})}),control:(0,a.jsx)(o.Z,{color:"info",disabled:n,onChange:e=>{i(e.target.checked)},checked:t??!1,value:t??!1}),sx:{justifyContent:"space-between"}})},m=n.memo(function(e){let{}=e;return(0,a.jsxs)(l.Z,{sx:{width:"550px",p:1},children:[(0,a.jsx)(s.Z,{variant:"body2",sx:{mb:2},children:"Toggle on to create tileable textures and seamless patterns."}),(0,a.jsxs)(d.Z,{spacing:1,direction:"row",children:[(0,a.jsxs)(d.Z,{spacing:1,children:[(0,a.jsx)(s.Z,{variant:"body2",fontWeight:"bold",children:"Prompt"}),(0,a.jsx)(l.Z,{sx:{width:"100px",border:"1px solid #909EAB",p:1,borderRadius:"8px"},children:(0,a.jsx)(s.Z,{variant:"body2",children:"chinoiserie floral patterns, sky blue"})})]}),(0,a.jsx)(d.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(u.PhCaretRightBold,{size:16,sx:{ml:1}})}),(0,a.jsx)(d.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(l.Z,{sx:{width:{xs:"100px",md:"150px"},p:1,borderRadius:"8px"},children:(0,a.jsx)("img",{src:"https://cdn.openart.ai/assets/others/tiling_raw_example.jpg",alt:"Raw Example",width:200,style:{borderRadius:"8px",objectFit:"cover"}})})}),(0,a.jsx)(d.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(u.PhCaretRightBold,{size:16,sx:{ml:1}})}),(0,a.jsx)(d.Z,{spacing:1,alignItems:"center",justifyContent:"center",children:(0,a.jsx)(l.Z,{sx:{width:{xs:"100px",md:"150px"},p:1,borderRadius:"8px"},children:(0,a.jsx)("img",{src:"https://cdn.openart.ai/assets/others/tiling_example.jpg",alt:"Tiling Example",width:200,style:{borderRadius:"8px",objectFit:"cover"}})})})]})]})})},36015:function(e,t,i){i.d(t,{$:function(){return s}});var a=i(52676),n=i(80110),r=i(93216);function s(){return(0,a.jsxs)(n.Z,{variant:"caption",children:["Upload an image to guide the AI in style, composition, pose, and more to create your ideal image.\xa0",(0,a.jsx)(r.Tb,{text:"Watch video tutorial ->",href:"https://youtu.be/JMBe9fjApcM?feature=shared"})]})}},95314:function(e,t,i){i.d(t,{U:function(){return m}});var a=i(52676),n=i(75271),r=i(22988),s=i(80110),o=i(68836),l=i(81159),d=i(90043),c=i(72509),u=i(27806),h=i(46973);let m=e=>{let{disabled:t,value:i,uploadUrl:m,onChange:p}=e,[x,g]=(0,n.useState)(null),[j,b]=(0,n.useState)(!1),[f,S]=(0,n.useState)(""),v=(0,n.useRef)(null),w=async e=>{S("");try{let t=e[0];if(!t)return;let i=URL.createObjectURL(t);if(t){g({...t,preview:i}),b(!0);let e=new FormData;e.append("file",t);let a=await h.ZP.post(m,e,{headers:{"Content-Type":"multipart/form-data"}});200===a.status&&a.data&&p(a.data)}}catch(i){let e=i.message||"An error occurred while uploading the image";if(i instanceof o.AxiosError){var t;let a=null===(t=i.response)||void 0===t?void 0:t.data;"string"==typeof a?e=a:(null==a?void 0:a.message)&&(e=a.message)}S(e)}finally{b(!1)}},{UploadContextMenu:y,handleMenuOpen:C}=(0,c.w)({onChange:async e=>{if(e&&e.length>0&&!t)try{S(""),b(!0),g({preview:e[0]});let t={imageUrl:e[0],height:0,width:0},i=new Image;i.addEventListener("load",()=>{t.height=i.height,t.width=i.width,p(t),b(!1)}),i.addEventListener("error",()=>{S("Failed to load image dimensions"),b(!1)}),i.src=e[0]}catch{S("Failed to process image from history"),b(!1)}},onClickUpload:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:1});return(0,n.useEffect)(()=>{i?g({preview:i}):g(null)},[i]),(0,a.jsxs)(r.Z,{sx:{borderRadius:3,backgroundColor:"#2C2E35",position:"relative"},children:[(0,a.jsx)(d.Z,{ref:v,disabled:t,buttonVariant:!0,sx:{width:"100%",height:x?200:75,border:"none",backgroundColor:"#1D1D1D",borderRadius:1,margin:0},dropZoneSx:{borderRadius:.5,width:"100%",padding:0},file:x,isUploading:j,maxSize:10485760,onDrop:w,onAreaClick:t?void 0:C,title:"Click or drag to upload / history",imageObjectFit:"contain",accept:{"image/png":[],"image/jpeg":[],"image/webp":[]},caption:(()=>{if(f)return(0,a.jsx)(s.Z,{variant:"caption",sx:{margin:"8px 0"},color:"error.main",children:f})})()}),y,x&&!j?(0,a.jsx)(l.Z,{title:"Delete the image",icon:u.FaTrash,iconSize:20,sx:{position:"absolute",top:8,right:8,cursor:"pointer"},onClick:()=>{g(null),p(null)}}):null]})}},66319:function(e,t,i){i.d(t,{Z:function(){return m}});var a=i(52676),n=i(75271),r=i(77379),s=i(80110),o=i(29984),l=i(56407),d=i(45468),c=i(57671),u=i(16585);let h=e=>{let{children:t,onClick:i,...n}=e;return(0,a.jsx)(r.Z,{size:"small",variant:"outlined",sx:{ml:1},onClick:i,...n,children:t})};function m(e){let{uploadedImgUrl:t,value:i,onChange:r,viewPrompt:m}=e,{mutate:p,isLoading:x,error:g,reset:j}=(0,c.AY)(),[b,f]=(0,n.useState)(!1),[S,v]=(0,n.useState)(t);(0,n.useEffect)(()=>{t&&t!==S&&(j(),f(!1)),v(t)},[S,j,t]);let w=(0,n.useMemo)(()=>t?x?"loading":b?"success":g?"error":t?"uploaded":"default":"default",[g,b,x,t]),y=(0,n.useMemo)(()=>"loading"===w?"Generating prompt...":"error"===w?"Generate failed!":"uploaded"===w?"Auto generate prompt based on this image":"success"===w?"Prompt had been generated":"",[w]);if("default"===w)return null;let C=async()=>{u.B("image_to_prompt",{image_url:t}),p({image:t,is_tmp_image:!0,model:"joy-caption"},{onSuccess:e=>{((null==e?void 0:e.caption)??"").length>0&&(null==r||r(new d.NL({prompt:e.caption,is_generated:!1})),f(!0))}})};return(0,a.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,a.jsx)(s.Z,{variant:"editor-ghost",children:y}),(()=>{switch(w){case"uploaded":case"error":return(0,a.jsx)(h,{onClick:C,children:(0,a.jsx)(s.Z,{variant:"editor-label1",children:"Generate"})});case"loading":return(0,a.jsx)(o.Z,{size:20,sx:{ml:1}});case"success":return(0,a.jsx)(h,{onClick:m,children:(0,a.jsx)(s.Z,{variant:"editor-label1",children:"View"})});default:return null}})()]})}},89655:function(e,t,i){i.d(t,{O:function(){return o}});var a=i(52676),n=i(97447),r=i(72662),s=i(41781);let o=e=>{let{max:t,min:i,value:o,onChange:l,stepProps:d}=e,[c]=(0,s.y)({key:"create.config.steps"});return(0,a.jsx)(n.x,{children:(0,a.jsx)(r.R,{max:t,min:i,value:o,onChange:l,disabled:!c,...d||{}})})}},99608:function(e,t,i){i.d(t,{Q:function(){return r}});var a=i(52676),n=i(82256);let r=e=>{let{title:t,tooltip:i,content:r,className:s,expanded:o,onClick:l,sx:d}=e;return(0,a.jsx)(n.U,{className:s,title:t,tooltip:i,expanded:o,content:r,onChange:(e,t)=>null==l?void 0:l(t),sx:d})}},22735:function(e,t,i){i.d(t,{p:function(){return o}});var a=i(52676),n=i(56407),r=i(22988),s=i(52816);let o=e=>{let{buttonContent:t,collapseContent:i,open:o,onClick:l}=e;return(0,a.jsxs)(n.Z,{children:[o?null:(0,a.jsx)(r.Z,{sx:{cursor:"pointer"},onClick:()=>{null==l||l(!o)},children:t}),(0,a.jsx)(s.Z,{in:o,sx:{"&.MuiCollapse-vertical":{mt:"0"}},children:i})]})}},54023:function(e,t,i){i.d(t,{V:function(){return c}});var a=i(52676),n=i(75271),r=i(56407),s=i(27574),o=i(62573),l=i(70932),d=i(45840);let c=e=>{let{banner:t,value:i,onChange:c}=e,[u,h]=(0,n.useState)(!1),m=(0,n.useMemo)(()=>i.image_url||i.pose_image?()=>{c({...i,pose_image:"",image_url:""})}:null,[c,i]);return(0,a.jsxs)(r.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(d.T,{src:i.pose_image||"https://cdn.openart.ai/assets/character/Pose1.webp",active:!!i.pose_image,onClick:()=>h(!0),activeText:"Modify Pose",onDelete:m,children:"Open Pose Editor"}),(0,a.jsx)(o.X9,{showResult:!0,min:.1,max:1,step:.01,value:i.pose_weight,onChange:e=>{c({...i,pose_weight:e})},label:"Weight"}),(0,a.jsx)(l.Z,{open:u,onClose:()=>h(!1),onPoseChange:e=>{c({...i,pose_image:e.pose_image,height:e.height,width:e.width})},targetMaxSize:1024}),t?(0,a.jsx)(s.Z,{severity:"info",children:t}):null]})}},70932:function(e,t,i){i.d(t,{Z:function(){return ex}});var a={};i.r(a),i.d(a,{AddObjectCommand:function(){return W},SetPositionCommand:function(){return Q},SetRotationCommand:function(){return G},SetScaleCommand:function(){return H}});var n=i(52676),r=i(75271),s=i(58684),o=i(97792),l=i(11955),d=i(80110),c=i(77379),u=i(6721),h=i(72660),m=i(70811),p=i(90117),x=i(33829),g=i(10280),j=i(22988),b=i(29984),f=i(56407),S=i(23187);let v=e=>{let{content:t,operation:i}=e;return(0,n.jsxs)(m.Z,{width:"100%",height:"100%",direction:"row",sx:{position:"relative"},children:[(0,n.jsx)(m.Z,{width:"75%",height:"100%",children:t}),(0,n.jsx)(m.Z,{width:"25%",children:i})]})},w=e=>{let{content:t,operation:i}=e;return(0,n.jsxs)(m.Z,{width:"100%",height:"100%",direction:"column",sx:{position:"relative"},children:[(0,n.jsx)(m.Z,{height:"50%",direction:"column",children:t}),(0,n.jsx)(m.Z,{height:"50%",direction:"column",children:i})]})};var y=i(43807),C=i(43246);let T=e=>{let{options:t,value:i,onChange:a}=e,r=e=>{null==a||a(e)};return(0,n.jsx)(y.Z,{value:i,onChange:e=>r(e.target.value),renderValue:e=>{let i=t.find(t=>t.value===e);return(0,n.jsx)(d.Z,{variant:"body2",sx:{lineHeight:"36px"},children:(null==i?void 0:i.label)||""})},sx:{color:"white",backgroundColor:"#292929",borderRadius:"4px",border:"1px solid #444","& .MuiSelect-icon":{color:"white"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover":{backgroundColor:"#292929"}},children:t.map(e=>(0,n.jsxs)(C.Z,{value:e.value,sx:{display:"flex",alignItems:"center",gap:2},children:[e.thumbnail?(0,n.jsx)("img",{src:e.thumbnail,alt:e.label,style:{width:"64px",height:"64px",objectFit:"cover",borderRadius:"4px"}}):null,(0,n.jsx)(d.Z,{variant:"body2",children:e.label})]},e.value))})},_=e=>{let{title:t,children:i}=e;return(0,n.jsxs)(f.Z,{spacing:2,px:2,py:2,children:[(0,n.jsx)(d.Z,{variant:"h6",children:t}),i]})};var Z=i(39413);let N=e=>{let{position:t,...i}=e;return(0,n.jsx)(j.Z,{sx:{width:"8px",height:"8px",background:"#16D866",pointerEvents:"auto",position:"absolute",cursor:`${t}-resize`,...(()=>{switch(t){case"n":return{top:"0",left:"50%",transform:"translate(0, 60%)"};case"s":return{bottom:"0",left:"50%",transform:"translate(0, -60%)"};case"e":return{top:"50%",right:"50%"};case"w":case"nw":return{top:"50%",left:"50%"};case"ne":return{top:"50%",left:"0"};case"sw":return{bottom:"50%",left:"50%"};case"se":return{bottom:"50%",right:"50%"};default:return{}}})()},...i},t)};function k(e){let{lock:t,maskRef:i,size:a,onChange:s,active:o=!1}=e,l=(0,r.useRef)(null),[d,c]=(0,r.useState)(!1),u=()=>{c(!0)},h=()=>{var e;let{x:t,y:a,width:n,height:r}=(null===(e=l.current)||void 0===e?void 0:e.getBoundingClientRect())??{x:0,y:0,width:0,height:0},s=i.current;if(!s)return;let{x:o,y:d,width:c,height:u}=s.getBoundingClientRect(),h=t-o,m=a-d;s.style.clipPath=`polygon(
      0 0,
      ${c}px 0,
      ${c}px ${u}px,
      0 ${u}px,
      0 0,
      ${h}px ${m}px,
      ${h}px ${m+r}px,
      ${h+n}px ${m+r}px,
      ${h+n}px ${m}px,
      ${h}px ${m}px
    )`};return(0,r.useEffect)(()=>{l.current&&i.current&&h()},[a]),(0,n.jsx)(Z.s,{lockAspectRatio:t,bounds:"parent",size:{width:a.width,height:a.height},position:{x:a.x,y:a.y},style:{pointerEvents:"none",position:"absolute"},dragHandleClassName:"drag-handle",resizeHandleComponent:o?{bottom:(0,n.jsx)(N,{position:"s"}),bottomRight:(0,n.jsx)(N,{position:"se"}),bottomLeft:(0,n.jsx)(N,{position:"sw"}),right:(0,n.jsx)(N,{position:"e"}),left:(0,n.jsx)(N,{position:"w"}),top:(0,n.jsx)(N,{position:"n"}),topRight:(0,n.jsx)(N,{position:"ne"}),topLeft:(0,n.jsx)(N,{position:"nw"})}:{},onResizeStart:u,onDragStart:u,onDrag:h,onResize:h,onDragStop:(e,t)=>{c(!1),null==s||s({...a,x:t.x,y:t.y})},onResizeStop:(e,t,i,a,n)=>{c(!1),null==s||s({width:Number.parseInt(i.style.width),height:Number.parseInt(i.style.height),x:n.x,y:n.y})},children:(0,n.jsxs)(j.Z,{ref:l,sx:{position:"relative",width:"100%",height:"100%",border:o?"2px solid #16D866":"none",background:"transparent",pointerEvents:"none",boxSizing:"border-box",isolation:"isolate"},children:[(0,n.jsx)(j.Z,{sx:{position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:"transparent",mixBlendMode:"destination-out",pointerEvents:"none"}}),o?(0,n.jsx)(j.Z,{className:"drag-handle",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"32px",height:"32px",backgroundColor:"rgba(22, 216, 102, 0.2)",borderRadius:"50%",cursor:"move",pointerEvents:"auto",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(4px)",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(22, 216, 102, 0.4)",transform:"translate(-50%, -50%) scale(1.1)"}},children:(0,n.jsx)(x.Z,{sx:{fontSize:20,color:"white"}})}):null,d?(0,n.jsx)(j.Z,{sx:{position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",textAlign:"center",color:"white",fontSize:"12px",pointerEvents:"none",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"8px 12px",borderRadius:"6px"},children:"Selected area matches the image size in Settings."}):null]})})}class P{execute(){}undo(){}update(e){}toJSON(){return{type:this.type,id:this.id,name:this.name}}fromJSON(e){this.inMemory=!0,this.type=e.type,this.id=e.id,this.name=e.name}isUpdatableCmd(e){}constructor(e){this.id=-1,this.inMemory=!1,this.updatable=!1,this.type="",this.name="",this.editor=e}}class A extends P{execute(){let e=this.editor.objectUtilsByUuid(this.object.uuid);this.newClip?e.addAnimation(this.newClip):e.stopAnimation(),this.editor.signals.objectChanged.dispatch(this.object,!0)}undo(){let e=this.editor.objectUtilsByUuid(this.object.uuid);this.oldClip?e.addAnimation(this.oldClip):e.stopAnimation(),this.editor.signals.objectChanged.dispatch(this.object,!0)}constructor(e,t,i,a=null){super(e),this.type="SetAnimation",this.object=t,this.oldClip=a,this.newClip=i}}var E=i(4432),U=i(36674);class I{async load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.E0,t=E.AY.find(t=>t.key===e);return this._load(t)}async loadPose(e,t){let i=this._loaders[e.type],a=`${I.baseUrl}/three-models/pose/${t}`,n=await i.loadAsync(a);return n.scale.setScalar(.01),n.scale.set(e.scale,e.scale,e.scale),n.userData.type=E.xb,n.userData.boneSystem=e.boneSystem,n}async loadPoseConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.E0;if(!this._modelConfig[e]){let t=E.AY.find(t=>t.key===e).config,i=await fetch(`${I.baseUrl}/three-models/config/${t}.json`);this._modelConfig[e]=await i.json()}return this._modelConfig[e]}async _load(e){let t=this._loaders[e.type],i=await t.loadAsync(this._getUrl(e.path));return i.scale.setScalar(.01),i.scale.set(e.scale,e.scale,e.scale),i.userData.type=E.xb,i.userData.boneSystem=e.boneSystem,i}_getUrl(e){return`${I.baseUrl}${e}`}constructor(){this._loaders={fbx:new U.y},this._modelConfig={}}}I.baseUrl="https://cdn.openart.ai/";let M=new I;var R=i(72301),D=i(54028),F=i(90587),V=i(33715);class L extends P{execute(){let e=this.editor.objectUtilsByUuid(this.oldObject.uuid);null==e||e.clear(),this.editor.removeObject(this.oldObject),this.editor.addObject(this.object)}undo(){let e=this.editor.objectUtilsByUuid(this.object.uuid);null==e||e.clear(),this.editor.removeObject(this.object),this.editor.addObject(this.oldObject)}toJSON(){let e=super.toJSON();return Object.assign(e,{object:this.object.toJSON()}),e}fromJSON(e){if(super.fromJSON(e),this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){let t=new D.Gql;this.object=t.parse(e.object)}}constructor(e,t=null,i=null){super(e),this.type="SwitchObjectCommand",this.object=i,this.oldObject=t,null!==i&&(this.name=`command/SwitchObjectCommand: ${i.name}-${t.name}`)}}let z=`
  varying vec2 vUv;

  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,O=`
  #include <packing>

  varying vec2 vUv;
  uniform sampler2D tDiffuse;
  uniform sampler2D tDepth;
  uniform float cameraNear;
  uniform float cameraFar;

  float readDepth( sampler2D depthSampler, vec2 coord ) {
    float fragCoordZ = texture2D( depthSampler, coord ).x;
    float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
    return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );
  }

  void main() {
    vec2 centeredUv = vUv;
    float depth = readDepth( tDepth, centeredUv );
    
    // 使用线性映射来可视化深度
    vec3 color = vec3(1.0 - pow(depth, 1.0));
    
    gl_FragColor = vec4(color, 1.0);
  }
`;class B{exportScreenshot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1536,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a={transformMode:this._editor.signals.transformMode.value,gridHelperVisible:this._editor.signals.gridHelperVisible.value};try{this._editor.signals.transformMode.value="none",this._editor.hideGridHelper(),i||this._editor.hideFloor(),this._render.render(this._scene,this._camera);let{height:a,width:n,x:r,y:s}=e,o=2*window.devicePixelRatio,l=document.createElement("canvas"),d=l.getContext("2d");if(!d)throw Error("Failed to get 2D context for target canvas");let c=this._calculateScaledDimensions(n*o,a*o,t);return l.width=c.width,l.height=c.height,d.drawImage(this._render.domElement,r*o,s*o,n*o,a*o,0,0,c.width,c.height),{dataUrl:l.toDataURL("image/png"),width:c.width,height:c.height}}finally{this._editor.signals.transformMode.value=a.transformMode,a.gridHelperVisible&&this._editor.showGridHelper(),this._editor.showFloor()}}_calculateScaledDimensions(e,t,i){return e>t?{width:i,height:Math.round(t*i/e)}:{height:i,width:Math.round(e*i/t)}}exportDepth(){let e=this._editor.signals.transformMode.value;this._editor.signals.transformMode.value="none";let t=this._editor.signals.gridHelperVisible.value;this._editor.hideGridHelper(),this._render.setRenderTarget(this._depthTarget),this._render.clear(),this._render.render(this._scene,this._camera),this._editor.signals.transformMode.value=e,t&&this._editor.showGridHelper();let[i,a,n]=(()=>{let e=new D.iKG(-1,1,1,-1,0,1),t=new D.jyz({vertexShader:z,fragmentShader:O,uniforms:{cameraNear:{value:this._camera.near},cameraFar:{value:this._camera.far},tDiffuse:{value:null},tDepth:{value:null}}}),i=new D._12(2,2),a=new D.Kj0(i,t),n=new D.xsS;return n.add(a),[n,e,t]})();return n.uniforms.tDiffuse.value=this._depthTarget.texture,n.uniforms.tDepth.value=this._depthTarget.depthTexture,this._render.setRenderTarget(null),this._render.render(i,a),this._render.domElement.toDataURL("image/png")}exportSkeleton(){let e=this._editor.signals.transformMode.value;this._editor.signals.transformMode.value="none";let t=this._editor.signals.gridHelperVisible.value;this._editor.hideGridHelper();let i=new Map,a=this._scene.background;this._scene.background=new D.Ilk(0),this._scene.children.forEach(e=>{e.userData.type===E.xb&&(i.set(e,e.visible),!0===e.visible&&this._editor.objectUtilsByUuid(e.uuid).showSkeleton(),e.visible=!1)}),this._render.render(this._scene,this._camera);let n=this._render.domElement.toDataURL("image/jpeg");return this._scene.background=a,this._editor.scene.children.forEach(e=>{e.userData.type===E.xb&&i.has(e)&&(e.visible=i.get(e),this._editor.objectUtilsByUuid(e.uuid).hideSkeleton())}),this._editor.signals.transformMode.value=e,t&&this._editor.showGridHelper(),n}constructor(e,t,i,a,n){this._editor=e,this._render=t,this._scene=i,this._camera=a,this._depthTarget=n}}class W extends P{execute(){this.editor.addObject(this.object)}undo(){let e=this.editor.objectUtilsByUuid(this.object.uuid);null==e||e.clear(),this.editor.removeObject(this.object)}toJSON(){let e=super.toJSON();return Object.assign(e,{object:this.object.toJSON()}),e}fromJSON(e){if(super.fromJSON(e),this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){let t=new D.Gql;this.object=t.parse(e.object)}}constructor(e,t=null){super(e),this.type="AddObjectCommand",this.object=t,null!==t&&(this.name=`command/AddObject: ${t.name}`)}}let $={async animate(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{duration:n=500,onUpdate:r=()=>{},easingFunction:s=e=>e<.5?4*e*e*e:1-(-2*e+2)**3/2}=a,o=performance.now();return new Promise(a=>{let l=d=>{let c=Math.min((d-o)/n,1);i(e,t,s(c)),r(),c<1?requestAnimationFrame(l):a()};requestAnimationFrame(l)})},async animateRotation(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.rotation.clone();return this.animate(a,t,(t,i,a)=>{e.rotation.set(t.x+(i.x-t.x)*a,t.y+(i.y-t.y)*a,t.z+(i.z-t.z)*a),e.updateMatrixWorld(!0)},{...i,easingFunction:e=>e*(2-e)})},async animatePosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.position.clone();return this.animate(a,t,(t,i,a)=>{e.position.lerpVectors(t,i,a),e.updateMatrixWorld(!0)},i)},async animateScale(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.scale.clone();return this.animate(a,t,(t,i,a)=>{e.scale.lerpVectors(t,i,a),e.updateMatrixWorld(!0)},i)}};class Q extends P{async execute(){await $.animatePosition(this.object,this.newPosition,{duration:500,onUpdate:()=>{this.editor.signals.objectChanged.dispatch(this.object,!0)}})}async undo(){await $.animatePosition(this.object,this.oldPosition,{duration:500,onUpdate:()=>{this.editor.signals.objectChanged.dispatch(this.object,!0)}})}update(e){this.newPosition.copy(e.newPosition)}toJSON(){let e=super.toJSON();return e.objectUuid=this.object.uuid,e.oldPosition=this.oldPosition.toArray(),e.newPosition=this.newPosition.toArray(),e}fromJSON(e){super.fromJSON(e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldPosition=new D.Pa4().fromArray(e.oldPosition),this.newPosition=new D.Pa4().fromArray(e.newPosition)}constructor(e,t=null,i=null,a=null){super(e),this.type="SetPositionCommand",this.name="command/SetPosition",this.updatable=!0,this.object=t,null!==t&&null!==i&&(this.oldPosition=t.position.clone(),this.newPosition=i.clone()),null!==a&&(this.oldPosition=a.clone())}}class G extends P{async execute(){return $.animateRotation(this.object,this.newRotation,{onUpdate:()=>this.editor.signals.objectChanged.dispatch(this.object,!0)})}async undo(){return $.animateRotation(this.object,this.oldRotation,{onUpdate:()=>this.editor.signals.objectChanged.dispatch(this.object,!0)})}update(e){this.newRotation.copy(e.newRotation)}toJSON(){let e=super.toJSON();return e.objectUuid=this.object.uuid,e.oldRotation=this.oldRotation.toArray(),e.newRotation=this.newRotation.toArray(),e}fromJSON(e){super.fromJSON(e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldRotation=new D.USm().fromArray(e.oldRotation),this.newRotation=new D.USm().fromArray(e.newRotation)}constructor(e,t=null,i=null,a=null){super(e),this.type="SetRotationCommand",this.name="command/SetRotation",this.updatable=!0,this.object=t,null!==t&&null!==i&&(this.oldRotation=t.rotation.clone(),this.newRotation=i.clone()),null!==a&&(this.oldRotation=a.clone())}}class H extends P{async execute(){await $.animateScale(this.object,this.newScale,{duration:300,onUpdate:()=>{this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object,!0)}})}async undo(){await $.animateScale(this.object,this.oldScale,{duration:300,onUpdate:()=>{this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object,!0)}})}update(e){this.newScale.copy(e.newScale)}toJSON(){let e=super.toJSON();return e.objectUuid=this.object.uuid,e.oldScale=this.oldScale.toArray(),e.newScale=this.newScale.toArray(),e}fromJSON(e){super.fromJSON(e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldScale=new D.Pa4().fromArray(e.oldScale),this.newScale=new D.Pa4().fromArray(e.newScale)}constructor(e,t=null,i=null,a=null){super(e),this.type="SetScaleCommand",this.name="command/SetScale",this.updatable=!0,this.object=t,null!==t&&null!==i&&(this.oldScale=t.scale.clone(),this.newScale=i.clone()),null!==a&&(this.oldScale=a.clone())}}class X{execute(e,t){this.commandQueue.push({action:"execute",command:e}),this.isProcessing||this.processCommandQueue()}undo(){if(!this.historyDisabled&&this.undos.length>0){let e=this.undos.pop();this.commandQueue.push({action:"undo",command:e}),this.isProcessing||this.processCommandQueue()}}redo(){if(!this.historyDisabled&&this.redos.length>0){let e=this.redos.pop();this.commandQueue.push({action:"redo",command:e}),this.isProcessing||this.processCommandQueue()}}async processCommandQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.commandQueue.length>0;){let{action:e,command:t}=this.commandQueue[0];try{switch(e){case"execute":{let e=this.undos.at(-1),i=Date.now()-this.lastCmdTime;if(e&&e.updatable&&t.updatable&&e.object===t.object&&e.type===t.type&&i<500){e.update(t);let i=e.execute();i instanceof Promise&&await i}else{this.undos.push(t),t.id=++this.idCounter;let e=t.execute();e instanceof Promise&&await e,t.inMemory=!0,t.json=t.toJSON()}this.lastCmdTime=Date.now(),this.redos=[];break}case"undo":{!1===t.inMemory&&t.fromJSON(t.json);let e=t.undo();e instanceof Promise&&await e,this.redos.push(t);break}case"redo":{!1===t.inMemory&&t.fromJSON(t.json);let e=t.execute();e instanceof Promise&&await e,this.undos.push(t)}}this.editor.signals.historyChanged.dispatch(t)}catch(t){console.error(`Error executing ${e}:`,t)}this.commandQueue.shift()}this.isProcessing=!1}}canUndo(){return this.undos.length>0}canRedo(){return this.redos.length>0}toJSON(){let e={undos:[],redos:[]};for(let t=0;t<this.undos.length;t++)this.undos[t].hasOwnProperty("json")&&e.undos.push(this.undos[t].json);for(let t=0;t<this.redos.length;t++)this.redos[t].hasOwnProperty("json")&&e.redos.push(this.redos[t].json);return e}fromJSON(e){if(void 0!==e){for(let t=0;t<e.undos.length;t++){let i=e.undos[t],n=new a[i.type](this.editor);n.json=i,n.id=i.id,n.name=i.name,this.undos.push(n),this.idCounter=Math.max(i.id,this.idCounter)}for(let t=0;t<e.redos.length;t++){let i=e.redos[t],n=new a[i.type](this.editor);n.json=i,n.id=i.id,n.name=i.name,this.redos.push(n),this.idCounter=Math.max(i.id,this.idCounter)}this.editor.signals.historyChanged.dispatch(this.undos.at(-1))}}clear(){this.undos=[],this.redos=[],this.idCounter=0,this.editor.signals.historyChanged.dispatch(new P(this.editor))}async goToState(e){if(this.historyDisabled)return;let t=this.undos.at(-1);if(t){if(e>t.id)for(;this.redos.length>0;){let t=this.redos.at(-1);if(!t||t.id>e)break;await this.redo()}else if(e<t.id)for(;this.undos.length>0;){let t=this.undos.at(-1);if(!t||t.id<=e)break;await this.undo()}this.editor.signals.sceneGraphChanged.dispatch("history"),this.editor.signals.historyChanged.dispatch(this.undos.at(-1))}}async enableSerialization(e){for(let e of(await this.goToState(-1),this.redos))e.hasOwnProperty("json")||(e.json=e.toJSON());await this.goToState(e)}constructor(e){this.commandQueue=[],this.isProcessing=!1,this.editor=e,this.undos=[],this.redos=[],this.lastCmdTime=Date.now(),this.idCounter=0,this.historyDisabled=!1}}var K=i(87970);let q=e=>{for(let i of Object.values(E.PW)){var t;if(null===(t=i.core.find(t=>t===e))||void 0===t?void 0:t.toLowerCase().includes("head"))return E.Nj.core.head;if(e===i.system_bone)return E.Nj.core.hip;if(i.core.includes(e)&&(e.toLowerCase().includes("spine")||e.toLowerCase().includes("spine")))return E.Nj.core.spine;if(i.left.includes(e)){if(e.toLowerCase().includes("arm")||e.toLowerCase().includes("hand")||e.toLowerCase().includes("shoulder"))return E.Nj.left.arm;return E.Nj.left.leg}if(i.right.includes(e)){if(e.toLowerCase().includes("arm")||e.toLowerCase().includes("hand")||e.toLowerCase().includes("shoulder"))return E.Nj.right.arm;return E.Nj.right.leg}}return E.Nj.default};class J{get currentChip(){return this._currentClip}showSkeleton(){this.skeleton=new D._YX(this.object),this.editor.scene.add(this.skeleton)}hideSkeleton(){this.skeleton&&(this.editor.scene.remove(this.skeleton),this.skeleton=null)}select(e){this.editor.signals.selectObject.value=this.object;let t=this.editor.signals.transformMode.value;e&&(this.attachTransformControl(e,t),this.actionRegion=e)}updateActionRegion(e){if(!e&&this.transformControls){this.cleanTransformControls();return}let t=this.editor.signals.transformMode.value;this.attachTransformControl(e,t)}clear(){this.cleanLister(),this.skeleton&&this.hideSkeleton(),this.transformControls&&this.cleanTransformControls(),this.cleanTorusGeometry()}cleanTransformControls(){this.transformControls&&(this.transformControls.dispose(),this.editor.scene.remove(this.transformControls.getHelper()),this.transformControls=null,this.actionRegion="")}cleanTorusGeometry(){this._torusGeometry.forEach(e=>{e.geometry.dispose(),e.material&&e.material.dispose(),e.parent&&e.parent.remove(e)}),this._torusGeometry=[]}cleanLister(){this.editor.signals.transformMode.detach(this.transformBindingFlag),this.editor.signals.objectChanged.detach(this.objectChangedBindingFlag)}addAnimation(e){return this._currentClip=e,this._updateFlag=!0,this._mixer=new D.Xcj(this.object),this._animation=this._mixer.clipAction(e),this._animation.play(),this._animation}stopAnimation(){this._animation&&this._animation.stop(),this._mixer&&this._mixer.stopAllAction(),this._updateFlag=!1,this._currentClip=null}update(e){this._mixer&&this._updateFlag&&(this._mixer.update(e),this.editor.signals.objectChanged.dispatch(this.object,!1)),this._updateFlag=!1}getCurrentAction(){return this._animation}attachTransformControl(e,t){if("none"===t)return;let i=this.findBones(e);i&&(this.cleanTransformControls(),this.transformControls=this.createTransformControls(t,i),this.addTransformControlListeners())}createTransformControls(e,t){let i=new K.Ys(this.editor.camera,this.editor.domElement);return i.setMode(e),i.attach(t),i.setSize(1),i.showX=i.showY=i.showZ=!0,this.editor.scene.add(i.getHelper()),i}addTransformControlListeners(){this.transformControls.addEventListener("mouseDown",this.handleMouseDown.bind(this)),this.transformControls.addEventListener("mouseUp",this.handleMouseUp.bind(this)),this.transformControls.addEventListener("objectChange",this.handleObjectChange.bind(this))}handleMouseDown(){this.editor.signals.isGridHelperClicked.value=!0,this.editor.orbitControls.enabled=!1;let e=this.transformControls.object;this.objectPositionOnDown=e.position.clone(),this.objectRotationOnDown=e.rotation.clone(),this.objectScaleOnDown=e.scale.clone()}handleMouseUp(){this.editor.orbitControls.enabled=!0;let e=this.transformControls.object,t=this.transformControls.getMode(),i={translate:{condition:!this.objectPositionOnDown.equals(e.position),command:()=>new Q(this.editor,e,e.position,this.objectPositionOnDown)},rotate:{condition:!this.objectRotationOnDown.equals(e.rotation),command:()=>new G(this.editor,e,e.rotation,this.objectRotationOnDown)},scale:{condition:!this.objectScaleOnDown.equals(e.scale),command:()=>new H(this.editor,e,e.scale,this.objectScaleOnDown)}}[t];(null==i?void 0:i.condition)&&this.editor.history.execute(i.command())}handleObjectChange(){this.editor.signals.objectChanged.dispatch(this.transformControls.object,!1),this.updateControlPoints()}findMainBones(e){let t=this._boneSystem=e.userData.boneSystem,i=E.PW[t],a=[],n=new Set([...i.core,...i.left,...i.right]);return e.traverse(e=>{e instanceof D.N$j&&n.has(e.name)&&a.push(e)}),a}createControlPoints(e){for(let t of e){let e=this.createTorusMesh(t);this.editor.scene.add(e),this._torusGeometry.push(e)}}createTorusMesh(e){let t=new D.xo$(.8,32,32),i=this.getBoneColor(e.name),a=new D.vBJ({color:i,transparent:!0,opacity:.8,depthTest:!1,side:D.ehD}),n=new D.Kj0(t,a);return Object.assign(n.userData,{parentId:this.object.uuid,type:E.vb,region:e.name}),n.position.copy(e.getWorldPosition(new D.Pa4)),n}getBoneColor(e){return q(e)}findRootBone(){let e=E.PW[this._boneSystem].system_bone;return this.findBones(e)}transformModeChange(e){if(this.cleanTransformControls(),this.cleanTorusGeometry(),"none"===e)return;let t=this.findRootBone(),i="rotate"===e?this._mainBones:[t].filter(Boolean);this.createControlPoints(i),this.updateActionRegion(t.name)}findBones(e){return this._mainBones.find(t=>t.name.includes(e))}updateControlPoints(){this._torusGeometry.forEach(e=>{let t=e.userData.region,i=this.findBones(t);i&&(e.position.copy(i.getWorldPosition(new D.Pa4)),e.lookAt(this.editor.camera.position))})}dispose(){this.clear(),this.stopAnimation(),this._mixer&&(this._mixer.uncacheRoot(this.object),this._mixer=null),this._animation=null,this._currentClip=null,this.object=null,this.editor=null,this._mainBones=null}constructor(e,t){this._boneSystem="mixamorig",this.skeleton=null,this._torusGeometry=[],this._mixer=null,this._animation=null,this._updateFlag=!1,this._currentClip=null,this.object=t,this.editor=e,this._mainBones=this.findMainBones(this.object);let i=this.editor.signals.transformMode.value;this.transformModeChange.call(this,i),this.transformBindingFlag=this.editor.signals.transformMode.add(e=>{this.transformModeChange(e)}),this.objectChangedBindingFlag=this.editor.signals.objectChanged.add(e=>{this.updateControlPoints()})}}var Y=i(75449);class ee extends Y.MiniSignal{get value(){return this._value}set value(e){this._value=e,this.dispatch(e)}constructor(e){super(),this._value=e}}class et{clear(){this.historyChanged.detachAll(),this.objectAdded.detachAll(),this.objectRemoved.detachAll(),this.sceneGraphChanged.detachAll(),this.sizeChanged.detachAll(),this.transformMode.detachAll(),this.selectObject.detachAll(),this.objectChanged.detachAll(),this.isGridHelperClicked.detachAll(),this.gridHelperVisible.detachAll()}constructor(){this.historyChanged=new Y.MiniSignal,this.objectAdded=new Y.MiniSignal,this.objectRemoved=new Y.MiniSignal,this.sceneGraphChanged=new Y.MiniSignal,this.sizeChanged=new Y.MiniSignal,this.transformMode=new ee("rotate"),this.selectObject=new ee,this.objectChanged=new Y.MiniSignal,this.isGridHelperClicked=new ee(!1),this.gridHelperVisible=new ee(!0)}}class ei{get scene(){return this._scene}get camera(){return this._camera}get domElement(){return this._renderElement}get orbitControls(){return this._orbitControls}get exporter(){return this._exporter}get modelCount(){return this.scene.children.filter(e=>e.userData.type===E.xb).length}get isWebGLSupported(){return this._webglSupported}mount(e){this._renderElement=e;let{height:t,width:i}=e.getBoundingClientRect();this.cssWidth=i,this.cssHeight=t,this.height=t,this.width=i,this._clock=new D.SUY,this._setupOrbitControls(),this._setupRender(),this._setupRenderTarget(),this._webglSupported&&this._depthTarget&&(this._exporter=new B(this,this._render,this._scene,this._camera,this._depthTarget)),this._initializationEvent()}setSize(e,t){this.width=e,this.height=t,this._render&&this._render.setSize(e,t,!0),this._camera instanceof D.cPb&&(this._camera.aspect=e/t,this._camera.updateProjectionMatrix()),this._setupRenderTarget(),this._webglSupported&&this._depthTarget&&(this._exporter=new B(this,this._render,this._scene,this._camera,this._depthTarget)),this._renderElement.style.height=`${this.cssHeight}px`,this._renderElement.style.width=`${this.cssWidth}px`,this.signals.sizeChanged.dispatch({width:e,height:t})}select(e){this.signals.selectObject.value=e,this.objectUtilsByUuid(e.uuid).select()}unselect(){let e=this.signals.selectObject.value;if(e){let t=this.objectUtilsByUuid(e.uuid);t&&t.cleanTransformControls(),this.signals.selectObject.value=null}else this.objects.forEach(e=>{e.cleanTransformControls()})}addObject(e,t,i){void 0===t?this._scene.add(e):(t.children.splice(i,0,e),e.parent=t),this.objects.set(e.uuid,new J(this,e)),this.signals.objectAdded.dispatch(e)}removeObject(e){null!==e.parent&&(this.objects.delete(e.uuid),e.parent.remove(e),this.signals.objectRemoved.dispatch(e),this.signals.sceneGraphChanged.dispatch("object"))}objectByUuid(e){return this._scene.getObjectByProperty("uuid",e)}objectUtilsByUuid(e){return this.objects.get(e)}setTransformMode(e){this.signals.transformMode.value=e}dispose(){this._orbitControls&&this._orbitControls.dispose(),this.domElement.removeEventListener("click",this._handleInteraction),this.domElement.removeEventListener("touchstart",this._handleInteraction),this._depthTarget&&(this._depthTarget.dispose(),this._depthTarget.depthTexture.dispose()),this._render&&this._render.dispose(),this._orbitControls=null,this._render=null,this._depthTarget=null,this._exporter=null,this._clock=null}clear(){this.dispose(),this._floor=null,this._setupScene(),this._setupCamera(),this.history.clear(),this.objects.clear(),this.signals.clear()}showGridHelper(){this.signals.gridHelperVisible.value=!0}hideGridHelper(){this.signals.gridHelperVisible.value=!1}getSelectModel(){return this._getSceneModel()}showFloor(){this._floor||(this._floor=this._createFloor(),this._scene.add(this._floor)),this._floor.visible=!0}hideFloor(){this._floor&&(this._floor.visible=!1)}async switchModel(e){let t=this._getSceneModel();this.signals.selectObject.value=null,await this.history.execute(new L(this,t,e))}_setupScene(){let e=new D.xsS;e.background=new D.Ilk(15132390);let t=this._createDirectionalLight();return e.add(t),this._gridHelper=this._createGrid(),this.signals.gridHelperVisible.add(e=>{this._gridHelper.visible=e}),e.add(this._gridHelper),this._scene=e,this.showFloor(),e}_createDirectionalLight(){let e=new D.vmT(16777215,4473924,3);e.position.set(0,200,0);let t=new D.Ox3(16777215,3);t.position.set(0,200,100),t.castShadow=!0,t.shadow.camera.top=180,t.shadow.camera.bottom=-100,t.shadow.camera.left=-120,t.shadow.camera.right=120;let i=new D.ZAu;return i.add(t),i.add(e),i}_setupCamera(){let e=this.width/this.height,t=new D.cPb(45,e,.1,1e3);return t.position.set(80,60,70),t.lookAt(0,0,0),this._camera=t,t}_setupOrbitControls(){let e=new V.z(this._camera,this._renderElement);return e.target.set(0,30,0),e.minDistance=20,e.maxDistance=500,e.minPolarAngle=Math.PI/6,e.maxPolarAngle=.7*Math.PI,this._renderElement.addEventListener("touchstart",e=>{e.preventDefault(),e.stopPropagation()},{passive:!1}),this._renderElement.addEventListener("touchmove",e=>{e.preventDefault(),e.stopPropagation()},{passive:!1}),this._renderElement.addEventListener("touchend",e=>{e.preventDefault(),e.stopPropagation()},{passive:!1}),e.listenToKeyEvents(window),e.enableDamping=!0,e.dampingFactor=.05,e.addEventListener("change",(0,R.Z)(()=>{this.signals.sceneGraphChanged.dispatch("orbit")},100)),e.update(),this._orbitControls=e,e}_setupRender(){if(this._webglSupported=this._isWebGLAvailable(),!this._webglSupported){if(!this.width||!this.height){let e=this._renderElement.getBoundingClientRect();this.width=e.width||800,this.height=e.height||600}console.warn("WebGL is not supported, falling back to basic rendering");let e=this._renderElement.getContext("2d");if(e){let t=window.devicePixelRatio||1;this._renderElement.width=this.width*t,this._renderElement.height=this.height*t,this._renderElement.style.width=this.width+"px",this._renderElement.style.height=this.height+"px",e.scale(t,t),e.fillStyle="#1a1a1a",e.fillRect(0,0,this.width,this.height);let i=this.width/2,a=this.height/2,n=i-200,r=a-100;e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=10,e.fillStyle="#ffffff",e.fillRect(n,r,400,200),e.shadowColor="transparent",e.fillStyle="#ff4444",e.font="48px Arial",e.textAlign="center",e.fillText("⚠",i,r+60),e.fillStyle="#333333",e.font="bold 24px -apple-system, Arial",e.fillText("WebGL Required",i,r+100),e.fillStyle="#666666",e.font="16px -apple-system, Arial",e.fillText("This application requires WebGL support",i,r+130),e.fillText("Please update your browser",i,r+155)}return this._render=null,null}let e=new F.CP7({antialias:!0,canvas:this._renderElement,alpha:!0,precision:"highp"});return e.setPixelRatio(2*window.devicePixelRatio),e.autoClear=!1,e.setAnimationLoop(this._animate.bind(this)),this._render=e,this.setSize(this.width,this.height),e}_isWebGLAvailable(){try{let e=document.createElement("canvas"),t=e.getContext("webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl");return null!==t}catch(e){return!1}}_animate(){if(!this._render||!this._webglSupported)return;this._orbitControls.update();let e=this._clock.getDelta();this.objects.forEach(t=>{t.update(e)}),this._render.render(this._scene,this._camera)}_createGrid(){let e=new D.VLJ(2e3,20,0,0);return e.material.opacity=.2,e.material.transparent=!0,e}_setupRenderTarget(){if(!this._webglSupported){console.warn("Skipping render target setup - WebGL not supported");return}let e=this.width,t=this.height;this._depthTarget=new D.dd2(e,t,{minFilter:D.TyD,magFilter:D.TyD,format:D.wk1,type:D.VzW,stencilBuffer:!1,depthBuffer:!0,generateMipmaps:!1}),this._depthTarget.depthTexture=new D.$YQ(e,t),this._depthTarget.depthTexture.format=D.qkB,this._depthTarget.depthTexture.type=D.VzW,this._depthTarget.depthTexture.minFilter=D.TyD,this._depthTarget.depthTexture.magFilter=D.TyD,this._depthTarget.depthTexture.generateMipmaps=!1}_getSceneModel(){if(this.signals.selectObject.value)return this.signals.selectObject.value;for(let e of this.scene.children)if(e.userData.type===E.xb)return e;return null}_initializationEvent(){this._webglSupported&&(this.domElement.addEventListener("click",this._handleInteraction),this.domElement.addEventListener("touchstart",e=>{e.preventDefault(),this._handleInteraction(e)},{passive:!1}))}_createFloor(){let e=new D._12(2e3,2e3),t=new D.Wid({color:13421772,roughness:1,metalness:0}),i=new D.Kj0(e,t);return i.rotation.x=-Math.PI/2,i.receiveShadow=!0,i}constructor(){this._floor=null,this._webglSupported=!0,this.state="uninitialized",this.objects=new Map,this._handleInteraction=e=>{let t,i;if(e instanceof MouseEvent)t=e.offsetX,i=e.offsetY;else{let a=e.touches[0],n=this._renderElement.getBoundingClientRect();t=a.clientX-n.left,i=a.clientY-n.top}let{height:a,width:n}=this._renderElement.getBoundingClientRect(),r=t/n*2-1,s=-(i/a*2)+1,o=new D.iMs;if(o.setFromCamera(new D.FM8(r,s),this._camera),this.signals.isGridHelperClicked.value){this.signals.isGridHelperClicked.value=!1;return}let l=this.scene.children.filter(e=>e.userData.type===E.vb),d=o.intersectObjects(l,!1);if(d.length>0){let{parentId:e,region:t}=d[0].object.userData,i=this.signals.selectObject.value;if(i&&i.uuid===e||this.objectUtilsByUuid(e).select(t),i&&i.uuid===e){let i=this.objectUtilsByUuid(e);i.actionRegion!==t&&i.updateActionRegion(t)}return}let c=[];this.scene.children.filter(e=>e.userData.type===E.xb).forEach(e=>{e.traverse(e=>{e instanceof D.Kj0&&c.push(e)})});let u=o.intersectObjects(c,!1);if(u.length>0){let e=u[0].object;for(;e&&e.userData.type!==E.xb;)e=e.parent;if(e){let t=this.objectUtilsByUuid(e.uuid);null==t||t.updateActionRegion()}return}this.unselect()},this.history=new X(this),this.signals=new et,this._setupScene(),this._setupCamera()}}let ea=null;var en=i(45842),er=i(62573),es=i(79409),eo=i(7999),el=i(97779);function ed(e){let{icon:t,label:i,onClick:a,isActive:r}=e;return(0,n.jsx)(c.Z,{variant:"contained",startIcon:t,onClick:a,sx:{backgroundColor:r?eo.u8:"#1d1d1d",color:"white","&:hover":{backgroundColor:r?eo.lr:"#1d1d1d"},padding:"4px 12px",minHeight:"32px",fontSize:"0.875rem"},children:i})}var ec=(0,r.forwardRef)(function(e,t){let{targetMaxSize:i,defaultRatio:a,showFloor:s}=e,o=(ea||(ea=new ei),ea),l=(0,r.useRef)(null),c=(0,r.useRef)(null),[u,h]=(0,r.useState)("rotate"),{isMobile:m}=(0,el.j)(),[,p]=(0,r.useState)({}),[y,C]=(0,r.useState)(!1),[Z,N]=(0,r.useState)(E.E0),[P,U]=(0,r.useState)(E.iW),[R,D]=(0,r.useState)("custom"),[F,V]=(0,r.useState)({height:300,width:400,x:0,y:0}),[L,z]=(0,r.useState)("Default"),[O,B]=(0,r.useState)(!1),[W,$]=(0,r.useState)(!0),[Q,G]=(0,r.useState)(!0),[H,X]=(0,r.useState)("Click dots to rotate joints and adjust angles."),K=E.AY.find(e=>e.key===Z);(0,r.useEffect)(()=>{if(l.current&&o)return o.mount(l.current),o.signals.transformMode.add(e=>{h(e)}),o.signals.historyChanged.add(()=>{p({})}),o.modelCount<1&&M.load().then(async e=>{o.addObject(e),C(!1)}),()=>{o&&o.dispose()}},[o]),(0,r.useEffect)(()=>{if(Q){let e=setTimeout(()=>{G(!1)},5e3);return()=>clearTimeout(e)}},[Q]);let q=async e=>{C(!0),N(e),U(E.AY.find(t=>t.key===e).config);let t=await M.load(e);o.switchModel(t),D("custom"),C(!1)},J=async e=>{if("custom"===e)return;C(!0),D(e);let t=o.getSelectModel(),i=await M.loadPose(K,e),a=o.objectUtilsByUuid(t.uuid).currentChip,n=i?i.animations[0]:null;await o.history.execute(new A(o,t,n,a)),C(!1)},Y=(0,r.useCallback)(()=>{o&&o.clear(),o.mount(l.current),o.signals.transformMode.add(e=>{h(e)}),o.signals.historyChanged.add(()=>{p({})}),o.modelCount<1&&M.load().then(async e=>{o.addObject(e),C(!1)})},[o]);(0,r.useImperativeHandle)(t,()=>({exportData(){let{dataUrl:e,width:t,height:a}=null==o?void 0:o.exporter.exportScreenshot(F,i,s),n=P.find(e=>e.path===R);return{pose_image:e,height:a,width:t,pose_description:n?n.description:"",pose_model:Z}}}));let ee=(0,r.useCallback)(()=>{(null==o?void 0:o.history.canUndo())&&o.history.undo()},[o]),et=(0,r.useCallback)(()=>{(null==o?void 0:o.history.canRedo())&&o.history.redo()},[o]);(0,r.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&("z"===e.key.toLowerCase()?e.shiftKey?(e.preventDefault(),et()):(e.preventDefault(),ee()):"r"===e.key.toLowerCase()&&(e.preventDefault(),Y()))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[ee,et,Y]),(0,r.useEffect)(()=>{let e,t;if(!l.current)return;let{height:i,width:n}=l.current.getBoundingClientRect(),[r,s]=(a??(m?"3:2":"16:9")).split(":").map(e=>Number.parseInt(e));n/r<i/s?t=(e=1*n)*s/r:e=(t=1*i)*r/s,V({height:t,width:e,x:(n-e)/2,y:(i-t)/2})},[l.current,m,a]);let eo=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j.Z,{width:"100%",height:"100%",sx:{position:"relative"},children:[(0,n.jsx)("canvas",{ref:l,style:{width:"100%",height:"100%"}}),(0,n.jsx)(j.Z,{ref:c,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",isolation:"isolate",background:"rgba(0, 0, 0, 0.3)"}}),(0,n.jsx)(k,{active:W,lock:O,size:F,onChange:e=>{V(e)},maskRef:c}),y?(0,n.jsxs)(j.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)(j.Z,{sx:{color:"white",background:"rgba(0, 0, 0, 0.6)",padding:"4px 8px",borderRadius:"4px"},children:"Loading model..."})]}):null,Q?(0,n.jsx)(j.Z,{sx:{position:"absolute",top:"10px",left:"50%",transform:"translate(-50%,0)",display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:(0,n.jsx)(d.Z,{variant:"body1",sx:{color:"white",background:"rgba(0, 0, 0, 0.6)",padding:"4px 8px",borderRadius:"4px",whiteSpace:"nowrap",textAlign:"center",fontWeight:500,fontSize:{xs:"0.65rem",sm:"1rem"}},children:H})}):null]}),(0,n.jsxs)(f.Z,{direction:"row",spacing:1,p:1,justifyContent:"center",position:"relative",bottom:0,children:[(0,n.jsx)(ed,{icon:(0,n.jsx)(x.Z,{}),label:"Move",isActive:"translate"===u,onClick:()=>{null==o||o.setTransformMode("translate"),G(!0),X(m?"Use arrows to move the character or two fingers to adjust the camera.":"Click to move the character or press arrow keys to adjust the camera.")}}),(0,n.jsx)(ed,{icon:(0,n.jsx)(g.Z,{}),label:"Rotate",isActive:"rotate"===u,onClick:()=>{null==o||o.setTransformMode("rotate"),G(!0),X("Click dots to rotate joints and adjust angles.")}}),(0,n.jsx)(S.Z,{orientation:"vertical",flexItem:!0}),(0,n.jsx)(er.Br,{icon:"Undo",tooltip:(0,n.jsx)(er.mQ,{shortcut:["cmd","Z"],children:"History Undo"}),disable:(null==o?void 0:o.history.canUndo())===!1,onClick:()=>{o.history.undo()},sx:en.qV}),(0,n.jsx)(er.Br,{icon:"Redo",tooltip:(0,n.jsx)(er.mQ,{shortcut:["cmd","shift","Z"],children:"History Redo"}),disable:(null==o?void 0:o.history.canRedo())===!1,onClick:()=>{o.history.redo()},sx:en.qV}),(0,n.jsx)(er.Br,{icon:"ph:arrows-clockwise",tooltip:(0,n.jsx)(er.mQ,{shortcut:["cmd","R"],children:"Reset"}),onClick:()=>{Y()},label:"Reset",sx:{...en.qV,position:"absolute",right:"0px",zIndex:1e3}})]})]}),ec=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_,{title:"3D Model",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:1,mb:2},children:[...E.AY.filter(e=>e.key===Z),...E.AY.filter(e=>e.key!==Z).slice(0,2)].map(e=>(0,n.jsx)(j.Z,{onClick:()=>q(e.key),sx:{cursor:"pointer",border:Z===e.key?"2px solid #4CAF50":"2px solid #444",borderRadius:"4px",overflow:"hidden",aspectRatio:"1","&:hover":{opacity:.8}},children:(0,n.jsx)("img",{src:`${I.baseUrl}/${e.thumbnail}`,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}})},e.key))}),(0,n.jsx)(T,{value:Z,onChange:q,options:E.AY.map(e=>({label:e.name,value:e.key,thumbnail:`${I.baseUrl}/${e.thumbnail}`}))})]})}),(0,n.jsx)(S.Z,{}),(0,n.jsx)(_,{title:"Pose",children:(0,n.jsx)(T,{value:P.some(e=>e.path===R)?R:"custom",onChange:J,options:[{label:"Custom",value:"custom",thumbnail:`${I.baseUrl}/${K.thumbnail}`},...P.map(e=>({label:e.description,value:e.path,thumbnail:`${I.baseUrl}three-models/thumbnail/${e.thumbnail}`}))]})}),(0,n.jsx)(S.Z,{}),(0,n.jsx)(_,{title:"Image Size",children:(0,n.jsx)(f.Z,{direction:"column",spacing:1,children:(0,n.jsx)(es.o,{showLock:!0,lock:O,setLock:B,value:L,aspectRatios:E.pI,onChange:e=>{var t;let i=E.pI.find(t=>t.ratio===e);if(!i)return;let a=null===(t=l.current)||void 0===t?void 0:t.getBoundingClientRect();if(!a)return;let n=1*a.width,r=i.size.height/i.size.width*n;r>1*a.height&&(r=1*a.height,n=i.size.width/i.size.height*r),z(e),$(!0),V({...F,width:n,height:r,x:(a.width-n)/2,y:(a.height-r)/2})}})})})]});return(0,n.jsx)(m?w:v,{content:eo,operation:ec})}),eu=i(62297),eh=i(63107),em=i(27806),ep=i(28989),ex=e=>{let{open:t,onClose:i,onPoseChange:a,targetMaxSize:x,defaultRatio:g,showFloor:j}=e,b=(0,r.useRef)(),{isMobile:f}=(0,el.j)(),[S,v]=(0,r.useState)(!1);return(0,n.jsxs)(o.Z,{open:t,fullWidth:!0,maxWidth:"lg",PaperProps:{sx:{alignItems:"center",bgcolor:"#1D1D1D"}},children:[(0,n.jsx)(l.Z,{sx:{width:"100%",borderBottom:"1px solid #444444",padding:2},children:(0,n.jsxs)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(d.Z,{variant:"h6",fontWeight:600,children:"Pose your character"}),f?null:(0,n.jsx)(d.Z,{variant:"body1",fontWeight:400,fontSize:14,children:"Click joints to adjust poses or select from preset poses below"})]}),(0,n.jsxs)(m.Z,{direction:"row",gap:2,alignItems:"center",children:[(0,n.jsxs)(c.Z,{variant:"contained",LinkComponent:p.r,href:"https://youtu.be/SY28s_omVxw?si=dAWQdhk5Jwugj13N",target:"_blank",sx:{bgcolor:"rgb(68, 68, 68)",color:"white","&:hover":{bgcolor:"rgb(60, 60, 60)"}},children:[(0,n.jsx)(em.PhMonitorPlay,{size:16,sx:{mr:1}}),"Tutorial"]}),(0,n.jsx)(s.Z,{startIcon:(0,n.jsx)(er.oE,{icon:"material-symbols:save-rounded",size:16}),variant:"contained",color:"primary",loading:S,sx:{color:"white",bgcolor:eo.u8,"&:hover":{bgcolor:eo.lr}},onClick:async()=>{try{v(!0);let e=b.current.exportData(),t=e.pose_image,n=(await (0,eh.Ws)((0,eu.Jr)(t))).imageUrl;e.pose_image=n,a(e),i({},"backdropClick")}catch{(0,ep.cB)("Save pose error")}finally{v(!1)}},children:(0,n.jsxs)("span",{children:[f?"Save":"Update Pose"," "]})}),(0,n.jsx)(u.Z,{onClick:()=>i(null,"escapeKeyDown"),children:(0,n.jsx)(em.PhX,{size:24})})]})]})}),(0,n.jsx)(h.Z,{sx:{width:"100%",height:"100vh",padding:0,bgcolor:"#1D1D1D"},children:(0,n.jsx)(ec,{ref:b,targetMaxSize:x,defaultRatio:g,showFloor:j})})]})}},69854:function(e,t,i){i.d(t,{y:function(){return c}});var a=i(52676);i(75271);var n=i(56407),r=i(80110),s=i(82256),o=i(93216);let l=e=>"object"==typeof e&&"getValue"in e?e.getValue():"string"==typeof e&&"none"===e.toLocaleLowerCase()?"":e;var d=i(44567);function c(e){let{children:t,value:i,extra:c,expend:u,onExpendChange:h}=e,m=(0,a.jsxs)(n.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",width:"100%",children:[(0,a.jsxs)(n.Z,{direction:"row",justifyContent:"start",children:[(0,a.jsx)(o.ZP,{title:e.tooltip,anchor:(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:1,children:[e.startIcon,(0,a.jsxs)(r.Z,{variant:"editor-h3",sx:e.labelSx,children:[e.label,e.showValue?(0,a.jsxs)("span",{children:[":",l(i)]}):null]})]})}),!e.required&&e.showOptional?(0,a.jsx)(n.Z,{sx:{ml:"4px",borderRadius:1,background:"#464749",fontSize:13,padding:"0 5px"},alignItems:"center",justifyContent:"center",children:"Optional"}):null]}),(0,a.jsx)(n.Z,{mr:1,children:c})]});return(0,a.jsx)(s.U,{id:e.id,className:e.className,title:m,expanded:u,expandIcon:e.expandIcon,onChange:(e,t)=>h(t),content:t,sx:(0,d.j)({display:e.hidden&&"none"},e.sx)})}},97447:function(e,t,i){i.d(t,{x:function(){return l}});var a=i(52676);i(75271);var n=i(56407),r=i(80110),s=i(93216),o=i(30931);function l(e){let{extra:t,children:i,value:l}=e,d=(0,a.jsxs)(n.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",justifyItems:"center",children:[(0,a.jsxs)(n.Z,{direction:"row",spacing:.5,justifyContent:"start",children:[(0,a.jsx)(s.ZP,{title:e.tooltip,anchor:(0,a.jsxs)(r.Z,{variant:"editor-label1",sx:{mr:"2px",whiteSpace:"nowrap"},children:[e.label,e.showValue?(0,a.jsxs)("span",{children:[":",(0,o.N)(l)]}):null]})}),!e.required&&e.showOptional?(0,a.jsx)(n.Z,{sx:{borderRadius:1,background:"#464749",fontSize:13,padding:"0 5px"},alignItems:"center",justifyContent:"center",children:"Optional"}):null]}),(0,a.jsx)(n.Z,{justifyContent:"end",flexWrap:"nowrap",children:t})]});return(0,a.jsxs)(n.Z,{sx:{display:e.hidden&&"none",...e.sx},direction:"column",spacing:2,children:[e.label?d:null,i]})}},70794:function(e,t,i){i.d(t,{m:function(){return c}});var a=i(52676),n=i(56407),r=i(80110),s=i(69854),o=i(7999),l=i(27806),d=i(44567);function c(e){let{startIcon:t,expandIcon:i,label:c,sx:u,isNew:h,isBeta:m,...p}=e,x=p.expend?l.PhMinusBold:l.PhPlusBold;return(0,a.jsx)(s.y,{startIcon:(0,a.jsx)(t,{size:{xs:22,md:20}}),expandIcon:(0,a.jsx)(x,{size:{xs:18,md:16}}),label:(0,a.jsxs)(n.Z,{direction:"row",spacing:1,children:[(0,a.jsx)(r.Z,{variant:"editor-label1",children:c}),h?(0,a.jsx)(r.Z,{variant:"caption",sx:{color:o.MK},children:"New"}):null,m?(0,a.jsx)(r.Z,{variant:"caption",sx:{color:"rgba(98, 144, 255, 1)"},children:"Beta"}):null]}),sx:(0,d.j)({"& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(180deg)"}},u),...p})}},70194:function(e,t,i){i.d(t,{Z:function(){return x}});var a=i(52676),n=i(56407),r=i(22988),s=i(40728),o=i(89765),l=i(87345),d=i(11560),c=i(15830),u=i(48190),h=i(41781),m=i(97779),p=i(44567);function x(e){let{children:t,sx:i}=e,{isMobile:x}=(0,m.j)(),g=(0,l.y)(),j=(0,d.TS)((0,s.N)(e=>e.key)),b=(0,d.TS)((0,s.N)(e=>e.getParameterValue("type"))),[f,S]=(0,h.y)({key:u.J[b]?`create.model.${u.J[b]}`:`create.model.${j}`,sx:{".feature-block-title-text":{fontSize:13},".feature-block-description":{fontSize:10}}});return(0,a.jsxs)(r.Z,{className:"create-config-container",flex:"1",sx:(0,p.j)({overflow:{md:"auto"},"&::-webkit-scrollbar":{width:"5px",backgroundColor:"var(--Gray-100)"},"&::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:"var(--Gray-300)","&:hover":{backgroundColor:"var(--Gray-400)"}}},i),children:[(()=>{if(g===c.V.CREATE){let e=S();return e?(0,a.jsx)(n.Z,{p:1,children:e}):null}return null})(),x&&"dalle"!==b?(0,a.jsx)(o.Z,{}):null,t]})}},36741:function(e,t,i){i.d(t,{s:function(){return g}});var a=i(52676),n=i(40728),r=i(70811),s=i(62573),o=i(97447),l=i(95314),d=i(33045);let c=e=>{let{controlnetOptions:t,value:i,onChange:n}=e;return(0,a.jsxs)(r.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(l.U,{value:i.image_url,uploadUrl:"/media/upload_image",onChange:e=>{n(i.clone({image_url:(null==e?void 0:e.imageUrl)??""}))}}),i.image_url?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.x,{label:"Mode",sx:{mt:"8px !important"},children:(0,a.jsx)(s.fc,{options:t.map(e=>{let t=`${e.value.annotator_type}:${e.value.model_name}`;return{label:e.label,value:t}}),value:`${i.annotator_type}:${i.model_name}`,onChange:e=>{let[t,a]=e.split(":");n(i.clone({annotator_type:t,model_name:a}))}})}),(0,a.jsx)(s.X9,{showResult:!0,min:.1,max:1,step:.01,value:i.controlnet_conditioning_scale,onChange:e=>{n(i.clone({controlnet_conditioning_scale:e}))},label:"Control Weight"}),(0,a.jsx)(o.x,{label:"Mode",sx:{mt:"0px !important"},children:(0,a.jsx)(s.fc,{options:d.Sf.map(e=>({label:e,value:e})),value:i.resize_mode,onChange:e=>{n(i.clone({resize_mode:e}))}})})]}):null]})};var u=i(70794),h=i(58370),m=i(11560),p=i(27806);let x={display:"flex",flexDirection:"column",justifyContent:"space-between"},g=e=>{let{options:t}=e,i=(0,m.TS)((0,n.N)(e=>e.getParameterValue("controlnet"))),r=(0,m.TS)(e=>e.setControlnet),s=(0,m.TS)((0,n.N)(e=>e.getUiState("controlnet.expanded",!1))),o=(0,m.TS)(e=>e.ensureUiState);return(0,a.jsx)(u.m,{defaultExpanded:!1,label:"Advanced (ControlNet)",startIcon:p.PhSliders,extra:(0,a.jsx)(h.U,{name:"controlnet",value:i}),value:i,sx:x,expend:s,onExpendChange:e=>o("controlnet.expanded",e),children:(0,a.jsx)(c,{controlnetOptions:t,value:i,onChange:r})})}},78118:function(e,t,i){i.d(t,{d:function(){return w}});var a=i(52676),n=i(40728),r=i(70794),s=i(27574),o=i(70811),l=i(62573),d=i(95314);let c=e=>{let{disabled:t,banner:i,value:n,onChange:r}=e;return(0,a.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(d.U,{disabled:t,value:n.image_url,uploadUrl:"/media/upload_image",onChange:e=>{r({...n,image_url:(null==e?void 0:e.imageUrl)??"",height:null==e?void 0:e.height,width:null==e?void 0:e.width})}}),i?(0,a.jsx)(s.Z,{severity:"info",children:i}):null,n.image_url?(0,a.jsx)(l.X9,{showResult:!0,min:.1,max:1,step:.01,value:n.influenceStrength,onChange:e=>{r({...n,influenceStrength:e})},label:"Influence Strength",tipText:"The higher this number is, the more influence the upload imaged will have on the generated image."}):null]})};var u=i(75271),h=i(23187),m=i(80110),p=i(70932),x=i(45840);let g=e=>{let{maxSize:t,banner:i,value:n,onChange:r}=e,[d,g]=(0,u.useState)(!1),j=(0,u.useMemo)(()=>n.pose_image?()=>{r({...n,pose_image:""})}:null,[r,n]);return(0,a.jsxs)(o.Z,{spacing:1,children:[(0,a.jsx)(c,{value:n,onChange:e=>r({...n,...e,pose_image:""}),disabled:!!n.pose_image}),(0,a.jsx)(h.Z,{textAlign:"center",children:(0,a.jsx)(m.Z,{variant:"body2",children:"or"})}),(0,a.jsx)(x.T,{src:n.pose_image||"https://cdn.openart.ai/assets/character/Pose1.webp",active:!!n.pose_image,onClick:()=>g(!0),activeText:"Modify Pose",onDelete:j,disabled:!!n.image_url,children:"Open Pose Editor"}),(0,a.jsx)(l.X9,{showResult:!0,min:.1,max:1,step:.01,value:n.pose_weight,onChange:e=>{r({...n,pose_weight:e})},label:"Weight",disabled:!!n.image_url}),(0,a.jsx)(p.Z,{open:d,onClose:()=>g(!1),onPoseChange:e=>{r({...n,...e,image_url:""})},targetMaxSize:t,defaultRatio:"1:1",showFloor:!1}),i?(0,a.jsx)(s.Z,{severity:"info",children:i}):null]})};var j=i(58370),b=i(11560),f=i(50093),S=i(27806);let v={display:"flex",flexDirection:"column",justifyContent:"space-between"},w=e=>{let t=(0,b.TS)((0,n.N)(e=>e.getParameterValue("type"))),i=(0,b.TS)((0,n.N)(e=>e.getParameterValue("imageReference"))),s=(0,b.TS)(e=>e.setReference),o=(0,b.TS)(e=>e.ensureUiState),l=(0,b.TS)((0,n.N)(e=>e.getUiState("imageReference.style.expanded",!1))),d=(0,b.TS)((0,n.N)(e=>e.getUiState("imageReference.pose.expanded",!1))),u=(0,b.TS)((0,n.N)(e=>e.getUiState("imageReference.composition.expanded",!1))),h=(0,b.TS)((0,n.N)(e=>e.getUiState("imageReference.face.expanded",!1)));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.m,{className:"image-reference-style-accordion-item",startIcon:S.PhPalette,label:"Style Reference",extra:(0,a.jsx)(j.U,{name:"imageReference.style",value:i.getTypeValue("style")}),value:i.getTypeValue("style"),sx:v,expend:l,onExpendChange:e=>o("imageReference.style.expanded",e),children:(0,a.jsx)(c,{banner:"Works best with the composition reference",value:i.getTypeValue("style"),onChange:e=>s({data:e,...f.m[t]})})}),(0,a.jsx)(r.m,{className:"image-reference-pose-accordion-item",isNew:!0,startIcon:S.PhPersonSimpleWalk,label:"Pose Reference",extra:(0,a.jsx)(j.U,{name:"imageReference.pose",value:i.getTypeValue("pose")}),value:i.getTypeValue("pose"),sx:v,expend:d,onExpendChange:e=>o("imageReference.pose.expanded",e),children:(0,a.jsx)(g,{banner:"Only for humans",maxSize:f.m[t].maxWidth,value:i.getTypeValue("pose"),onChange:e=>s({data:e,...f.m[t]})})}),(0,a.jsx)(r.m,{className:"image-reference-composition-accordion-item",startIcon:S.PhCubeFocus,label:"Composition Reference",extra:(0,a.jsx)(j.U,{name:"imageReference.composition",value:i.getTypeValue("composition")}),value:i.getTypeValue("composition"),sx:v,expend:u,onExpendChange:e=>o("imageReference.composition.expanded",e),children:(0,a.jsx)(c,{value:i.getTypeValue("composition"),onChange:e=>s({data:e,...f.m[t]})})}),(0,a.jsx)(r.m,{className:"image-reference-face-accordion-item",startIcon:S.PhSmiley,label:"Face Reference",extra:(0,a.jsx)(j.U,{name:"imageReference.face",value:i.getTypeValue("face")}),value:i.getTypeValue("face"),sx:v,expend:h,onExpendChange:e=>o("imageReference.face.expanded",e),children:(0,a.jsx)(c,{value:i.getTypeValue("face"),onChange:e=>s({data:e,...f.m[t]})})})]})}},21718:function(e,t,i){i.d(t,{o:function(){return j}});var a=i(52676),n=i(56407),r=i(27574),s=i(40728),o=i(62573),l=i(70794),d=i(95314),c=i(66319),u=i(58370),h=i(11560),m=i(50093),p=i(7999),x=i(27806);let g=()=>{let e=(0,h.TS)((0,s.N)(e=>e.getParameterValue("type"))),t=(0,h.TS)((0,s.N)(e=>e.getParameterValue("image_url"))),[i,l]=(0,h.TS)((0,s.N)(e=>e.getParameterValueAndSetter("strength"))),u=(0,h.TS)(e=>e.setImageUrl),p=(0,h.TS)(e=>e.setPrompt),x=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsxs)(n.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(d.U,{value:t,uploadUrl:"/media/upload_raw_image",onChange:t=>u({...t,...m.m[e]})}),(0,a.jsx)(c.Z,{uploadedImgUrl:t,onChange:p,viewPrompt:()=>{var e;null===(e=document.querySelector(".prompt-accordion-form-item"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"}),x("prompt.expanded",!0)}}),(0,a.jsx)(r.Z,{severity:"info",children:"Output will match uploaded image’s aspect ratio"}),(0,a.jsx)(o.X9,{showResult:!0,min:.1,max:1,step:.01,value:i,onChange:l,label:"Creativity level",tipText:"The higher this number is, the more creative AI is and less similar the output image is to the original image."})]})},j=()=>{let e=(0,h.TS)((0,s.N)(e=>e.getParameterValue("image_url"))),t=(0,h.TS)((0,s.N)(e=>e.getUiState("image_url.expanded",!1))),i=(0,h.TS)(e=>e.ensureUiState);return(0,a.jsx)(l.m,{value:e,defaultExpanded:!1,className:"image-to-image-accordion-item",startIcon:x.PhImage,label:"Image to Image",extra:(0,a.jsx)(u.U,{name:"image_url",value:e}),sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",scrollMarginTop:p.Sw},expend:t,onExpendChange:e=>i("image_url.expanded",e),children:(0,a.jsx)(g,{})})}},47717:function(e,t,i){i.d(t,{i:function(){return eb}});var a=i(52676),n=i(70811),r=i(40728),s=i(69854),o=i(31270),l=i(56407),d=i(80110),c=i(77379),u=i(8765),h=i(75271),m=i(97792),p=i(11955),x=i(72660),g=i(22988),j=i(47586),b=i(63132),f=i(58306),S=i(76651);let v=e=>{let{onSelect:t,options:i,multiple:n=!1,label:r="Filter",...s}=e,[o,d]=(0,h.useState)([]),c=e=>{d(t=>{let i=[...t];if(i.includes(e))i.splice(i.indexOf(e),1);else{if(!n)return[e];i.push(e)}return i})};return(0,h.useEffect)(()=>{null==t||t(o.map(e=>i[e].value))},[o]),(0,a.jsx)(g.Z,{children:(0,a.jsx)(l.Z,{direction:"row",spacing:1,sx:{p:2,overflow:"auto"},children:i.map((e,t)=>(0,a.jsx)(S.Z,{label:e.label,sx:{color:"#ffffff","&:hover":{boxShadow:"0 4px 8px 0 rgba(0,0,0,0.2)",backgroundColor:o.includes(t)?"secondary.dark":"primary.dark"},transition:"0.3s",borderRadius:"20px",backgroundColor:o.includes(t)?"secondary.main":"",...s},onClick:()=>c(t),clickable:!0},t))})})};var w=i(87946),y=i(13724),C=i(24181),T=i(19509),_=i(45956),Z=i(56114),N=i(26110),k=i(37838),P=i(15830),A=i(24088);function E(){return(0,a.jsxs)(y.Z,{sx:{position:"relative",height:"100%",border:"2px solid",borderColor:"background.paper",opacity:.7},children:[(0,a.jsx)(l.Z,{direction:"column",sx:{position:"absolute",bottom:0,left:0,right:0,height:"110px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",display:"flex",p:1},children:(0,a.jsxs)(l.Z,{direction:"column",spacing:.5,children:[(0,a.jsx)(C.Z,{variant:"text",width:"80%",height:20,sx:{bgcolor:"rgba(255, 255, 255, 0.3)"}}),(0,a.jsx)(C.Z,{variant:"text",width:"60%",height:14,sx:{bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,a.jsx)(C.Z,{variant:"text",width:"50%",height:14,sx:{bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,a.jsx)(C.Z,{variant:"text",width:"90%",height:14,sx:{bgcolor:"rgba(255, 255, 255, 0.2)"}})]})}),(0,a.jsx)(C.Z,{variant:"rectangular",sx:{height:{xs:150,sm:200,md:300,lg:300,xl:350}}})]})}function U(e){let{models:t,isFetching:i,onClose:n,searchKeyword:r,selectedModel:s,showCreateCard:o=!0,emptyComponent:l,showCreatedTime:d=!0}=e,[c]=(0,k.jC)(),u=async e=>{await c({modelConfig:e,parameters:{}},P.V.CHARACTER),null==n||n()},h=t.filter(e=>e.character.character_name.toLowerCase().includes(r.toLowerCase())),m=i?[]:o?[{}].concat(h):h;return!i&&0===t.length&&l?l:i||0!==t.length||o?i?(0,a.jsx)(g.Z,{children:(0,a.jsx)(T.ZP,{container:!0,spacing:3,alignItems:"stretch",children:Array.from({length:8},(e,t)=>(0,a.jsx)(T.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,xl:2,sx:{height:{xs:"300px",sm:"auto"}},children:(0,a.jsx)(E,{})},`skeleton-${t}`))})}):(0,a.jsx)(g.Z,{children:(0,a.jsx)(T.ZP,{container:!0,spacing:3,alignItems:"stretch",children:m.map((e,t)=>{var i;return(0,a.jsx)(T.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,xl:2,sx:{height:{xs:"300px",sm:"auto"}},children:0===t&&o?(0,a.jsx)(_.V,{newTab:!0,title:"Create a character",titleMobile:"Create character",description:"Create a character within 10 minutes.",pagePath:A.eb}):(0,a.jsx)(Z.O,{model:e,isSelected:(null==s?void 0:s.id)===e.id,onSelect:()=>u(e),authorName:(null===(i=e.character)||void 0===i?void 0:i.username)??"",showCreatedTime:d})},e.id)})})}):(0,a.jsx)(N.U,{showChooseFromLibrary:!1,sx:{width:"200px",border:"none",backgroundColor:"transparent",margin:"100px auto"}})}var I=i(52423);function M(e){let{onClose:t,searchKeyword:i,selectedModel:n}=e,{data:r=[],isFetching:s}=(0,I.Lg)();return(0,a.jsx)(U,{models:r,isFetching:s,onClose:t,searchKeyword:i,selectedModel:n,showCreateCard:!1,showCreatedTime:!1})}var R=i(66266),D=i(73335),F=i(45984),V=i(82639),L=i(91415),z=i(57672),O=i(38807),B=i(53971),W=i(56369),$=i(7999),Q=i(19005),G=i(38218),H=i(86660);let X=e=>{let{models:t,onClick:i,searchKeyword:n,selectedModel:r,modelCategories:s}=e,o=(0,H.Z)("up","lg"),{showModal:h}=(0,u.dd)(),m=(0,z.Z)(),p=(0,R.useRouter)(),x=p.pathname,{data:j}=(0,Q.$_)(),b=[],f=[];t.forEach(e=>{let t=(n??"").toLowerCase();if(t&&!e.metadata.name.toLowerCase().includes(t)||s.length>0&&!e.metadata.tags.some(e=>s.includes(e)))return;let{key:i}=e,[a]=(0,G.Bw)(`create.model.${i}`,j),o={...e,has_access:a};a?r.key!==i?b.push(o):b.unshift(o):f.push(o)});let v=[...b,...f],w=async e=>{let t;let a=encodeURIComponent(e.key);t=x.startsWith("/image/bulk")?`/image/bulk/${a}`:x.startsWith("/image")?`/image/create/${a}`:`${x}/${a}`,await p.replace({pathname:t,query:{...(0,O.Z)(p.query,"ai_model")}},void 0,{shallow:!0}),null==i||i(e)},C=()=>{h(B.Z,{type:"openart_subscription"})},_=e=>(0,a.jsx)(d.Z,{variant:"caption",sx:{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:{xs:12}},children:e});return(0,a.jsx)(T.ZP,{container:!0,spacing:3,alignItems:"stretch",children:v.map((e,t)=>{let{key:i,metadata:n,has_access:s,display_key_name:u}=e,{name:h,thumbnail:p,original_link:x,tags:j}=n,b=r.key===i;return(0,a.jsx)(T.ZP,{item:!0,xs:6,sm:4,md:4,lg:3,xl:2,children:(0,a.jsxs)(y.Z,{onClick:()=>s&&w(e),sx:{position:"relative",height:"100%",border:"3px solid",cursor:"pointer",opacity:s?1:.7,transition:m.transitions.create(["border-color","transform"],{duration:m.transitions.duration.short}),borderColor:b?"white":"background.paper","&:hover":{borderColor:s?"white":void 0,transform:s?"scale(1.03)":void 0}},children:[(0,a.jsxs)(l.Z,{direction:"column",sx:{position:"absolute",bottom:0,left:0,right:0,index:1e4,minHeight:{xs:"unset",md:105},backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",display:"flex",p:1},children:[(0,a.jsx)(d.Z,{variant:"body1",fontWeight:"bold",noWrap:!0,sx:{fontSize:{xs:13,md:14}},children:h}),x?"null"!==x?(0,a.jsx)(F.Z,{href:x,target:"_blank",sx:{color:"white","&:hover":{color:"#30ACF2"}},onClick:e=>{e.stopPropagation()},children:_(u&&""!==u?u:i)}):_(u):_("dalle2"===i||"dalle3"===i?"OpenAI":"OpenArt"),(0,a.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(l.Z,{direction:"row",sx:{py:{xs:0,md:1}},spacing:1,children:j?j.map((e,t)=>{let{bgColor:i,color:n}=W.YI[e];return(0,a.jsx)(S.Z,{label:e,size:"small",sx:{backgroundColor:i,color:n,minWidth:"50px"}},`tag-${t}`)}):null}),o?(0,a.jsx)(V.Z,{title:"Discover more pictures!",placement:"top",children:(0,a.jsx)(F.Z,{href:`discovery?ai_model=${i}`,target:"_blank",onClick:e=>{e.stopPropagation()},alignItems:"center",sx:{color:"white","&:hover":{color:"#30ACF2"}},children:(0,a.jsx)(D.Z,{})})}):null]})]}),!s&&(0,a.jsx)(l.Z,{direction:"column",sx:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex"},children:(0,a.jsx)(g.Z,{sx:{opacity:.9,flex:1,backgroundColor:"rgba(0, 0, 0, 0.75)"}})}),!s&&(0,a.jsx)(l.Z,{direction:"column",sx:{position:"absolute",top:0,bottom:0,left:0,right:0},alignItems:"center",justifyContent:"center",children:(0,a.jsx)(c.Z,{size:"small",variant:"outlined",sx:{color:"white",borderColor:"white","&:hover":{color:"primary.main",borderColor:"primary.main"},minWidth:"150px",minHeight:"50px",borderRadius:$.E0},onClick:C,children:"Upgrade"})}),(0,a.jsx)(L.Z,{component:"img",alt:"green iguana",sx:{height:{xs:150,sm:200,md:300,lg:300,xl:350}},image:p,title:h})]})},t)})})};function K(e){let{onClose:t,searchKeyword:i,selectedModel:n}=e,{data:r=[],isFetching:s}=(0,I.M0)();return(0,a.jsx)(U,{models:r,isFetching:s,onClose:t,searchKeyword:i,selectedModel:n,showCreateCard:!0,showCreatedTime:!0})}var q=i(63159),J=i(23063),Y=i(41926),ee=i(65708),et=i(35583),ei=i(71933);let ea=e=>{let t;return"string"==typeof e?t=(0,ei.DY)(new Date(e).getTime()):"object"==typeof e&&e._seconds&&(t=(0,ei.DY)(1e3*e._seconds)),t};function en(e){let{onClick:t,onClose:i,searchKeyword:n,selectedModel:r}=e,{data:s,isFetching:o}=(0,et.DX)(),c=(0,R.useRouter)(),{pathname:u}=c||{},h=o?[]:[{}].concat(s.filter(e=>"completed"===e.status&&e.model_name.includes(n))),m=async e=>{let a;let{training_type:n,id:r}=e;if("fal-ai/flux-lora-fast-training"!==n)return;e.type||(e.type="finetuned");let s=encodeURIComponent(r);a=u.startsWith("/image/bulk")?`/image/bulk/${s}`:u.startsWith("/image")?`/image/create/${s}`:`${u}/${s}`,await c.replace({pathname:a,query:{...(0,O.Z)(c.query,"ai_model")}},void 0,{shallow:!0}),null==t||t(e),(0,J.Z)(i)&&i()},p=e=>{let{model_name:t,object_prompt:i,sample_images:[n]=[],training_mode:s,created_at:o,id:c,training_type:u}=e;return(0,a.jsxs)(y.Z,{onClick:()=>m(e),sx:{position:"relative",height:"100%",border:"2px solid",cursor:"fal-ai/flux-lora-fast-training"===u?"pointer":"default",borderColor:"background.paper",opacity:.7,...r.id===c&&{opacity:1,borderColor:"primary.main"},"&:hover":{opacity:1}},children:["fal-ai/flux-lora-fast-training"!==u&&(0,a.jsx)(l.Z,{direction:"column",sx:{position:"absolute",top:0,bottom:110,left:0,right:0,zIndex:1e4,color:"white",p:1,display:"flex",justifyContent:"center",..."fal-ai/flux-lora-fast-training"!==u&&{backgroundColor:"rgba(0, 0, 0, 0.5)"}},children:(0,a.jsxs)(l.Z,{direction:"row",spacing:1,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(q.Z,{sx:{color:"rgba(255, 255, 255, 0.6)"}}),(0,a.jsx)(d.Z,{variant:"body1",fontWeight:"bold",color:"rgba(255, 255, 255, 0.6)",children:"Deprecated model"})]})}),(0,a.jsx)(l.Z,{direction:"column",sx:{position:"absolute",bottom:0,left:0,right:0,index:1e4,height:"110px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",display:"flex",p:1},children:(0,a.jsxs)(l.Z,{direction:"column",children:[(0,a.jsx)(d.Z,{variant:"body1",fontWeight:"bold",children:t}),(0,a.jsxs)(d.Z,{variant:"caption",children:["Created at: ",ea(o)]}),"object"===s&&(0,a.jsxs)(d.Z,{variant:"caption",children:["Describe: ",i]}),(0,a.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{py:1},spacing:1,children:[(0,a.jsx)(S.Z,{label:s,size:"small",sx:{backgroundColor:W.sD[s].bgColor,color:W.sD[s].color,minWidth:"50px"}}),"fal-ai/flux-lora-fast-training"!==u?(0,a.jsx)(ee.i,{model:e,normalDeleteButton:!1}):null]})]})}),(0,a.jsx)(L.Z,{component:"img",alt:"green iguana",sx:{height:{xs:150,sm:200,md:300,lg:300,xl:350}},image:n,title:t})]})};return(0,a.jsxs)(g.Z,{children:[(0,a.jsx)(Y.Z,{loading:o}),(0,a.jsx)(T.ZP,{container:!0,spacing:3,alignItems:"stretch",children:h.map((e,t)=>(0,a.jsx)(T.ZP,{item:!0,xs:12,sm:4,md:4,lg:3,xl:2,sx:{height:{xs:"300px",sm:"auto"}},children:0===t?(0,a.jsx)(_.V,{newTab:!0}):p(e)},t))})]})}let er=[{label:"Standard",value:"Standard"},{label:"Flux",value:"Flux"},{label:"SDXL",value:"SDXL"},{label:"SD1.5",value:"SD1.5"},{label:"Art",value:"Art"},{label:"Cartoon",value:"Cartoon"},{label:"Anime",value:"Anime"},{label:"Photorealistic",value:"Photorealistic"}];var es=i(81654),eo=i(27806),el=i(85342),ed=i(30872);function ec(e){let{showPrivateModel:t,showPublicModel:i,showCharacterModel:n,isShowSearchModels:r,currentModel:s,defaultTab:o,mode:c,onSwitch:u,onClose:m}=e,{isTeamPlan:p}=(0,ed.V)(),x=(0,H.Z)("up","lg"),[S,y]=(0,h.useState)(()=>o||("finetuned"===s.type?"finetuned":"default")),[C,T]=(0,h.useState)(""),[_,Z]=(0,h.useState)([]),[N,k]=(0,h.useState)("Search All Models"),P=(0,h.useCallback)(e=>{u((0,w.J)({config:e,pageMode:c}))},[u,c]),A=Array.from(new Set(W.cz.flatMap(e=>e.metadata.tags))).map(e=>({label:e,value:e})).filter(e=>!er.some(t=>t.label===e.label)),E=[...er,...A],U=(0,h.useMemo)(()=>"finetuned"===S?(0,a.jsx)(en,{onClose:m,searchKeyword:C??"",onClick:P,selectedModel:s}):"character"===S?(0,a.jsx)(K,{onClose:m,searchKeyword:C??"",selectedModel:s}):"character_library"===S?(0,a.jsx)(M,{onClose:m,searchKeyword:C??"",selectedModel:s}):(0,a.jsx)(X,{models:W.cz,onClick:P,searchKeyword:C,selectedModel:s,modelCategories:_}),[S,P,C,s,_,m]);return(0,a.jsxs)(g.Z,{children:[(0,a.jsxs)(l.Z,{direction:x?"row":"column",justifyContent:x?"space-between":"start",alignItems:"center",children:[(0,a.jsxs)(f.Y,{value:S,onChange:(e,t)=>{y(t),k({character:"Search Characters",character_library:"Search Character Library",finetuned:"Search All Models",default:"Search All Models"}[t]),Z([])},centered:x,variant:x?"standard":"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper",pb:2,width:"100%",maxWidth:"100%",overflowX:"auto"},children:[i?(0,a.jsx)(b.i,{label:"Public Models",value:"default"}):null,t?(0,a.jsx)(b.i,{label:p?"Shared Team Models":"My Trained Models",value:"finetuned"}):null,n?(0,a.jsx)(b.i,{label:p?"Shared Team Characters":"My Characters",value:"character"}):null,n?(0,a.jsx)(b.i,{label:"Character Library",value:"character_library"}):null]}),r||x?(0,a.jsx)(l.Z,{direction:"row",spacing:1,alignItems:"center",children:(0,a.jsx)(j.oH,{sx:{width:300},placeholder:N,onChange:e=>T(e),startAdornment:(0,a.jsx)(eo.BiSearch,{sx:{color:"#fff",mr:1}})})}):null]}),(0,a.jsx)(g.Z,{sx:{mt:2},children:(0,a.jsx)(es.Q,{storageKey:"image_model_list_campagin_banner_closed",campaginFilter:e=>e.filter(e=>el.jR.includes(e.id))})}),x&&"default"===S?(0,a.jsx)(l.Z,{alignItems:"center",direction:"row",children:E?(0,a.jsxs)(l.Z,{alignItems:"center",direction:"row",justifyContent:"center",children:[(0,a.jsx)(d.Z,{variant:"button",display:"block",sx:{fontWeight:"bold",height:"26px"},children:"Category:"}),(0,a.jsx)(v,{options:E,onSelect:e=>{e.length>0?k(`Search Models From ${e}`):k("Search All Models"),Z(e)},isShowChip:x,label:x?"Filter":"",width:"110px",height:"26px"})]}):null}):null,(0,a.jsx)(g.Z,{my:3,children:U})]})}function eu(e){let{showPrivateModel:t,showPublicModel:i,showCharacterModel:n,currentModel:r,defaultTab:s,onSelectModel:o,mode:d,...u}=e,[g,j]=(0,h.useState)(!1),b=(0,H.Z)("up","lg");return(0,a.jsxs)(m.Z,{open:!1,...u,fullScreen:!0,transitionDuration:{enter:300,exit:200},sx:{"& .MuiDialog-paperFullScreen":{margin:0}},children:[(0,a.jsx)(p.Z,{mb:1,sx:{position:"sticky",top:0,zIndex:1e3,backgroundColor:"background.paper"},children:(0,a.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(c.Z,{size:"large",variant:"text",color:"primary",sx:{mb:1},onClick:null==u?void 0:u.onClose,children:[(0,a.jsx)(eo.IcSharpKeyboardBackspace,{size:24,sx:{mr:1}}),"Back"]}),b?null:(0,a.jsx)(c.Z,{size:"large",onClick:()=>{j(!g)},children:(0,a.jsx)(eo.BiSearch,{sx:{color:"#fff",mr:1}})})]})}),(0,a.jsx)(x.Z,{children:(0,a.jsx)(ec,{showCharacterModel:n,showPrivateModel:t,showPublicModel:i,onSwitch:e=>{o(e),u.onClose()},onClose:null==u?void 0:u.onClose,isShowSearchModels:g,currentModel:r,defaultTab:s,mode:d})})]})}var eh=i(87345),em=i(44567);let ep=e=>{let{value:t,config:i,onChange:n,sx:r}=e,{showPrivateModel:s=!0,showPublicModel:o=!0,showCharacterModel:d=!0}=i||{},{showModal:c}=(0,u.dd)(),h=(0,eh.y)(),{metadata:m,currentSelect:p}=t,x=e=>{n(e)};return(0,a.jsx)(l.Z,{className:"switch-model",direction:"row",position:"relative",sx:(0,em.j)({width:"100%",height:{xs:68,sm:58},overflow:"hidden",border:"1px solid #444",borderRadius:$.E0,cursor:"pointer",bgcolor:void 0},r),onClick:e=>{e.stopPropagation(),c(eu,{showCharacterModel:d,showPrivateModel:s,showPublicModel:o,onSelectModel:x,currentModel:p,mode:h})},children:(0,a.jsx)(ex,{metadata:m})})},ex=e=>{let{metadata:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{height:"100%",width:"100%",src:t.thumbnail,alt:"model",style:{objectFit:"cover",objectPosition:"center"}}),(0,a.jsx)(l.Z,{height:"100%",width:"100%",position:"absolute",sx:{backgroundColor:"rgba(0, 0, 0, 0.60)",boxSizing:"border-box",px:{xs:2,md:1}},spacing:.5,children:(0,a.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:.5,width:"100%",height:"100%",children:[(0,a.jsx)(d.Z,{variant:"editor-label1",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",sx:{fontSize:{xs:16,md:12},fontWeight:500},children:t.name}),(0,a.jsx)(eg,{})]})})]})},eg=()=>(0,a.jsx)(c.Z,{size:"small",variant:"outlined",endIcon:(0,a.jsx)(o.Z,{sx:{fontSize:{xs:18,md:16}}}),sx:{ml:"auto!important",fontSize:{xs:16,md:12},fontWeight:600,border:"1px solid rgba(68, 68, 68, 1)",bgcolor:$.LS,color:"white",flexShrink:0},children:"Switch"});var ej=i(11560);let eb=e=>{let{modelKey:t="base_model",bottomElement:i}=e,n=(0,ej.TS)(e=>e.metadata),o=(0,ej.TS)(e=>e.getParameterValue("type")),l=(0,ej.TS)(e=>e.getParameterValue(t)),d=(0,ej.TS)(e=>e.originalConfig.character_creation_id),c=(0,ej.TS)(e=>e.updateActiveModel),u=(0,ej.TS)((0,r.N)(e=>e.getUiState("switch-model.expanded",!0))),h=(0,ej.TS)(e=>e.ensureUiState);return(0,a.jsx)(s.y,{className:"switch-model-accordion",label:"Model or Character",sx:{scrollMarginTop:$.Sw},value:{metadata:n,currentSelect:{type:o,key:l,id:l,character_creation_id:d}},expend:u,onExpendChange:e=>h("switch-model.expanded",e),children:(0,a.jsx)(ef,{value:{metadata:n,currentSelect:{type:o,key:l,id:l,character_creation_id:d}},onChange:c,bottomElement:i})})},ef=e=>{let{value:t,onChange:i,bottomElement:r}=e;return(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(ep,{value:t,onChange:i}),r]})}},23491:function(e,t,i){i.d(t,{d:function(){return b}});var a=i(52676),n=i(75271),r=i(56407),s=i(75542),o=i(27574),l=i(40728),d=i(54323),c=i(97447),u=i(79409),h=i(61314),m=i(11560),p=i(50093),x=i(41781),g=i(37521);let j=[{ratio:"1:1",name:"Square"},{ratio:"16:9",name:"Cinema"},{ratio:"5:4",name:"Art print"},{ratio:"3:2",name:"Landscape"},{ratio:"2:3",name:"Tablet"},{ratio:"4:5",name:"Vertical"},{ratio:"9:16",name:"Portrait"}],b=e=>{let{showAspectRatio:t=!0,showSizeSliders:i=!0,aspectRatioItems:b=j}=e,f=(0,n.useRef)(null),[S]=(0,x.y)({key:"create.config.outputSize"}),v=(0,m.TS)((0,l.N)(e=>e.getParameterValue("type"))),{maxHeight:w,maxWidth:y,minHeight:C,minWidth:T}=p.m[v],_="aspect_ratio",Z="aspect_ratio:tip",N="aspect_ratio:lock",k=(0,m.TS)((0,l.N)(e=>e.getUiState(_,"Default"))),P=(0,m.TS)((0,l.N)(e=>e.getUiState(Z,!1))),A=(0,m.TS)((0,l.N)(e=>e.getUiState(N,!1))),E=(0,m.TS)(e=>e.initUiState),U=(0,m.TS)(e=>e.setUiState);(0,n.useEffect)(()=>{E(_,"Default"),E(Z,!1),E(N,!1)},[]);let I=(0,m.TS)((0,l.N)(e=>e.getParameterValue("height"))),M=(0,m.TS)((0,l.N)(e=>e.getParameterValue("width"))),R=(0,m.TS)(e=>e.setAspectRatio),D=(0,m.TS)(e=>e.setImageSize),F=e=>{if(A&&"Default"!==k){let a=b.find(e=>e.ratio===k);if(a){var t,i;let[n,r]=a.ratio.split(":").map(Number),s=n/r;if("width"in e){let i=Math.min(Math.max(e.width,T),y),a=Math.round(i/s);if(a<C||a>w){null===(t=f.current)||void 0===t||t.animateLockIcon(),D({width:Math.min(Math.max(Math.round((a=Math.min(Math.max(a,C),w))*s),T),y),height:a,maxHeight:w,maxWidth:y,minHeight:C,minWidth:T,keepAspectRatio:!0});return}D({width:i,height:a,maxHeight:w,maxWidth:y,minHeight:C,minWidth:T,keepAspectRatio:!0});return}if("height"in e){let t=Math.min(Math.max(e.height,C),w),a=Math.round(t*s);if(a<T||a>y){null===(i=f.current)||void 0===i||i.animateLockIcon();let e=Math.round((a=Math.min(Math.max(a,T),y))/s);D({width:a,height:Math.min(Math.max(e,C),w),maxHeight:w,maxWidth:y,minHeight:C,minWidth:T,keepAspectRatio:!0});return}D({width:a,height:t,maxHeight:w,maxWidth:y,minHeight:C,minWidth:T,keepAspectRatio:!0});return}}}D({height:I,width:M,...e,maxHeight:w,maxWidth:y,minHeight:C,minWidth:T})};return(0,a.jsxs)(r.Z,{direction:"column",spacing:"4px",children:[t?(0,a.jsx)(c.x,{children:(0,a.jsx)(u.o,{ref:f,aspectRatios:b,value:k,showLock:!0,lock:A,setLock:e=>{U(N,e)},onChange:e=>{let{width:t,height:i}=(0,g.g)(e,y,w,T,C);R({ratio:e,height:i,width:t})},disabled:!S})}):null,i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.x,{showValue:!0,value:M,children:(0,a.jsx)(h.A,{label:"Width",min:T,unit:"px",step:8,max:y,value:M,onChange:e=>F({width:e}),disabled:!S})}),(0,a.jsx)(c.x,{showValue:!0,value:I,children:(0,a.jsx)(h.A,{label:"Height",unit:"px",step:8,min:C,max:w,value:I,onChange:e=>F({height:e}),disabled:!S})})]}):null,(0,a.jsx)(s.Z,{in:P,unmountOnExit:!0,children:(0,a.jsx)(o.Z,{severity:"info",children:"The image may look bad with small sizes."})}),S?null:(0,a.jsx)(d.Y,{feature:"to set custom image size"})]})}},58370:function(e,t,i){i.d(t,{U:function(){return d}});var a=i(52676),n=i(75271),r=i(56407),s=i(40728),o=i(12853),l=i(11560);let d=e=>{let{name:t,value:i}=e,d=`${t}.enable`,c=(0,l.TS)((0,s.N)(e=>e.getUiState(d,!0))),u=(0,l.TS)(e=>e.initUiState),h=(0,l.TS)(e=>e.ensureUiState);return(0,n.useEffect)(()=>{u(d,!0)},[]),(0,n.useMemo)(()=>"string"==typeof i?i:"pose_image"in i&&!!i.pose_image||"image_url"in i&&!!i.image_url||!!Array.isArray(i)&&i.length>0,[i])?(0,a.jsx)(r.Z,{direction:"row",spacing:.5,alignItems:"center",children:(0,a.jsx)(o.r,{checked:c,inputProps:{"aria-label":"ant design"},onChange:e=>{e.stopPropagation(),h(d,e.target.checked)},onClick:e=>{e.stopPropagation()}})}):null}},45840:function(e,t,i){i.d(t,{T:function(){return c}});var a=i(52676),n=i(22988),r=i(77379),s=i(81159),o=i(34061),l=i(27806),d=i(44567);function c(e){let{src:t,children:i,activeText:c,active:u=!1,disabled:h=!1,onClick:m,onDelete:p,sx:x}=e;return(0,a.jsxs)(n.Z,{width:"100%",sx:(0,d.j)({position:"relative","&:hover":{button:{opacity:1},"&::after":{opacity:.3}},"&::after":{content:'""',position:"absolute",inset:0,backgroundColor:"black",opacity:0,transition:e=>e.transitions.create("opacity"),borderRadius:"6px"}},x),children:[p?(0,a.jsx)(s.Z,{title:"Delete the image",icon:l.FaTrash,iconSize:20,sx:{position:"absolute",top:8,right:8,cursor:"pointer"},onClick:()=>{p()}}):null,(0,a.jsx)(o.L6,{src:t,sx:{width:"100%",objectFit:"cover",opacity:u?1:.5,borderRadius:"6px"}}),(0,a.jsx)(r.Z,{disabled:h,variant:u?"outlined":"primary",onClick:m,sx:{width:"max-content",gap:"4px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderRadius:"5px",opacity:u?0:1,zIndex:1,transition:e=>e.transitions.create(["opacity","background-color","border-color"]),...u&&{backgroundColor:"transparent",borderColor:"rgba(255, 255, 255, 0.5)",color:"rgba(255, 255, 255, 0.8)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.8)"}}},children:u?c:i})]})}},26110:function(e,t,i){i.d(t,{U:function(){return x}});var a=i(52676),n=i(22988),r=i(56407),s=i(80110),o=i(77379),l=i(8765),d=i(90117),c=i(6318),u=i(11560),h=i(34061),m=i(24088),p=i(27806);let x=e=>{let{sx:t,showChooseFromLibrary:i=!0}=e,{showModal:x}=(0,l.dd)(),g=(0,u.UK)(e=>e.characters),j=(0,u.UK)(e=>e.handleCharacterChange);return(0,a.jsx)(n.Z,{sx:{border:"1px dashed #0084FF",borderRadius:"4px",background:"rgba(0, 132, 255, 0.10)",p:2,...t},children:(0,a.jsxs)(r.Z,{alignItems:"center",spacing:2,children:[(0,a.jsx)(h.L6,{src:"/_next/static/media/no-characters-icon.4eb7a60e.svg",width:76,height:76,alt:"No characters"}),(0,a.jsx)(s.Z,{variant:"editor-label1",textAlign:"center",sx:{fontSize:"12px",lineHeight:1.2},children:"No characters created yet."}),(0,a.jsxs)(r.Z,{sx:{width:"100%",mt:"16px"},gap:1,children:[(0,a.jsxs)(o.Z,{variant:"primary",LinkComponent:d.r,href:m.eb,target:"_blank",fullWidth:!0,sx:{fontSize:"12px"},children:["Create a character ",(0,a.jsx)(p.PhArrowRightBold,{sx:{ml:.5}})]}),i?(0,a.jsxs)(o.Z,{variant:"secondary",fullWidth:!0,onClick:()=>{x(c.Z,{selected:g,handleSelectModel:j,defaultTab:"character_library"})},sx:{fontSize:"12px"},children:["Choose from Library ",(0,a.jsx)(p.PhCaretRightBold,{sx:{ml:.5}})]}):null]})]})})}},34491:function(e,t,i){i.d(t,{D:function(){return t6},f:function(){return t5}});var a=i(52676),n=i(56407),r=i(23187),s=i(75616),o=i(40728),l=i(36076),d=i(89765),c=i(47976),u=i(38108),h=i(67255),m=i(43246),p=i(22988),x=i(80110),g=i(35523),j=i(43807),b=i(24181),f=i(8765),S=i(82256),v=i(24368),w=i(75271),y=i(90534),C=i(83144),T=i(58684),_=i(76651),Z=i(45984),N=i(97792),k=i(11955),P=i(72660),A=i(45138),E=i(25399),U=i(19509),I=i(43517),M=i(53152),R=i(35570),D=i(77379),F=i(34216),V=i(11560),L=i(13200),z=i(29678),O=i(46973);let B=function(){let{userId:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{status:a}=(0,z.useSession)(),n=async()=>(await O.ZP.get("presets/",{params:t})).data,{data:r,error:s,isFetching:o,status:l}=(0,L.a)(["useUserPresets",e||"",t],n,{enabled:i&&"authenticated"===a});return{data:r,error:s,isFetching:o,status:l}},W=async e=>(await O.ZP.delete("/presets/",{data:e})).data,$=(0,O.py)(W,{}),Q=async e=>(await O.ZP.post("/presets/",{preset_name:e.preset_name,preset_settings:e.preset_settings})).data,G=(0,O.py)(Q,{});var H=i(28989),X=i(16585);let K=async(e,t)=>{let i=document.querySelector(e);if(i)return new Promise(e=>{let a=null;setTimeout(function t(){let n=i.getBoundingClientRect().top;n===a?e(null):(a=n,setTimeout(t,100))},100),i.scrollIntoView({behavior:"smooth",block:t??"nearest"})})},q=e=>{let{onCreateSuccess:t,...i}=e,[s,o]=(0,w.useState)(""),[l,d]=(0,w.useState)(!1),[c,u]=(0,w.useState)(!1),h=(0,V.TS)(e=>e.metadata),m=(0,V.l6)(e=>e.getValues)(),[g]=G(),j={model_id:{showName:"Model",sort:1e3,lock:!0,display:e=>(0,a.jsx)(p.Z,{sx:{color:"primary.main",fontWeight:500},children:h.name})},base_model:{showName:"Model",lock:!0,sort:1e3,display:e=>(0,a.jsx)(p.Z,{sx:{color:"primary.main",fontWeight:500},children:h.name})},prompt:{showName:"Prompt",sort:900,display:e=>(0,a.jsx)(p.Z,{sx:{color:e?"error.main":"text.disabled",fontStyle:"italic"},children:e||"None"})},width:{showName:"Width",sort:800,display:e=>(0,a.jsxs)(p.Z,{sx:{color:"text.secondary"},children:[e,"px"]})},height:{showName:"Height",sort:700,display:e=>(0,a.jsxs)(p.Z,{sx:{color:"text.secondary"},children:[e,"px"]})},cfg_scale:{showName:"CFG Scale",sort:600,display:e=>(0,a.jsx)(p.Z,{sx:{color:"text.secondary"},children:e})},model_weight:{showName:"Model Weight",sort:600,display:e=>(0,a.jsx)(p.Z,{sx:{color:"text.secondary"},children:e})},image_num:{showName:"Number of Images",sort:500,display:e=>(0,a.jsx)(_.Z,{label:`${e} images`,size:"small",variant:"outlined",sx:{height:"20px"}})},image_url:{showName:"Image URL",sort:400,display:e=>e?(0,a.jsx)(Z.Z,{href:e,target:"_blank",sx:{fontSize:"12px",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"View Image"}):(0,a.jsx)(p.Z,{sx:{color:"text.disabled"},children:"None"})},negative_prompt:{showName:"Negative Prompt",sort:300,display:e=>(0,a.jsx)(p.Z,{sx:{color:e?"error.main":"text.disabled",fontStyle:"italic"},children:e||"None"})},prompt_assistant_mode:{showName:"Prompt Assistant Mode",sort:250,display:e=>(0,a.jsx)(_.Z,{label:e,size:"small",color:"off"===e?"default":"primary",sx:{height:"20px"}})},sampler:{showName:"Sampler",sort:200,display:e=>(0,a.jsx)(p.Z,{sx:{color:"text.secondary"},children:e})},steps:{showName:"Steps",sort:100,display:e=>(0,a.jsx)(_.Z,{label:`${e} steps`,size:"small",variant:"outlined",sx:{height:"20px"}})},strength:{showName:"Strength",sort:50,display:e=>(0,a.jsx)(p.Z,{sx:{color:"text.secondary"},children:e.toFixed(2)})},tiling:{showName:"Tiling",sort:40,display:e=>(0,a.jsx)(_.Z,{label:e?"On":"Off",size:"small",color:e?"success":"default",sx:{height:"20px"}})},upscale_mode:{showName:"Upscale Mode",sort:30,display:e=>(0,a.jsx)(p.Z,{sx:{color:e?"text.primary":"text.disabled"},children:e||"None"})},aspect_ratio:{showName:"Aspect Ratio",sort:20,display:e=>(0,a.jsx)(_.Z,{label:e||"Default",size:"small",variant:"outlined",sx:{height:"20px"}})},imageReference:{showName:"Reference Images",sort:10,display:e=>(null==e?void 0:e.length)?(0,a.jsx)(n.Z,{direction:"row",spacing:1,alignItems:"center",children:e.map((e,t)=>(0,a.jsx)(_.Z,{icon:(0,a.jsx)(Z.Z,{href:e.image_url,target:"_blank",children:(0,a.jsx)(y.Z,{sx:{width:16,height:16,color:"inherit","&:hover":{color:"primary.main"},display:"flex",alignItems:"center"}})}),label:e.type.charAt(0).toUpperCase()+e.type.slice(1),size:"small",color:"default",sx:{height:"20px"}},e.type))}):(0,a.jsx)(_.Z,{icon:(0,a.jsx)(y.Z,{sx:{width:16,height:16}}),label:"None",size:"small",variant:"outlined",sx:{height:"20px"}})},controlnet:{showName:"ControlNet",sort:5,display:e=>(0,a.jsx)(n.Z,{direction:"row",spacing:1,alignItems:"center",children:(0,a.jsx)(_.Z,{icon:e.image_url?(0,a.jsx)(Z.Z,{href:e.image_url,target:"_blank",children:(0,a.jsx)(y.Z,{sx:{width:16,height:16,color:"inherit","&:hover":{color:"primary.main"},display:"flex",alignItems:"center"}})}):(0,a.jsx)(C.Z,{sx:{width:16,height:16}}),label:e.model_name?e.model_name.charAt(0).toUpperCase()+e.model_name.slice(1):"None",size:"small",color:"default",sx:{height:"20px"}})})}},[b,f]=(0,w.useState)(Object.keys(m).reduce((e,t)=>(e[t]=!0,e),{})),S=()=>{i.onClose({},"backdropClick")},v=async()=>{try{if(u(!0),""===s.trim()){d(!0),await K(".create-preset-input");return}d(!1);let e=Object.fromEntries(Object.keys(m).filter(e=>e in j&&b[e]).map(e=>[e,m[e]]));await g({preset_name:s,preset_settings:e}),X.B("custom_settings_acted",{action:"created"}),(0,H.t5)("Preset created successfully"),t({preset_name:s,preset_settings:e}),S()}catch(e){console.error("Error creating preset",e)}finally{u(!1)}},L=e=>{f(t=>({...t,[e]:!t[e]}))};return(0,a.jsxs)(N.Z,{...i,sx:{"& .MuiDialog-paper":{maxWidth:660,width:"600px",height:"700px"}},children:[(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(x.Z,{fontSize:"16px",fontWeight:600,children:"Create custom settings"}),(0,a.jsx)(F.h,{dark:!1,onClick:S,sx:{position:"absolute",top:{xs:4,md:10},right:{xs:4,md:10}}})]}),(0,a.jsx)(r.Z,{sx:{width:"100%",height:"1px",backgroundColor:"rgba(68, 68, 68, 0.1)",marginTop:"20px"}}),(0,a.jsxs)(P.Z,{sx:{pt:"24px!important",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,a.jsx)(A.Z,{className:"create-preset-input",label:"Custom settings name",size:"small",value:s,onChange:e=>o(e.target.value),variant:"outlined",fullWidth:!0,required:!0,error:l,helperText:l?"Preset name cannot be empty":"",inputProps:{maxLength:100},InputLabelProps:{sx:{fontSize:"12px",fontWeight:"400"}}}),(0,a.jsx)(r.Z,{sx:{width:"100%",height:"1px",backgroundColor:"rgba(68, 68, 68, 0.1)",marginTop:"20px!important",marginBottom:"20px!important"}}),(0,a.jsx)(x.Z,{fontSize:"14px",fontWeight:600,children:"Settings"}),(0,a.jsx)(x.Z,{fontSize:"12px",fontWeight:400,color:"rgba(153, 153, 153, 1)",sx:{mb:2,mt:2},children:"The following settings will be saved as a template. Select which fields you want saved."}),(0,a.jsx)(E.Z,{children:(0,a.jsx)(U.ZP,{container:!0,spacing:2,children:Object.keys(m).filter(e=>null!=m[e]&&e in j).sort((e,t)=>{let i=j[e].sort;return j[t].sort-i}).filter(e=>m[e]).map(e=>(0,a.jsx)(U.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(n.Z,{direction:"column",sx:{width:"100%"},children:[(0,a.jsx)(I.Z,{sx:{mb:.5,"& .MuiFormControlLabel-label":{fontSize:"14px",fontWeight:500}},control:(0,a.jsx)(M.Z,{checked:b[e],onChange:()=>L(e),disabled:j[e].lock,size:"small"}),label:j[e].showName}),(0,a.jsx)(p.Z,{sx:{height:"36px",bgcolor:"action.hover",borderRadius:1,p:1,display:"flex",alignItems:"center","& > *":{maxWidth:"100%"},"& .MuiBox-root, & .MuiTypography-root":{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4,fontSize:"13px",color:"text.secondary"},"& .MuiChip-root":{maxWidth:"100%",height:"24px"}},children:j[e].display(m[e])})]})},e))})})]}),(0,a.jsxs)(R.Z,{children:[(0,a.jsx)(D.Z,{variant:"outlined",sx:{color:"rgba(153, 153, 153, 1)",fontSize:"12px",fontWeight:"600",borderRadius:"5px"},onClick:S,children:"Cancel"}),(0,a.jsx)(T.Z,{loading:c,variant:"contained",sx:{color:"white",backgroundColor:"rgb(9, 41, 247)",fontSize:"12px",fontWeight:"600",borderRadius:"5px",":hover":{backgroundColor:"rgba(9, 41, 247, 0.8)"}},onClick:async()=>{await v()},children:"Create custom settings"})]})]})};var J=i(97779),Y=i(27806);let ee=e=>{let{id:t,name:i,value:n,icon:r,onClick:s,sx:o,canDelete:l,onDeletePreset:d,isMobile:c}=e;return(0,a.jsxs)(m.Z,{value:n,onClick:s,sx:{"&.Mui-selected":{backgroundColor:"transparent!important"},"&:hover .delete-icon":{display:"block"}},children:[(0,a.jsx)(p.Z,{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",overflow:"hidden",width:"30px",height:"30px",bgcolor:"rgba(68, 68, 68, 1)",sx:{marginRight:"8px"},children:r}),(0,a.jsx)(x.Z,{variant:"editor-label1",fontWeight:500,children:i}),(0,a.jsx)(p.Z,{sx:{flexGrow:1}}),l?(0,a.jsx)(u.default,{"aria-label":`Delete preset "${i}"`,role:"button",tabIndex:0,sx:{color:"gray",display:c?"block":"none",cursor:"pointer",transition:"color 0.3s","&:hover":{color:"red"}},className:"delete-icon",fontSize:"small",onClick:e=>{e.stopPropagation(),d(t)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),d(t))}}):null]})};function et(e){let{isEdited:t,openart_presets_list:i,myPresets:n,isLoadingMyPresets:s,showModal:o,handlerClickPreset:l,onDeletePreset:d,onCreatePresetSuccess:u,currentPreset:f,isMobile:S,isFinetuned:v}=e,w=(null==f?void 0:f.preset_name)||"None";return(0,a.jsx)(p.Z,{sx:{width:"100%"},children:(0,a.jsx)(g.Z,{fullWidth:!0,children:(0,a.jsxs)(j.Z,{id:"presets-select",labelId:"presets-select-label","aria-label":"Custom Settings Presets - Select a preset to apply saved settings",sx:{height:"40px",width:"100%","& .MuiSelect-select":{backgroundColor:"transparent"}},value:w,renderValue:e=>{switch(e){case"None":case"Save current settings":return(0,a.jsx)(x.Z,{variant:"editor-label1",fontWeight:500,children:"None"});default:return e+(t?" *":"")}},children:[(0,a.jsxs)(m.Z,{onClick:e=>{if(X.B("custom_settings_acted",{action:"initiated"}),e.stopPropagation(),v){(0,H.QD)("Private models do not support saving settings.");return}o(q,{onCreateSuccess:u})},sx:{color:"white",backgroundColor:"rgba(9, 41, 247, 1)!important","&:hover":{backgroundColor:"rgba(9, 41, 247, 0.8)!important"},borderRadius:"6px",marginLeft:"3px",marginRight:"3px"},children:[(0,a.jsx)(p.Z,{display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px",bgcolor:"transparent",sx:{marginRight:"8px"},children:(0,a.jsx)(c.Z,{sx:{color:"white"},fontSize:"medium"})}),(0,a.jsx)(x.Z,{variant:"editor-label1",fontWeight:500,children:"Save current settings"})]},"save-current-settings"),(0,a.jsx)(ee,{name:"None",value:"None",icon:(0,a.jsx)(h.Z,{sx:{color:"white"},fontSize:"small"}),onClick:()=>{l()}},"none"),s?[(0,a.jsx)(r.Z,{},"divider-loading"),(0,a.jsx)(x.Z,{variant:"editor-label1",fontWeight:800,sx:{marginLeft:"16px",marginTop:"10px",marginBottom:"5px",cursor:"pointer"},children:"Your settings"},"your-settings-loading"),...Array.from({length:3},(e,t)=>(0,a.jsx)(m.Z,{disabled:!0,children:(0,a.jsxs)(p.Z,{display:"flex",alignItems:"center",width:"100%",sx:{marginBottom:"10px"},children:[(0,a.jsx)(p.Z,{display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px",sx:{marginRight:"8px"},children:(0,a.jsx)(b.Z,{variant:"rectangular",width:20,height:20})}),(0,a.jsx)(b.Z,{variant:"text",width:120,height:20})]})},`skeleton-${t}`))]:[...n.length>0?[(0,a.jsx)(r.Z,{},"divider-my-presets")]:[],...n.length>0?[(0,a.jsx)(x.Z,{variant:"editor-label1",fontWeight:800,sx:{marginLeft:"16px",marginTop:"10px",marginBottom:"5px",cursor:"pointer"},children:"Your settings"},"your-settings")]:[],...n.map(e=>(0,a.jsx)(ee,{id:e.id,name:e.preset_name,value:e.preset_name,icon:(0,a.jsx)(Y.PhFadersHorizontalBold,{size:{xs:20,md:20}}),onClick:()=>{l(e)},canDelete:!0,onDeletePreset:d,sx:{marginBottom:"10px"},isMobile:S},e.id))],(0,a.jsx)(r.Z,{}),(0,a.jsx)(x.Z,{variant:"editor-label1",fontWeight:800,sx:{marginLeft:"16px",marginTop:"10px",marginBottom:"10px",cursor:"pointer"},children:"By OpenArt"}),i.map(e=>(0,a.jsx)(ee,{id:e.id,name:e.preset_name,value:e.preset_name,icon:(0,a.jsx)("img",{src:e.preset_icon,alt:e.preset_name}),onClick:()=>{l(e)},canDelete:!1,isMobile:S},e.preset_name)),(0,a.jsx)("a",{href:"https://openart.ai/style-palettes","aria-label":"View 100+ more style presets - Opens in new tab",style:{color:"#09F",fontSize:"12px",fontWeight:500,marginLeft:"16px",marginTop:"10px",marginBottom:"5px",cursor:"pointer",textDecoration:"none",display:"block"},target:"_blank",onMouseEnter:e=>{e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},onMouseLeave:e=>{e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")},rel:"noreferrer",children:"View 100+ more style presets ->"})]})})})}let ei=e=>{let{openart_presets_list:t}=e,{showModal:i}=(0,f.dd)(),r=(0,s.NL)(),{isMobile:o}=(0,J.j)(),l=(0,V.Bz)(e=>e.currentPreset),d=(0,V.Bz)(e=>e.setPreset),c=(0,V.Bz)(e=>e.presetIsEdit),{data:u,isFetching:h}=B(),[m]=$(),p=(0,v.aT)(),g=async e=>{p.confirm({title:"Warning",content:"Are you sure you want to delete this setting?",iconType:"warning",async onConfirm(){await m({preset_id:e}).then(()=>{e===(null==l?void 0:l.id)&&d(null),r.refetchQueries({queryKey:["useUserPresets"]})})},onCancel(){}})},j={isEdited:c,openart_presets_list:t,myPresets:(null==u?void 0:u.user_presets)??[],showModal:i,handlerClickPreset:d,onDeletePreset:g,onCreatePresetSuccess:e=>{d(e),r.refetchQueries({queryKey:["useUserPresets"]})},currentPreset:l,isMobile:o,isFinetuned:!1,isLoadingMyPresets:h};return(0,a.jsx)(S.U,{className:"switch-model-accordion",defaultExpanded:!0,showExpandIcon:!1,expanded:!0,title:(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:"4px",children:[(0,a.jsx)(Y.PhFadersHorizontalBold,{size:{xs:20,md:16}}),(0,a.jsx)(x.Z,{variant:"editor-h3",children:"Custom Settings"})]}),content:(0,a.jsx)(et,{...j}),tooltip:"Save and manage your own custom settings to quickly reuse your preferred settings like prompts, models, and aspect ratios any time.",sx:{"&::before":{content:"none"}}})};var ea=i(70194),en=i(47717),er=i(93216),es=i(69854),eo=i(12707),el=i(7999);let ed=e=>{let{bottomElement:t,defaultExpanded:i}=e,r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,V.TS)(e=>e.setPrompt),l="prompt.expanded",d=(0,V.TS)((0,o.N)(e=>e.getUiState(l,i))),c=(0,V.TS)(e=>e.initUiState),u=(0,V.TS)(e=>e.ensureUiState),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("prompt_assistant_mode")));return(0,w.useEffect)(()=>{c(l,i)},[]),(0,a.jsx)(es.y,{className:"prompt-accordion-form-item",label:"Prompt",defaultExpanded:!0,value:r,sx:{scrollMarginTop:el.Sw},tooltip:(0,a.jsxs)(er.k5,{children:["The description of what you want to see in the image.",(0,a.jsx)("br",{}),"For more details see the",(0,a.jsx)(er.Tb,{text:" Prompt Book ",href:"/promptbook"}),".",(0,a.jsx)("br",{}),"Non-English prompts are automatically translated to English when you create."]}),expend:d,onExpendChange:e=>u(l,e),children:(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(eo.zT,{value:r,onChange:s,dealWithDisplayPrompt:e=>e,autoEnhance:h,onAutoEnhanceChange:m}),t]})})};var ec=i(45468),eu=i(34514),eh=i(79446),em=i(57671),ep=i(48867),ex=i(19005),eg=i(4629);let ej=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),{mutateAsync:n,isLoading:r}=(0,em.iT)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries([ex.uE]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])};return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),imageNum:m,onChangeImageNum:p,showEstimatedTime:!0,cost:eu.o.dalle,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var eb=i(54323),ef=i(65500),eS=i(97447);let ev=e=>{let{value:t,onChange:i}=e,n="23px",r=`calc(${n} * 1)`,[s,o]=(0,w.useState)(r);return(0,w.useEffect)(()=>{o("unset")},[]),(0,a.jsx)(A.Z,{InputProps:{slotProps:{input:{sx:{lineHeight:n,minHeight:r,maxHeight:s}}}},sx:{marginTop:1,"& > .MuiInputBase-multiline":{p:"10px 12px"}},size:"small",multiline:!0,fullWidth:!0,value:t,onChange:e=>i(e.target.value)})};var ew=i(62336),ey=i(91109),eC=i(61314),eT=i(36015),e_=i(90747);let eZ=e=>(0,a.jsx)(eS.x,{label:"Have a Seed",tooltip:"A number that determines the initial noise. The same seed usually generates a similar style.",extra:(0,a.jsx)(e_.dp,{...e}),children:(0,a.jsx)(e_.Y_,{...e})});var eN=i(89655),ek=i(16391),eP=i(70794),eA=i(12853);let eE=e=>{let{name:t,value:i}=e,r=`${t}.enable`,s=(0,V.TS)((0,o.N)(e=>e.getUiState(r,!0))),l=(0,V.TS)(e=>e.initUiState),d=(0,V.TS)(e=>e.setFluxDevReferenceEnable);return(0,w.useEffect)(()=>{l(r,!0)},[]),("string"==typeof i?i:Array.isArray(i)?i.length>0:"image_url"in i&&i.image_url)?(0,a.jsx)(n.Z,{direction:"row",spacing:.5,alignItems:"center",children:(0,a.jsx)(eA.r,{checked:s,inputProps:{"aria-label":"ant design"},onChange:e=>{e.stopPropagation(),d(r,e.target.checked)},onClick:e=>{e.stopPropagation()}})}):null};var eU=i(54023),eI=i(50093);let eM={display:"flex",flexDirection:"column",justifyContent:"space-between"},eR=e=>{let t=(0,V.TS)((0,o.N)(e=>e.getParameterValue("type"))),i=(0,V.TS)((0,o.N)(e=>e.getParameterValue("imageReference"))),n=(0,V.TS)(e=>e.setFluxDevReference),r=(0,V.TS)(e=>e.ensureUiState),s=(0,V.TS)((0,o.N)(e=>e.getUiState("imageReference.subject.expanded",!1))),l=(0,V.TS)((0,o.N)(e=>e.getUiState("imageReference.pose.expanded",!1))),d=(0,V.TS)((0,o.N)(e=>e.getUiState("imageReference.composition.expanded",!1))),c=(0,V.TS)((0,o.N)(e=>e.getUiState("imageReference.sketch.expanded",!1)));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eP.m,{className:"image-reference-subject-accordion-item",startIcon:Y.CustomSubjectReferenceOutline,label:"Subject/Face Reference",isNew:!0,value:i.getTypeValue("subject"),expend:s,onExpendChange:e=>r("imageReference.subject.expanded",e),extra:(0,a.jsx)(eE,{name:"imageReference.subject",value:i.getTypeValue("subject")}),sx:eM,children:(0,a.jsx)(ek.L,{hideInfluenceStrength:!0,banner:"Subject Reference",value:i.getTypeValue("subject"),onChange:e=>n({data:e,...eI.m[t]})})}),(0,a.jsx)(eP.m,{className:"image-reference-pose-accordion-item",startIcon:Y.PhPersonSimpleWalk,label:"Pose Reference",value:i.getTypeValue("pose"),extra:(0,a.jsx)(eE,{name:"imageReference.pose",value:i.getTypeValue("pose")}),sx:eM,expend:l,onExpendChange:e=>r("imageReference.pose.expanded",e),children:(0,a.jsx)(eU.V,{value:i.getTypeValue("pose"),onChange:e=>n({data:e,...eI.m[t]})})}),(0,a.jsx)(eP.m,{className:"image-reference-composition-accordion-item",startIcon:Y.PhCubeFocus,label:"Composition Reference",value:i.getTypeValue("composition"),expend:d,onExpendChange:e=>r("imageReference.composition.expanded",e),extra:(0,a.jsx)(eE,{name:"imageReference.composition",value:i.getTypeValue("composition")}),sx:eM,children:(0,a.jsx)(ek.L,{banner:"Composition Reference",value:i.getTypeValue("composition"),onChange:e=>n({data:e,...eI.m[t]})})}),(0,a.jsx)(eP.m,{startIcon:Y.PhFrameCorners,className:"image-reference-sketch-accordion-item",label:"Sketch Reference",value:i.getTypeValue("sketch"),extra:(0,a.jsx)(eE,{name:"imageReference.sketch",value:i.getTypeValue("sketch")}),expend:c,onExpendChange:e=>r("imageReference.sketch.expanded",e),sx:eM,children:(0,a.jsx)(ek.L,{banner:"Sketch Reference",value:i.getTypeValue("sketch"),onChange:e=>n({data:e,...eI.m[t]})})})]})};var eD=i(21718),eF=i(23491),eV=i(65019),eL=i(41781);let ez=e=>{let[t]=(0,eL.y)({key:"create.config.upscaleMode.x2"}),i=(0,V.TS)((0,o.N)(e=>e.getParameterValue("upscale_mode"))),n=(0,V.TS)(e=>e.setUpscaleMode),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("height"))),s=(0,V.TS)((0,o.N)(e=>e.getParameterValue("width"))),l=(0,V.TS)((0,o.N)(e=>e.getParameterValue("image_url")));return(0,a.jsx)(eS.x,{children:(0,a.jsx)(eV.S,{value:i,onChange:e=>n(e),haveImageUrl:!!l,height:r,width:s,disabled:!t,...(null==e?void 0:e.UpscaleAEnhanceProps)??{}})})};var eO=i(99608),eB=i(22735),eW=i(78331);let e$=()=>{let e=(0,eh.B)(),t=(0,ep.k)(),[i,n]=(0,eW.L)(),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,ec.NA)(r).prompt,d=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),c=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),u=(0,V.TS)(e=>e.getValues),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),p=(0,V.TS)(e=>e.computedImageNumInputDisable()),x=(0,V.TS)(e=>e.key),g=async()=>{let e=u();await i(e)};return(0,a.jsx)(l.X,{className:"create-config-button",disable:!!t&&d(),imageNum:h,imageInputDisabled:p,onChangeImageNum:m,maxImageNumForFreeUser:4,showEstimatedTime:!0,estimatedTimeModel:x,cost:c,loading:n,onSubmit:()=>{e({onAuthenticated:g,additionalParams:{prompt:s}})},sx:{padding:{xs:"16px",md:"10px"}}})};var eQ=i(58370),eG=i(28774);let eH=()=>{let e=(0,eh.B)(),t=(0,ep.k)(),[i,n]=(0,eW.L)(),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),d=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),c=(0,V.TS)(e=>e.getValues),[u,h]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,V.TS)(e=>e.computedImageNumInputDisable()),p=(0,V.TS)(e=>e.key),x=(0,V.TS)(e=>e.featureKeys),g=async()=>{let e=c();await i(e)};return(0,a.jsx)(l.X,{className:"create-config-button",disable:!!t&&s(),maxImageNumForFreeUser:4,imageNum:u,imageNumberMax:4,imageInputDisabled:m,onChangeImageNum:h,showEstimatedTime:!0,estimatedTimeModel:p,cost:d,loading:n,featureKeys:x,onSubmit:()=>{e({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},eX={display:"flex",flexDirection:"column",justifyContent:"space-between"},eK=()=>{let e=(0,eh.B)(),t=(0,ep.k)(),[i,n]=(0,eW.L)(),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),d=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),c=(0,V.TS)(e=>e.getValues),[u,h]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,V.TS)(e=>e.computedImageNumInputDisable()),p=(0,V.TS)(e=>e.key),x=async()=>{let e=c();await i(e)};return(0,a.jsx)(l.X,{className:"create-config-button",disable:!!t&&s(),maxImageNumForFreeUser:4,imageNum:u,imageNumberMax:4,imageInputDisabled:m,onChangeImageNum:h,showEstimatedTime:!0,estimatedTimeModel:p,cost:d,loading:n,onSubmit:()=>{e({onAuthenticated:x,additionalParams:{prompt:(0,ec.NA)(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var eq=i(65801),eJ=i(66266),eY=i(27574),e0=i(38807),e1=i(87946);let e2=[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"1024x1024",title:"Square (1024\xd71024)",subtitle:"1:1 ratio"},{value:"1536x1024",title:"Landscape (1536\xd71024)",subtitle:"3:2 ratio"},{value:"1024x1536",title:"Portrait (1024\xd71536)",subtitle:"2:3 ratio"}],e4={"1024x1024":{width:1024,height:1024},"1536x1024":{width:1536,height:1024},"1024x1536":{width:1024,height:1536},auto:{width:1024,height:1024}},e6=e=>{let{width:t,height:i}=e,r=t/i;return(0,a.jsx)(n.Z,{justifyContent:"center",alignItems:"center",sx:{width:18,height:18,mr:1},children:(0,a.jsx)(p.Z,{sx:{boxSizing:"border-box",border:"2px solid white",width:r>1?"100%":`${18*r}px`,height:r>1?`${18/r}px`:"100%"}})})},e5=e=>{let{predefinedSizes:t=e2,sizeMappings:i=e4,showTitle:r=!0,delimiter:s="x",title:l}=e,[d]=(0,eL.y)({key:"create.config.outputSize"}),[c,u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio")));return(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:1,children:[r?(0,a.jsx)(x.Z,{variant:"editor-label1",whiteSpace:"nowrap",children:l||"Size"}):null,(0,a.jsx)(j.Z,{size:"small",disabled:!d,value:c,onChange:e=>{d&&u(e.target.value)},sx:{my:1,width:"100%"},children:t.map(e=>{let t=i[e.value];if(!t){let[i,a]=e.value.split(s).map(Number);t={width:i,height:a}}let r=t&&t.width&&t.height;return(0,a.jsx)(m.Z,{value:e.value,children:(0,a.jsxs)(n.Z,{width:"100%",direction:"row",alignItems:"center",children:[r?(0,a.jsx)(e6,{width:t.width,height:t.height}):null,(0,a.jsx)(x.Z,{variant:"editor-span1",children:e.title})]})},e.value)})})]}),d?null:(0,a.jsx)(eb.Y,{feature:"to set image size"})]})};var e3=i(15830),e7=i(56369),e8=i(64748);let e9={display:"flex",flexDirection:"column",justifyContent:"space-between"},te=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),b=(0,V.TS)(e=>e.computedImageNumInputDisable());return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),imageNum:m,imageInputDisabled:b,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tt={display:"flex",flexDirection:"column",justifyContent:"space-between"},ti=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=(0,V.TS)(e=>e.featureKeys),j=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},b=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),f=(0,V.TS)(e=>e.computedImageNumInputDisable());return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),imageNum:m,imageInputDisabled:f,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:p,showEstimatedTime:!0,cost:b,loading:r,featureKeys:g,onSubmit:()=>{t({onAuthenticated:j,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},ta=()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState),s="advance-settings-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!1)),d="image-guidance-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!0));(0,w.useEffect)(()=>{i(e,!0)},[]);let[u]=(0,eL.y)({key:"create.config.imageGuidance"}),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),p=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),x=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),g=(0,V.TS)(e=>e.setSteps),j=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),b=(0,V.TS)(e=>e.setSeed),f=(0,eJ.useRouter)(),S=(0,V.TS)(e=>e.updateActiveModel),v=async e=>{e.preventDefault();try{let e=await (0,e7.jE)("Flux_dev");if(e){let t=(0,e1.J)({pageMode:e3.V.CREATE,config:e});S(t)}setTimeout(()=>{f.replace({query:{...(0,e0.Z)(f.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>i(d,e),title:"Image Guidance",tooltip:eT.$,content:u?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:e8.Z,label:"Omni Reference",value:h,expend:p,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:h}),sx:tt,children:(0,a.jsxs)(n.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(eG.f,{value:h,onChange:m,sx:{p:1}}),(0,a.jsx)(eY.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"/image/chat",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, select"," ",(0,a.jsx)("a",{href:"/image/create/Flux_dev",style:{textDecoration:"underline",cursor:"pointer"},onClick:v,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(e5,{delimiter:":",predefinedSizes:[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"1:1",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"16:9",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"5:4",title:"Art Print (5:4)",subtitle:"5:4 ratio"},{value:"4:3",title:"Classic (4:3)",subtitle:"4:3 ratio"},{value:"3:2",title:"Photo (3:2)",subtitle:"3:2 ratio"},{value:"2:3",title:"Book (2:3)",subtitle:"2:3 ratio"},{value:"3:4",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"4:5",title:"Vertical (4:5)",subtitle:"4:5 ratio"},{value:"9:16",title:"Mobile (9:16)",subtitle:"9:16 ratio"},{value:"21:9",title:"Ultrawide (21:9)",subtitle:"21:9 ratio"},{value:"16:21",title:"Tall (16:21)",subtitle:"16:21 ratio"}]})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:j,onChange:b}),(0,a.jsx)(eN.O,{min:1,max:150,value:x,onChange:g}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(ti,{})]})]})},tn=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),b=(0,V.TS)(e=>e.computedImageNumInputDisable());return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),imageNum:m,imageInputDisabled:b,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var tr=i(79349);let ts=e=>{let{value:t,onChange:i}=e;return(0,a.jsx)(tr.i,{leftValue:!0,leftLabel:"On",rightValue:!1,rightLabel:"Off",value:t,onChange:i})},to=()=>{let[e,t]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("prompt_upsampling")));return(0,a.jsx)(eS.x,{label:"Prompt Optimizer",tooltip:(0,a.jsx)(er.k5,{children:"Enable prompt optimizer to enhance generation creativity. Avoid using with already enhanced prompts, as this may produce unpredictable results."}),children:(0,a.jsx)(ts,{value:e,onChange:t})})},tl=()=>{let e=(0,eh.B)(),t=(0,ep.k)(),[i,n]=(0,eW.L)(),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),d=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),c=(0,V.TS)(e=>e.getValues),[u,h]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,V.TS)(e=>e.key),p=async()=>{let e=c();await i(e)};return(0,a.jsx)(l.X,{maxImageNumForFreeUser:4,className:"create-config-button",disable:!!t&&s(),imageNum:u,imageNumberMax:4,onChangeImageNum:h,showEstimatedTime:!0,estimatedTimeModel:m,cost:d,loading:n,onSubmit:()=>{e({onAuthenticated:p,additionalParams:{prompt:(0,ec.NA)(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var td=i(37838);let tc=e=>{let{enableEnhance:t=["face","anime"]}=e,[i]=(0,eL.y)({key:"create.config.upscaleMode.x2"}),n=(0,V.TS)((0,o.N)(e=>e.getParameterValue("upscale_mode"))),r=(0,V.TS)(e=>e.setUpscaleMode),s=(0,V.TS)((0,o.N)(e=>e.getParameterValue("height"))),l=(0,V.TS)((0,o.N)(e=>e.getParameterValue("width")));return(0,a.jsx)(eS.x,{children:(0,a.jsx)(eV.S,{value:n,onChange:e=>r(e),haveImageUrl:!1,height:s,width:l,disabled:!i,enableEnhance:t})})},tu=[{value:"low",title:"Low",subtitle:"Faster generation with lower quality"},{value:"medium",title:"Medium",subtitle:"Balanced quality and speed"},{value:"high",title:"High",subtitle:"Higher quality with slower generation"}],th=e=>{let{qualityOptions:t=tu,featureKey:i="create.config.outputSize",showTitle:r=!0}=e,[s]=(0,eL.y)({key:i}),[l,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("quality",{processFeatureKey:(e,t)=>({...e,quality:[`create.config.quality.${t}`]})})));return(0,w.useEffect)(()=>{d(l)},[]),(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:1,children:[r?(0,a.jsx)(x.Z,{variant:"editor-label1",whiteSpace:"nowrap",children:"Quality"}):null,(0,a.jsx)(j.Z,{size:"small",disabled:!s,value:l||"auto",onChange:e=>{s&&d(e.target.value)},sx:{my:1,width:"100%"},children:t.map(e=>(0,a.jsx)(m.Z,{value:e.value,children:(0,a.jsx)(n.Z,{width:"100%",direction:"row",alignItems:"center",children:(0,a.jsx)(x.Z,{variant:"editor-span1",children:e.title})})},e.value))})]}),s?null:(0,a.jsx)(eb.Y,{feature:"to set quality"})]})},tm={display:"flex",flexDirection:"column",justifyContent:"space-between"},tp=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tx=e=>{let{options:t}=e,[i,r]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("mode")));return(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,a.jsx)(x.Z,{variant:"editor-label1",whiteSpace:"nowrap",children:"Mode"}),(0,a.jsx)(j.Z,{size:"small",value:i,onChange:e=>{r(e.target.value)},sx:{my:1,width:"100%"},children:t.map(e=>(0,a.jsx)(m.Z,{value:e.value,children:(0,a.jsx)(n.Z,{width:"100%",direction:"row",alignItems:"center",children:(0,a.jsx)(x.Z,{variant:"editor-span1",children:e.title})})},e.value))})]})})},tg=[{value:"HiDream_I1_Full",title:"Full"},{value:"HiDream_I1_Dev",title:"Dev"},{value:"HiDream_I1_Fast",title:"Fast"}],tj=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),b=(0,V.TS)(e=>e.computedImageNumInputDisable());return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),imageNum:m,imageNumberMax:4,maxImageNumForFreeUser:4,imageInputDisabled:b,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tb=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=(0,V.TS)(e=>e.featureKeys),j=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},b=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:b,loading:r,featureKeys:g,onSubmit:()=>{t({onAuthenticated:j,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tf=[{value:"auto",title:"Auto (Default)"},{value:"1:1",title:"Square (1:1)"},{value:"3:4",title:"Portrait (3:4)"},{value:"4:3",title:"landscape (4:3)"},{value:"9:16",title:"Portrait (9:16)"},{value:"16:9",title:"landscape (16:9)"}],tS={auto:{width:1024,height:1024},"1:1":{width:1024,height:1024},"3:4":{width:896,height:1152},"4:3":{width:1152,height:896},"9:16":{width:768,height:1280},"16:9":{width:1280,height:768}},tv=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tw=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},ty=[{value:"1:1",title:"1:1"},{value:"9:16",title:"9:16"},{value:"16:9",title:"16:9"},{value:"3:4",title:"3:4"},{value:"4:3",title:"4:3"}],tC={"1:1":{width:1024,height:1024},"9:16":{width:1024,height:1920},"16:9":{width:1920,height:1080},"3:4":{width:1024,height:1365},"4:3":{width:1365,height:1024}};var tT=i(48689);let t_={display:"flex",flexDirection:"column",justifyContent:"space-between"},tZ=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=(0,V.TS)(e=>e.featureKeys),j=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},b=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:b,loading:r,featureKeys:g,onSubmit:()=>{t({onAuthenticated:j,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tN={display:"flex",flexDirection:"column",justifyContent:"space-between"},tk=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=(0,V.TS)(e=>e.featureKeys),j=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},b=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:b,loading:r,featureKeys:g,onSubmit:()=>{t({onAuthenticated:j,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tP=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),imageNum:m,imageNumberMax:4,maxImageNumForFreeUser:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tA=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),b=(0,V.TS)(e=>e.computedImageNumInputDisable());return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),imageNum:m,imageNumberMax:4,maxImageNumForFreeUser:4,imageInputDisabled:b,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tE={display:"flex",flexDirection:"column",justifyContent:"space-between"},tU=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tI=[{value:"1:1",title:"Square (1:1)"},{value:"3:4",title:"Vertical (3:4)"},{value:"4:3",title:"Horizontal (4:3)"},{value:"16:9",title:"Widescreen (16:9)"},{value:"9:16",title:"Tall (9:16)"},{value:"2:3",title:"Slim (2:3)"},{value:"3:2",title:"Wide (3:2)"}],tM=()=>{let e=(0,eh.B)(),t=(0,ep.k)(),[i,n]=(0,eW.L)(),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),d=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),c=(0,V.TS)(e=>e.getValues),[u,h]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),m=(0,V.TS)(e=>e.key),p=async()=>{let e=c();await i(e)};return(0,a.jsx)(l.X,{className:"create-config-button",disable:!!t&&s(),maxImageNumForFreeUser:4,imageNum:u,onChangeImageNum:h,showEstimatedTime:!0,estimatedTimeModel:m,cost:d,loading:n,onSubmit:()=>{e({onAuthenticated:p,additionalParams:{prompt:(0,ec.NA)(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var tR=i(65323),tD=i(67430),tF=i(36741),tV=i(78118),tL=i(56295);let tz=()=>{let e=(0,eh.B)(),t=(0,ep.k)(),[i,n]=(0,eW.L)(),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,V.TS)((0,o.N)(e=>e.computedImageReferenceNum())),d=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,V.TS)(e=>e.getValues),h=(0,V.TS)(e=>e.computedImageNumInputDisable()),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let e=u();await i(e)};return(0,a.jsx)(l.X,{className:"create-config-button",disable:!!t&&c(),imageNum:m,imageInputDisabled:h,onChangeImageNum:p,maxImageNumForFreeUser:4,showEstimatedTime:!0,estimatedTimeModel:x,cost:d,loading:n,extraInfoAboveButton:(0,a.jsx)(tL.R,{children:s>=2?(0,a.jsx)(eY.Z,{severity:"warning",children:"Pro Tip: For best results, limit your image guidance to 2."}):null}),onSubmit:()=>{e({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})};var tO=i(33045),tB=i(39200);let tW=()=>{let e=(0,eh.B)(),t=(0,ep.k)(),[i,n]=(0,eW.L)(),r=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),s=(0,V.TS)((0,o.N)(e=>e.computedImageReferenceNum())),d=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),c=(0,V.TS)((0,o.N)(e=>e.computedImageCost())),u=(0,V.TS)(e=>e.getValues),h=(0,V.TS)(e=>e.key),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.computedImageNumInputDisable()),g=async()=>{let e=u();await i(e)};return(0,a.jsx)(l.X,{className:"create-config-button",disable:!!t&&d(),imageNum:m,imageInputDisabled:x,onChangeImageNum:p,maxImageNumForFreeUser:4,extraInfoAboveButton:(0,a.jsx)(tL.R,{children:s>=2?(0,a.jsx)(eY.Z,{severity:"warning",children:"Pro Tip: For best results, limit your image guidance to 2."}):null}),showEstimatedTime:!0,estimatedTimeModel:h,cost:c,loading:n,onSubmit:()=>{e({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(r).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},t$={display:"flex",flexDirection:"column",justifyContent:"space-between"},tQ=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},j=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:j,loading:r,onSubmit:()=>{t({onAuthenticated:g,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tG=[{value:"1024x1024",title:"Square (1:1)"},{value:"864x1152",title:"Vertical (3:4)"},{value:"1152x864",title:"Horizontal (4:3)"},{value:"1280x720",title:"Widescreen (16:9)"},{value:"720x1280",title:"Tall (9:16)"},{value:"832x1248",title:"Slim (2:3)"},{value:"1248x832",title:"Wide (3:2)"},{value:"1512x648",title:"Cinematic (21:9)"}],tH={adaptive:{width:1024,height:1024},"1024x1024":{width:1024,height:1024},"864x1152":{width:864,height:1152},"1152x864":{width:1152,height:864},"1280x720":{width:1280,height:720},"720x1280":{width:720,height:1280},"832x1248":{width:832,height:1248},"1248x832":{width:1248,height:832},"1512x648":{width:1512,height:648}},tX={display:"flex",flexDirection:"column",justifyContent:"space-between"},tK=()=>{let e=(0,s.NL)(),t=(0,eh.B)(),{data:i}=(0,ex.$_)(),[n,r]=(0,eW.L)(),d=(0,V.TS)((0,o.N)(e=>e.getParameterValue("prompt"))),c=(0,V.TS)((0,o.N)(e=>e.computedCreateDisableFn)),u=(0,ep.k)(),h=(0,V.TS)(e=>e.getValues),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_num"))),x=(0,V.TS)(e=>e.key),g=(0,V.TS)(e=>e.featureKeys),j=async()=>{let t=h();await n(t),await e.invalidateQueries(["useMyProfile"]),await e.refetchQueries(["useGenerationHistories",i.id,{types:eg.QP}])},b=(0,V.TS)((0,o.N)(e=>e.computedImageCost()));return(0,a.jsx)(l.X,{className:"create-config-button",estimatedTimeModel:x,disable:!!u&&c(),maxImageNumForFreeUser:4,imageNum:m,imageNumberMax:4,onChangeImageNum:p,showEstimatedTime:!0,cost:b,loading:r,featureKeys:g,onSubmit:()=>{t({onAuthenticated:j,additionalParams:{prompt:(0,ec.NA)(d).prompt}})},sx:{padding:{xs:"16px",md:"10px"}}})},tq=[{value:"1:1",title:"Square (1:1)"},{value:"3:4",title:"Vertical (3:4)"},{value:"4:3",title:"Horizontal (4:3)"},{value:"16:9",title:"Widescreen (16:9)"},{value:"9:16",title:"Tall (9:16)"},{value:"2:3",title:"Slim (2:3)"},{value:"3:2",title:"Wide (3:2)"},{value:"21:9",title:"Cinematic (21:9)"}],tJ={adaptive:{width:1,height:1}};var tY=i(81878);let t0={[tY.u.GPT_IMAGE_1]:()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState),s="advance-settings-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!1)),d="image-guidance-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!0));(0,w.useEffect)(()=>{i(e,!0)},[]);let[u]=(0,eL.y)({key:"create.config.imageGuidance"}),h=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),x=(0,eJ.useRouter)(),g=(0,V.TS)(e=>e.updateActiveModel),j=async e=>{e.preventDefault();try{let e=await (0,e7.jE)("Flux_dev");if(e){let t=(0,e1.J)({pageMode:e3.V.CREATE,config:e});g(t)}setTimeout(()=>{x.replace({query:{...(0,e0.Z)(x.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>i(d,e),title:"Image Guidance",tooltip:eT.$,content:u?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:e8.Z,label:"Omni Reference",value:m,expend:h,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:m}),sx:tm,children:(0,a.jsxs)(n.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(eG.f,{value:m,onChange:p,sx:{p:1}}),(0,a.jsx)(eY.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"/image/chat",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, sele ct"," ",(0,a.jsx)("a",{href:"/image/create/Flux_dev",style:{textDecoration:"underline",cursor:"pointer"},onClick:j,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(e5,{}),(0,a.jsx)(th,{})]})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ez,{UpscaleAEnhanceProps:{showOutputSizeText:!1,enableEnhance:[]}})})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tp,{})]})]})},[tY.u.BYTEPLUS_SEEDREAM_3]:()=>{let e="advanceSettings",[t,i]=(0,V.TS)((0,o.N)(t=>[t.getUiState(e,!1),t.setUiState])),s="outputSizeKey",l=(0,V.TS)(e=>e.getUiState(s,!1));(0,w.useEffect)(()=>{i(s,!0)},[]);let d="image-guidance-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!0)),[u]=(0,eL.y)({key:"create.config.imageGuidance"}),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),p=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),x=(0,eJ.useRouter)(),g=(0,V.TS)(e=>e.updateActiveModel),j=async e=>{e.preventDefault();try{let e=await (0,e7.jE)("Flux_dev");if(e){let t=(0,e1.J)({pageMode:e3.V.CREATE,config:e});g(t)}setTimeout(()=>{x.replace({query:{...(0,e0.Z)(x.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}},[,b]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[f,S]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("steps"))),v=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.enable",!0)));(0,w.useEffect)(()=>{h.some(Boolean)&&v?(b("adaptive"),S(5.5)):(b("1152x864"),S(2.5))},[h,v,b]);let y=(0,w.useMemo)(()=>h.some(Boolean)&&v?[{value:"adaptive",title:"Auto"}]:tG,[h,v]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>i(d,e),title:"Image Guidance",tooltip:eT.$,content:u?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:Y.CustomSubjectReferenceOutline,label:"Omni Reference",value:h,expend:p,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:h}),sx:t$,children:(0,a.jsxs)(n.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(eG.f,{value:h,onChange:m,sx:{p:1}}),(0,a.jsx)(eY.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"/image/chat",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, select"," ",(0,a.jsx)("a",{style:{textDecoration:"underline",cursor:"pointer"},onClick:j,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Output Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(e5,{predefinedSizes:y,sizeMappings:tH})})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eN.O,{value:f,onChange:S,stepProps:{max:10,min:1,label:"Guidance Scale",stepTipText:"Controls the influence of text descriptions versus input images on the generated result. Range: 1–10 (float). Higher values increase the effect of text descriptions and decrease the effect of input images."}}),(0,a.jsx)(ez,{})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tQ,{})]})]})},[tY.u.BYTEPLUS_SEEDREAM_4]:()=>{let[,e]=(0,V.TS)((0,o.N)(e=>[e.getUiState("advanceSettings",!1),e.setUiState])),t="outputSizeKey",i=(0,V.TS)(e=>e.getUiState(t,!1)),[s,l]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("resolution"))),d="image-guidance-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!0)),[u]=(0,eL.y)({key:"create.config.imageGuidance"}),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),p=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),g=(0,w.useMemo)(()=>[{value:"adaptive",title:"Auto"},...tq],[]),j=async e=>{let t,i;if(e.width&&e.height)t=e.width,i=e.height;else try{let a=await b(e.imageUrl);t=a.width,i=a.height}catch(e){throw console.error(e),Error("Failed to detect image dimensions")}let a=t/i;if(t+i<=14)throw Error("Image dimensions are too small");if(a<1/3||a>3)throw Error("Invalid image ratio. It must be between 1:3 and 3:1.");return!0},b=(0,w.useCallback)(e=>new Promise((t,i)=>{let a=new Image,n=setTimeout(()=>{i(Error("Image loading timeout"))},1e4);a.addEventListener("load",()=>{clearTimeout(n),t({width:a.naturalWidth,height:a.naturalHeight})}),a.addEventListener("error",()=>{clearTimeout(n),i(Error("Failed to load image"))}),a.crossOrigin="anonymous",a.src=e}),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:c,onClick:t=>e(d,t),title:"Image Guidance",tooltip:eT.$,content:u?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:Y.CustomSubjectReferenceOutline,label:"Omni Reference",value:h,expend:p,onExpendChange:t=>e("image_urls.expanded",t),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:h}),sx:tX,children:(0,a.jsx)(n.Z,{direction:"column",spacing:2,children:(0,a.jsx)(eG.f,{value:h,onChange:m,sx:{p:1},maxImages:10,checker:j})})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:i,onClick:i=>e(t,i),title:"Output Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"8px",children:[(0,a.jsx)(e5,{title:"Aspect Ratio",delimiter:":",predefinedSizes:g,sizeMappings:tJ}),(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Resolution"}),(0,a.jsx)(n.Z,{sx:{flex:1},children:(0,a.jsx)(tT.t,{id:"QualityMode",options:[{value:"1K",label:"1K"},{value:"2K",label:"2K"},{value:"4K",label:"4K"}],value:s,onChange:e=>{l(e)}})})]})})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tK,{})]})]})},[tY.u.IMAGEN3]:()=>{let e="advanceSettings",[t,i]=(0,V.TS)((0,o.N)(t=>[t.getUiState(e,!1),t.setUiState])),s="outputSizeKey",l=(0,V.TS)(e=>e.getUiState(s,!1));return(0,w.useEffect)(()=>{i(s,!0)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Output Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(e5,{predefinedSizes:ty,sizeMappings:tC})})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ez,{UpscaleAEnhanceProps:{showOutputSizeText:!1,enableEnhance:[]}})})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tw,{})]})]})},[tY.u.DALLE3]:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(d.Z,{showDalleCreditsInfo:!0,isDALL:!0}),(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(ej,{})]})]}),[tY.u.FLUX]:()=>{let{isMobile:e}=(0,J.j)(),t=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),i=(0,V.TS)(e=>e.setSteps),s="output-size-accordion.expanded",l=(0,V.TS)(t=>t.getUiState(s,!e)),d="advance-settings-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!1)),u=(0,V.TS)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>u(s,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>u(d,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eN.O,{min:1,max:20,value:t,onChange:i}),(0,a.jsx)(tc,{enableEnhance:[]})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tl,{})]})]})},[tY.u.FLUX_DEV]:()=>{let{isMobile:e}=(0,J.j)(),[t]=(0,eL.y)({key:"create.config.imageGuidance"}),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),l=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),d=(0,V.TS)(e=>e.setSteps),c=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),u=(0,V.TS)(e=>e.setSeed),h=(0,V.TS)(e=>e.getParameterValue("base_model")),m=eq.GC.find(e=>e.key===h),p=(null==m?void 0:m.defaultValues.imageReference.length)>0,g=(0,V.TS)((0,o.N)(e=>e.getUiState("imageReference.subject.enable",!1))),j=(0,w.useMemo)(()=>({max:50,min:1}),[g]),b=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),f=(0,V.TS)(e=>e.ensureUiState),S="image-guidance-accordion.expanded",v=(0,V.TS)(e=>e.getUiState(S,!0)),y="output-size-accordion.expanded",C=(0,V.TS)(t=>t.getUiState(y,!e)),T="advance-settings-accordion.expanded",_=(0,V.TS)(e=>e.getUiState(T,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:b,onClick:e=>f("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsx)(n.Z,{spacing:1,children:(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:i,onChange:s,min:1,max:20})})})})}),(0,a.jsx)(eO.Q,{expanded:v,onClick:e=>f(S,e),title:"Image Guidance",tooltip:eT.$,content:t?(0,a.jsxs)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(eD.o,{}),p?(0,a.jsx)(eR,{}):null]}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:C,onClick:e=>f(y,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:_,onClick:e=>f(T,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:c,onChange:u}),(0,a.jsx)(eN.O,{min:1,max:50,value:l,...j,onChange:d}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(eK,{})]})]})},[tY.u.FLUX_REALISM]:()=>{let{isMobile:e}=(0,J.j)(),[t]=(0,eL.y)({key:"create.config.imageGuidance"}),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),l=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),d=(0,V.TS)(e=>e.setSteps),c=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),u=(0,V.TS)(e=>e.ensureUiState),h="image-guidance-accordion.expanded",m=(0,V.TS)(e=>e.getUiState(h,!0)),p="output-size-accordion.expanded",g=(0,V.TS)(t=>t.getUiState(p,!e)),j="advance-settings-accordion.expanded",b=(0,V.TS)(e=>e.getUiState(j,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:c,onClick:e=>u("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsx)(n.Z,{spacing:1,children:(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:i,onChange:s,min:0,max:20})})})})}),(0,a.jsx)(eO.Q,{expanded:m,onClick:e=>u(h,e),title:"Image Guidance",tooltip:eT.$,content:t?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eD.o,{})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:g,onClick:e=>u(p,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:b,onClick:e=>u(j,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eN.O,{min:1,max:50,value:l,onChange:d}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tl,{})]})]})},[tY.u.FLUX_PRO]:()=>{let{isMobile:e}=(0,J.j)(),[t]=(0,td.jC)(),i=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),s=(0,V.TS)(e=>e.setSeed),l=(0,V.TS)(e=>e.ensureUiState),d="advance-settings-accordion.expanded",c=(0,V.TS)(t=>t.getUiState(d,!e)),u="output-size-accordion.expanded",h=(0,V.TS)(e=>e.getUiState(u,!0));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(to,{})}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>l(d,e),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(eZ,{value:i,onChange:s})})}),(0,a.jsx)(eO.Q,{expanded:h,onClick:e=>l(u,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(r.Z,{}),(0,a.jsxs)(eY.Z,{severity:"info",sx:{m:1},children:["Want more control like img2img, composition/style/face reference? Try out"," ",(0,a.jsx)(Z.Z,{component:"a",onClick:()=>{t({base_model:"Flux_dev",parameters:{}})},sx:{cursor:"pointer",textDecoration:"underline"},children:"Flux dev"})," or ",(0,a.jsx)(Z.Z,{onClick:()=>{t({base_model:"openart/OpenArt_SDXL",parameters:{}})},sx:{cursor:"pointer",textDecoration:"underline"},children:"Openart SDXL"})]})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tl,{})]})]})},[tY.u.FLUX_KONTEXT_MAX]:ta,[tY.u.FLUX_KONTEXT]:ta,[tY.u.FLUX_KONTEXT_DEV]:()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState),s="advance-settings-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!1)),d="image-guidance-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!0)),[,u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),p=(0,w.useMemo)(()=>h.some(Boolean)?[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"1:1",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"16:9",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"5:4",title:"Art Print (5:4)",subtitle:"5:4 ratio"},{value:"4:3",title:"Classic (4:3)",subtitle:"4:3 ratio"},{value:"3:2",title:"Photo (3:2)",subtitle:"3:2 ratio"},{value:"2:3",title:"Book (2:3)",subtitle:"2:3 ratio"},{value:"3:4",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"4:5",title:"Vertical (4:5)",subtitle:"4:5 ratio"},{value:"9:16",title:"Mobile (9:16)",subtitle:"9:16 ratio"},{value:"21:9",title:"Ultrawide (21:9)",subtitle:"21:9 ratio"}]:[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"square_hd",title:"Square HD (1:1)",subtitle:"16:9 ratio"},{value:"portrait_4_3",title:"Portrait (4:3)",subtitle:"4:3 ratio"},{value:"portrait_16_9",title:"Portrait (9:16)",subtitle:"16:9 ratio"},{value:"landscape_16_9",title:"Landscape (16:9)",subtitle:"16:9 ratio"}],[h]),x=(0,w.useMemo)(()=>({square:{width:1024,height:1024},square_hd:{width:1024,height:1024},portrait_4_3:{width:768,height:1024},portrait_16_9:{width:576,height:1024},landscape_16_9:{width:1024,height:576}}),[]);(0,w.useEffect)(()=>{i(e,!0)},[]),(0,w.useEffect)(()=>{h.some(Boolean)?u("4:3"):u("portrait_4_3")},[h,u]);let[g]=(0,eL.y)({key:"create.config.imageGuidance"}),j=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),b=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),f=(0,V.TS)(e=>e.setSteps),S=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),v=(0,V.TS)(e=>e.setSeed),y=(0,eJ.useRouter)(),C=(0,V.TS)(e=>e.updateActiveModel),T=async e=>{e.preventDefault();try{let e=await (0,e7.jE)("Flux_dev");if(e){let t=(0,e1.J)({pageMode:e3.V.CREATE,config:e});C(t)}setTimeout(()=>{y.replace({query:{...(0,e0.Z)(y.query,"finetuned_model"),ai_model:"Flux_dev"}},void 0,{shallow:!0})},200)}catch(e){console.error("Failed to switch to Flux_dev model:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>i(d,e),title:"Image Guidance",tooltip:eT.$,content:g?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:e8.Z,label:"Omni Reference",value:h,expend:j,onExpendChange:e=>i("image_urls.expanded",e),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:h}),sx:e9,children:(0,a.jsxs)(n.Z,{direction:"column",spacing:2,children:[(0,a.jsx)(eG.f,{value:h,onChange:m,sx:{p:1}}),(0,a.jsx)(eY.Z,{severity:"info",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"https://openart.ai/fluxkontextbook",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Learn more"})," ","how to use Omni reference. To iteratively edit, use"," ",(0,a.jsx)("a",{href:"/image/chat",target:"_blank",style:{textDecoration:"underline"},rel:"noreferrer",children:"Chat to Edit"}),". For classic img2img, select"," ",(0,a.jsx)("a",{href:"/image/create/Flux_dev",style:{textDecoration:"underline",cursor:"pointer"},onClick:T,children:"Flux dev"}),"."]})})]})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(e5,{delimiter:":",predefinedSizes:p,sizeMappings:x})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:S,onChange:v}),(0,a.jsx)(eN.O,{min:1,max:150,value:b,onChange:f}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(te,{})]})]})},[tY.u.FLUX2]:()=>{let{isMobile:e}=(0,J.j)(),[t]=(0,eL.y)({key:"create.config.imageGuidance"}),i=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),s=(0,V.TS)(e=>e.setSeed),l=(0,V.TS)(e=>e.ensureUiState),d="image-guidance-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!0)),u="output-size-accordion.expanded",h=(0,V.TS)(t=>t.getUiState(u,!e)),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),x=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),g="advance-settings-accordion.expanded",j=(0,V.TS)(e=>e.getUiState(g,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>l(d,e),title:"Image Guidance",tooltip:eT.$,content:t?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:Y.CustomSubjectReferenceOutline,label:"Omni Reference",value:m,expend:x,onExpendChange:e=>l("image_urls.expanded",e),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:m}),sx:eX,children:(0,a.jsx)(n.Z,{direction:"column",spacing:2,children:(0,a.jsx)(eG.f,{value:m,onChange:p,sx:{p:1}})})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:h,onClick:e=>l(u,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:j,onClick:e=>l(g,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:i,onChange:s}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(eH,{})]})]})},[tY.u.KOLORS]:()=>{let{isMobile:e}=(0,J.j)(),[t]=(0,eL.y)({key:"create.config.imageGuidance"}),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[l,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),c=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),u=(0,V.TS)(e=>e.setSteps),h=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),m=(0,V.TS)(e=>e.ensureUiState),p="image-guidance-accordion.expanded",g=(0,V.TS)(e=>e.getUiState(p,!0)),j="output-size-accordion.expanded",b=(0,V.TS)(t=>t.getUiState(j,!e)),f="advance-settings-accordion.expanded",S=(0,V.TS)(e=>e.getUiState(f,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:h,onClick:e=>m("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:i,onChange:s}),children:(0,a.jsx)(ew.K,{value:i,onChange:s})}),(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:l,onChange:d,min:2,max:10})})]})})}),(0,a.jsx)(eO.Q,{expanded:g,onClick:e=>m(p,e),title:"Image Guidance",tooltip:eT.$,content:t?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eD.o,{})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:S,onClick:e=>m(f,e),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(eN.O,{max:70,min:10,value:c,onChange:u})})}),(0,a.jsx)(eO.Q,{expanded:b,onClick:e=>m(j,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(eK,{})]})]})},[tY.u.SD3]:()=>{let{isMobile:e}=(0,J.j)(),[t]=(0,eL.y)({key:"create.config.imageGuidance"}),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[l,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),c=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),u=(0,V.TS)(e=>e.setSteps),h=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),m=(0,V.TS)(e=>e.ensureUiState),p="image-guidance-accordion.expanded",g=(0,V.TS)(e=>e.getUiState(p,!0)),j="output-size-accordion.expanded",b=(0,V.TS)(t=>t.getUiState(j,!e)),f="advance-settings-accordion.expanded",S=(0,V.TS)(e=>e.getUiState(f,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:h,onClick:e=>m("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:i,onChange:s}),children:(0,a.jsx)(ew.K,{value:i,onChange:s})}),(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:l,onChange:d})})]})})}),(0,a.jsx)(eO.Q,{expanded:g,onClick:e=>m(p,e),title:"Image Guidance",tooltip:eT.$,content:t?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eD.o,{})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:b,onClick:e=>m(j,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:S,onClick:e=>m(f,e),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(eN.O,{min:10,max:50,value:c,onChange:u})})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tM,{})]})]})},[tY.u.SD35]:()=>{let{isMobile:e}=(0,J.j)(),[t]=(0,eL.y)({key:"create.config.imageGuidance"}),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),l=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),d=(0,V.TS)(e=>e.setSteps),c=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),u=(0,V.TS)(e=>e.ensureUiState),h="image-guidance-accordion.expanded",m=(0,V.TS)(e=>e.getUiState(h,!0)),p="output-size-accordion.expanded",g=(0,V.TS)(t=>t.getUiState(p,!e)),j="advance-settings-accordion.expanded",b=(0,V.TS)(e=>e.getUiState(j,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:c,onClick:e=>u("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsx)(n.Z,{spacing:1,children:(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:i,onChange:s}),children:(0,a.jsx)(ew.K,{value:i,onChange:s})})})})}),(0,a.jsx)(eO.Q,{expanded:m,onClick:e=>u(h,e),className:"image-guidance-accordion",title:"Image Guidance",tooltip:eT.$,content:t?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eD.o,{})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:g,onClick:e=>u(p,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:b,onClick:e=>u(j,e),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(eN.O,{min:1,max:12,value:l,onChange:d})})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tM,{})]})]})},[tY.u.FINETUNED]:()=>{let[e]=(0,eL.y)({key:"create.config.imageGuidance"}),{isMobile:t}=(0,J.j)(),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("model_weight"))),[l,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("object_prompt"))),[c,u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),p=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),g=(0,V.TS)(e=>e.setSteps),j=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),b=(0,V.TS)(e=>e.setSeed),f=(0,V.TS)(e=>"face"!==e.originalConfig.training_mode),S=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),v=(0,V.TS)(e=>e.ensureUiState),w="image-guidance-accordion.expanded",y=(0,V.TS)(e=>e.getUiState(w,!0)),C="output-size-accordion.expanded",T=(0,V.TS)(e=>e.getUiState(C,!t)),_="advance-settings-accordion.expanded",Z=(0,V.TS)(e=>e.getUiState(_,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{modelKey:"model_id",bottomElement:(0,a.jsxs)(n.Z,{spacing:2,children:[(0,a.jsx)(eS.x,{label:"Weight",showValue:!0,value:i,children:(0,a.jsx)(eC.A,{label:"Weight",value:i,onChange:s,min:0,max:1.5,step:.01,unit:"",disabled:!e})}),f?(0,a.jsx)(eS.x,{label:"Character description",tooltip:"This is the model’s guiding description. You may adjust it according to your needs. It’s usually best to keep it short and focused, like “impressionist painting,” or ”cyberpunk digital art.”",children:(0,a.jsx)(ev,{value:l,onChange:d})}):null]})}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:S,onClick:e=>v("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:c,onChange:u}),children:(0,a.jsx)(ew.K,{value:c,onChange:u})}),(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:h,onChange:m,max:20,min:2,step:1})})]})})}),(0,a.jsx)(eO.Q,{expanded:y,onClick:e=>v(w,e),title:"Image Guidance",tooltip:eT.$,content:e?(0,a.jsxs)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(eD.o,{}),(0,a.jsx)(eR,{})]}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:T,onClick:e=>v(C,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:Z,onClick:e=>v(_,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:j,onChange:b}),(0,a.jsx)(eN.O,{min:1,max:50,value:p,onChange:g}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(e$,{})]})]})},[tY.u.SDXL]:()=>{let[e]=(0,eL.y)({key:"create.config.imageGuidance"}),{isMobile:t}=(0,J.j)(),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[l,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),[c,u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("tiling"))),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("sampler"))),p=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),g=(0,V.TS)(e=>e.setSteps),j=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),b=(0,V.TS)(e=>e.setSeed),f=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),S="image-guidance-accordion.expanded",v=(0,V.TS)(e=>e.getUiState(S,!0)),w="output-size-accordion.expanded",y=(0,V.TS)(e=>e.getUiState(w,!t)),C="advance-settings-accordion.expanded",T=(0,V.TS)(e=>e.getUiState(C,!1)),_=(0,V.TS)(e=>e.ensureUiState);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:f,onClick:e=>_("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:i,onChange:s}),children:(0,a.jsx)(ew.K,{value:i,onChange:s})}),(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:l,onChange:d})})]})})}),(0,a.jsx)(eO.Q,{expanded:v,onClick:e=>_(S,e),className:"image-guidance-accordion",title:"Image Guidance",tooltip:eT.$,content:e?(0,a.jsxs)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(eD.o,{}),(0,a.jsx)(tV.d,{}),(0,a.jsx)(tF.s,{options:tO._4})]}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:y,onClick:e=>_(w,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:T,onClick:e=>_(C,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eS.x,{label:"Tiling",tooltip:"Enable seamless tiling for the generated image.",children:(0,a.jsx)(tD.K,{value:c,onChange:u})}),(0,a.jsx)(eS.x,{label:"Sampler",tooltip:"The denoising algorithm used to generate the image. Different samplers can be good at generating different images.",children:(0,a.jsx)(tR.Z,{value:h,onChange:m,options:tB.l.map(e=>({value:e,label:e}))})}),(0,a.jsx)(eZ,{value:j,onChange:b}),(0,a.jsx)(eN.O,{min:10,max:70,value:p,onChange:g}),(0,a.jsx)(ez,{})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tW,{})]})]})},[tY.u.SD15]:()=>{let[e]=(0,eL.y)({key:"create.config.imageGuidance"}),{isMobile:t}=(0,J.j)(),[i,s]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[l,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),[c,u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("tiling"))),[h,m]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("sampler"))),p=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),g=(0,V.TS)(e=>e.setSteps),j=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),b=(0,V.TS)(e=>e.setSeed),f=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),S=(0,V.TS)(e=>e.ensureUiState),v="image-guidance-accordion.expanded",w=(0,V.TS)(e=>e.getUiState(v,!0)),y="output-size-accordion.expanded",C=(0,V.TS)(e=>e.getUiState(y,!t)),T="advance-settings-accordion.expanded",_=(0,V.TS)(e=>e.getUiState(T,!1));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:f,onClick:e=>S("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:i,onChange:s}),children:(0,a.jsx)(ew.K,{value:i,onChange:s})}),(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:l,onChange:d})})]})})}),(0,a.jsx)(eO.Q,{expanded:w,onClick:e=>S(v,e),title:"Image Guidance",tooltip:eT.$,content:e?(0,a.jsxs)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:[(0,a.jsx)(eD.o,{}),(0,a.jsx)(tV.d,{}),(0,a.jsx)(tF.s,{options:tO.Ki})]}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:C,onClick:e=>S(y,e),title:"Output Size",content:(0,a.jsx)(eF.d,{})}),(0,a.jsx)(eO.Q,{expanded:_,onClick:e=>S(T,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eS.x,{children:(0,a.jsx)(tD.K,{value:c,onChange:u})}),(0,a.jsx)(eS.x,{label:"Sampler",tooltip:"The denoising algorithm used to generate the image. Different samplers can be good at generating different images.",children:(0,a.jsx)(tR.Z,{value:h,onChange:m,options:tB.l.map(e=>({value:e,label:e}))})}),(0,a.jsx)(eZ,{value:j,onChange:b}),(0,a.jsx)(eN.O,{min:10,max:70,value:p,onChange:g}),(0,a.jsx)(ez,{})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tz,{})]})]})},[tY.u.QWEN_IMAGE]:()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState);(0,w.useEffect)(()=>{i(e,!0)},[i]);let s="advance-settings-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!1)),[,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("width"))),[,c]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("height"))),[u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),h=(0,w.useMemo)(()=>({square:{width:1024,height:1024},ultra_wide:{width:1536,height:640},wide:{width:1344,height:768},standard:{width:1152,height:896},classic:{width:1280,height:832},classic_portrait:{width:832,height:1280},standard_portrait:{width:896,height:1152},tall_portrait:{width:768,height:1344},ultra_tall:{width:640,height:1536}}),[]);(0,w.useEffect)(()=>{let e=h[u];e&&(d(e.width),c(e.height))},[u,d,c,h]);let m=(0,w.useMemo)(()=>[{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"ultra_wide",title:"Ultra-Wide (21:9)",subtitle:"21:9 ratio"},{value:"wide",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"standard",title:"Standard (4:3)",subtitle:"4:3 ratio"},{value:"classic",title:"Classic (3:2)",subtitle:"3:2 ratio"},{value:"classic_portrait",title:"Classic-Portrait (2:3)",subtitle:"2:3 ratio"},{value:"standard_portrait",title:"Standard-Portrait (3:4)",subtitle:"3:4 ratio"},{value:"tall_portrait",title:"Tall-Portrait (9:16)",subtitle:"9:16 ratio"},{value:"ultra_tall",title:"Ultra-Tall (9:21)",subtitle:"9:21 ratio"}],[]),p=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),x=(0,V.TS)(e=>e.setSteps),g=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),j=(0,V.TS)(e=>e.setSeed);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(e5,{delimiter:":",predefinedSizes:m,sizeMappings:h})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:g,onChange:j}),(0,a.jsx)(eN.O,{min:1,max:150,value:p,onChange:x}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tA,{})]})]})},[tY.u.HI_DREAM_I1]:()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState);(0,w.useEffect)(()=>{i(e,!0)},[i]);let s="advance-settings-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!1)),[,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("width"))),[,c]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("height"))),[u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),h=(0,w.useMemo)(()=>({square:{width:1024,height:1024},ultra_wide:{width:1536,height:640},wide:{width:1344,height:768},standard:{width:1152,height:896},classic:{width:1280,height:832},classic_portrait:{width:832,height:1280},standard_portrait:{width:896,height:1152},tall_portrait:{width:768,height:1344},ultra_tall:{width:640,height:1536}}),[]);(0,w.useEffect)(()=>{let e=h[u];e&&(d(e.width),c(e.height))},[u,d,c,h]);let m=(0,w.useMemo)(()=>[{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"ultra_wide",title:"Ultra-Wide (21:9)",subtitle:"21:9 ratio"},{value:"wide",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"standard",title:"Standard (4:3)",subtitle:"4:3 ratio"},{value:"classic",title:"Classic (3:2)",subtitle:"3:2 ratio"},{value:"classic_portrait",title:"Classic-Portrait (2:3)",subtitle:"2:3 ratio"},{value:"standard_portrait",title:"Standard-Portrait (3:4)",subtitle:"3:4 ratio"},{value:"tall_portrait",title:"Tall-Portrait (9:16)",subtitle:"9:16 ratio"},{value:"ultra_tall",title:"Ultra-Tall (9:21)",subtitle:"9:21 ratio"}],[]),p=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),x=(0,V.TS)(e=>e.setSteps),g=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),j=(0,V.TS)(e=>e.setSeed),[,b]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),[f]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("mode")));return(0,w.useEffect)(()=>{"HiDream_I1_Dev"===f?(x(28),b(1)):"HiDream_I1_Fast"===f?(x(16),b(1)):(x(50),b(3))},[f,x,b]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(e5,{delimiter:":",predefinedSizes:m,sizeMappings:h})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(tx,{options:tg}),(0,a.jsx)(eZ,{value:g,onChange:j}),(0,a.jsx)(eN.O,{min:1,max:150,value:p,onChange:x}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tj,{})]})]})},[tY.u.FLUX_KREA]:()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState),s="advance-settings-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!1)),d="image-guidance-accordion.expanded",c=(0,V.TS)(e=>e.getUiState(d,!0)),[,u]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),h=(0,V.TS)((0,o.N)(e=>e.getParameterValue("imageReference")));(0,V.TS)(e=>e.setFluxDevReference),(0,V.TS)((0,o.N)(e=>e.getParameterValue("type")));let m=(0,w.useMemo)(()=>{let e=h.getTypeValue("subject");return e&&e.image_url?[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"}]:[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"square",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"square_hd",title:"Square HD (1:1)",subtitle:"1:1 ratio"},{value:"portrait_4_3",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"portrait_16_9",title:"Portrait (9:16)",subtitle:"9:16 ratio"},{value:"landscape_16_9",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"landscape_4_3",title:"Landscape (4:3)",subtitle:"4:3 ratio"}]},[h]),p=(0,w.useMemo)(()=>({auto:{width:1024,height:1024},square:{width:1024,height:1024},square_hd:{width:1024,height:1024},portrait_4_3:{width:768,height:1024},portrait_16_9:{width:576,height:1024},landscape_16_9:{width:1024,height:576},landscape_4_3:{width:1024,height:768}}),[]);(0,w.useEffect)(()=>{i(e,!0)},[]),(0,w.useEffect)(()=>{let e=h.getTypeValue("subject");e&&e.image_url?u("auto"):u("landscape_4_3")},[h,u]);let[x]=(0,eL.y)({key:"create.config.imageGuidance"});(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0)));let g=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),j=(0,V.TS)(e=>e.setSteps),b=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),f=(0,V.TS)(e=>e.setSeed);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:c,onClick:e=>i(d,e),title:"Image Guidance",tooltip:eT.$,content:x?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eD.o,{})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(e5,{delimiter:":",predefinedSizes:m,sizeMappings:p})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:b,onChange:f}),(0,a.jsx)(eN.O,{min:1,max:150,value:g,onChange:j}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tn,{})]})]})},[tY.u.OPENART_PHOTOREALISTIC]:()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState);(0,w.useEffect)(()=>{i(e,!0)},[i]);let[s]=(0,eL.y)({key:"create.config.imageGuidance"}),[,l]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("width"))),[,d]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("height"))),[c]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),u="image-guidance-accordion.expanded",h=(0,V.TS)(e=>e.getUiState(u,!0)),m=(0,w.useMemo)(()=>({"SDXL - 1:1 square 1024x1024":{width:1024,height:1024},"SDXL - 3:4 portrait 896x1152":{width:896,height:1152},"SDXL - 5:8 portrait 832x1216":{width:832,height:1216},"SDXL - 9:16 portrait 768x1344":{width:768,height:1344},"SDXL - 9:21 portrait 640x1536":{width:640,height:1536},"SDXL - 4:3 landscape 1152x896":{width:1152,height:896},"SDXL - 3:2 landscape 1216x832":{width:1216,height:832},"SDXL - 16:9 landscape 1344x768":{width:1344,height:768},"SDXL - 21:9 landscape 1536x640":{width:1536,height:640}}),[]);(0,w.useEffect)(()=>{let e=m[c];e&&(l(e.width),d(e.height))},[c,l,d,m]);let p=(0,w.useMemo)(()=>[{value:"SDXL - 1:1 square 1024x1024",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"SDXL - 3:4 portrait 896x1152",title:"Vertical (3:4)",subtitle:"3:4 ratio"},{value:"SDXL - 5:8 portrait 832x1216",title:"Portrait (5:8)",subtitle:"5:8 ratio"},{value:"SDXL - 9:16 portrait 768x1344",title:"Tall (9:16)",subtitle:"9:16 ratio"},{value:"SDXL - 9:21 portrait 640x1536",title:"Ultra-Tall (9:21)",subtitle:"9:21 ratio"},{value:"SDXL - 4:3 landscape 1152x896",title:"Horizontal (4:3)",subtitle:"4:3 ratio"},{value:"SDXL - 3:2 landscape 1216x832",title:"Horizontal (3:2)",subtitle:"3:2 ratio"},{value:"SDXL - 16:9 landscape 1344x768",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"SDXL - 21:9 landscape 1536x640",title:"Ultra-Wide (21:9)",subtitle:"21:9 ratio"}],[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:h,onClick:e=>i(u,e),title:"Image Guidance",tooltip:eT.$,content:s?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eD.o,{})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Size",content:(0,a.jsx)(e5,{delimiter:":",predefinedSizes:p,sizeMappings:m})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tP,{})]})]})},[tY.u.NANO_BANANA]:()=>{let e=(0,V.TS)(e=>e.ensureUiState),t="advance-settings-accordion.expanded",i=(0,V.TS)(e=>e.getUiState(t,!1)),s="image-guidance-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!0)),d="outputSizeKey",c=(0,V.TS)(e=>e.getUiState(d,!0)),[u]=(0,eL.y)({key:"create.config.imageGuidance"}),h=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),[m,p]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls")));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{sx:{overflowX:"hidden !important"},children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:l,onClick:t=>e(s,t),title:"Image Guidance",tooltip:eT.$,content:u?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:e8.Z,label:"Omni Reference",value:m,expend:h,onExpendChange:t=>e("image_urls.expanded",t),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:m}),sx:tN,children:(0,a.jsx)(n.Z,{direction:"column",spacing:2,children:(0,a.jsx)(eG.f,{value:m,onChange:p,sx:{p:1}})})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:c,onClick:t=>e(d,t),title:"Output Size",content:(0,a.jsx)(e5,{delimiter:":",predefinedSizes:[{value:"auto",title:"Auto (Default)",subtitle:"Let the model decide the best size"},{value:"1:1",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"16:9",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"5:4",title:"Art Print (5:4)",subtitle:"5:4 ratio"},{value:"4:3",title:"Classic (4:3)",subtitle:"4:3 ratio"},{value:"3:2",title:"Photo (3:2)",subtitle:"3:2 ratio"},{value:"2:3",title:"Book (2:3)",subtitle:"2:3 ratio"},{value:"3:4",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"4:5",title:"Vertical (4:5)",subtitle:"4:5 ratio"},{value:"9:16",title:"Mobile (9:16)",subtitle:"9:16 ratio"},{value:"21:9",title:"Ultrawide (21:9)",subtitle:"21:9 ratio"}]})}),(0,a.jsx)(eO.Q,{expanded:i,onClick:i=>e(t,i),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ez,{UpscaleAEnhanceProps:{showOutputSizeText:!1,enableEnhance:[]}})})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tk,{})]})]})},[tY.u.NANO_BANANA_2]:()=>{let e=(0,V.TS)(e=>e.setFeatureKeys),t=(0,V.TS)(e=>e.ensureUiState),i="advance-settings-accordion.expanded",s=(0,V.TS)(e=>e.getUiState(i,!1)),l="image-guidance-accordion.expanded",d=(0,V.TS)(e=>e.getUiState(l,!0)),c="outputSizeKey",u=(0,V.TS)(e=>e.getUiState(c,!0)),[h]=(0,eL.y)({key:"create.config.imageGuidance"}),m=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),[p,g]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),[j,b]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("resolution"))),[f,S]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("upscale_mode")));(0,w.useEffect)(()=>{("2K"===j||"4K"===j)&&S(new eV.E(1))},[j,S]),(0,w.useEffect)(()=>{"4K"===j?e("modal",["create.model.nano-banana-2.4k"]):e("modal",["create.model.nano-banana-2"])},[j,e]);let v="1K"===j;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:d,onClick:e=>t(l,e),title:"Image Guidance",tooltip:eT.$,content:h?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:e8.Z,label:"Omni Reference",value:p,expend:m,onExpendChange:e=>t("image_urls.expanded",e),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:p}),sx:t_,children:(0,a.jsx)(n.Z,{direction:"column",spacing:2,children:(0,a.jsx)(eG.f,{value:p,onChange:g,sx:{p:1}})})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:u,onClick:e=>t(c,e),title:"Output Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"8px",children:[(0,a.jsx)(e5,{delimiter:":",predefinedSizes:[{value:"1:1",title:"Square (1:1)",subtitle:"1:1 ratio"},{value:"16:9",title:"Widescreen (16:9)",subtitle:"16:9 ratio"},{value:"5:4",title:"Art Print (5:4)",subtitle:"5:4 ratio"},{value:"4:3",title:"Classic (4:3)",subtitle:"4:3 ratio"},{value:"3:2",title:"Photo (3:2)",subtitle:"3:2 ratio"},{value:"2:3",title:"Book (2:3)",subtitle:"2:3 ratio"},{value:"3:4",title:"Portrait (3:4)",subtitle:"3:4 ratio"},{value:"4:5",title:"Vertical (4:5)",subtitle:"4:5 ratio"},{value:"9:16",title:"Mobile (9:16)",subtitle:"9:16 ratio"},{value:"21:9",title:"Ultrawide (21:9)",subtitle:"21:9 ratio"}]}),(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Resolution"}),(0,a.jsx)(n.Z,{sx:{flex:1},children:(0,a.jsx)(tT.t,{id:"QualityMode",options:[{value:"1K",label:"1K"},{value:"2K",label:"2K"},{value:"4K",label:"4K"}],value:j,onChange:e=>{b(e)}})})]})]})}),v?(0,a.jsx)(eO.Q,{expanded:s,onClick:e=>t(i,e),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ez,{UpscaleAEnhanceProps:{showOutputSizeText:!1,enableEnhance:[]}})})}):null]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tZ,{})]})]})},[tY.u.IDEOGRAM]:()=>{let e="outputSizeKey",t=(0,V.TS)(t=>t.getUiState(e,!1)),i=(0,V.TS)(e=>e.ensureUiState),s="advance-settings-accordion.expanded",l=(0,V.TS)(e=>e.getUiState(s,!1)),[d,c]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),u=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1));return(0,w.useEffect)(()=>{i(e,!0)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{sx:{overflowX:"hidden !important"},children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:u,onClick:e=>i("showShowMoreSettings.open",e),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsx)(n.Z,{spacing:1,children:(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:d,onChange:c}),children:(0,a.jsx)(ew.K,{value:d,onChange:c})})})})}),(0,a.jsx)(eO.Q,{expanded:t,onClick:t=>i(e,t),title:"Output Settings",content:(0,a.jsx)(eF.d,{showSizeSliders:!1})}),(0,a.jsx)(eO.Q,{expanded:l,onClick:e=>i(s,e),title:"Advance Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"4px",children:(0,a.jsx)(ez,{UpscaleAEnhanceProps:{showOutputSizeText:!1,enableEnhance:[]}})})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tv,{})]})]})},[tY.u.HUNYUAN_IMAGE_3]:()=>{let e=(0,V.TS)(e=>e.ensureUiState),t="outputSizeKey",i=(0,V.TS)(e=>e.getUiState(t,!1)),[s,l]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("negative_prompt"))),[d,c]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("cfg_scale"))),u=(0,V.TS)(e=>e.getUiState("showShowMoreSettings.open",!1)),h="advance-settings-accordion.expanded",m=(0,V.TS)(e=>e.getUiState(h,!1)),p=(0,V.TS)((0,o.N)(e=>e.getParameterValue("steps"))),g=(0,V.TS)(e=>e.setSteps),j=(0,V.TS)((0,o.N)(e=>e.getParameterValue("seed"))),b=(0,V.TS)(e=>e.setSeed),[f]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("aspect_ratio"))),[,S]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("width"))),[,v]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("height")));return(0,w.useEffect)(()=>{var e,t;S(null===(e=tS[f])||void 0===e?void 0:e.width),v(null===(t=tS[f])||void 0===t?void 0:t.height)},[f,S,v]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{bottomElement:(0,a.jsx)(eB.p,{open:u,onClick:t=>e("showShowMoreSettings.open",t),buttonContent:(0,a.jsx)(x.Z,{variant:"editor-label1",children:"Show more settings >"}),collapseContent:(0,a.jsxs)(n.Z,{spacing:1,children:[(0,a.jsx)(eS.x,{label:"Negative Prompt",tooltip:"The description of what you do not want to see in the image.",extra:(0,a.jsx)(ef.Z,{value:s,onChange:l}),children:(0,a.jsx)(ew.K,{value:s,onChange:l})}),(0,a.jsx)(eS.x,{children:(0,a.jsx)(ey.e,{value:d,onChange:c})})]})})}),(0,a.jsx)(eO.Q,{expanded:i,onClick:i=>e(t,i),title:"Output Settings",content:(0,a.jsx)(n.Z,{direction:"column",spacing:"8px",children:(0,a.jsx)(e5,{title:"Aspect Ratio",delimiter:":",predefinedSizes:tf,sizeMappings:tS})})}),(0,a.jsx)(eO.Q,{expanded:m,onClick:t=>e(h,t),title:"Advance Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"4px",children:[(0,a.jsx)(eZ,{value:j,onChange:b}),(0,a.jsx)(eN.O,{min:1,max:50,value:p,onChange:g}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tb,{})]})]})},[tY.u.REVE]:()=>{let e=(0,V.TS)(e=>e.setFeatureKeys),[,t]=(0,V.TS)((0,o.N)(e=>[e.getUiState("advanceSettings",!1),e.setUiState])),i="outputSizeKey",s=(0,V.TS)(e=>e.getUiState(i,!1)),l="image-guidance-accordion.expanded",d=(0,V.TS)(e=>e.getUiState(l,!0)),[c]=(0,eL.y)({key:"create.config.imageGuidance"}),[u,h]=(0,V.TS)((0,o.N)(e=>e.getParameterValueAndSetter("image_urls"))),m=(0,V.TS)((0,o.N)(e=>e.getUiState("image_urls.expanded",!0))),p=async e=>{let t,i;if(e.width&&e.height)t=e.width,i=e.height;else try{let a=await x(e.imageUrl);t=a.width,i=a.height}catch(e){throw console.error(e),Error("Failed to detect image dimensions")}let a=t/i;if(t+i<=14)throw Error("Image dimensions are too small");if(a<1/3||a>3)throw Error("Invalid image ratio. It must be between 1:3 and 3:1.");return!0},x=(0,w.useCallback)(e=>new Promise((t,i)=>{let a=new Image,n=setTimeout(()=>{i(Error("Image loading timeout"))},1e4);a.addEventListener("load",()=>{clearTimeout(n),t({width:a.naturalWidth,height:a.naturalHeight})}),a.addEventListener("error",()=>{clearTimeout(n),i(Error("Failed to load image"))}),a.crossOrigin="anonymous",a.src=e}),[]),g=(0,w.useCallback)(t=>{t.filter(Boolean).length>0?e("create.model.reve.remix",["create.model.reve.remix"]):e("create.model.reve.remix",[])},[e]);return(0,w.useEffect)(()=>{g(u)},[u,g]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ea.Z,{children:[(0,a.jsx)(ei,{openart_presets_list:eg.vJ}),(0,a.jsx)(en.i,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eO.Q,{expanded:d,onClick:e=>t(l,e),title:"Image Guidance",tooltip:eT.$,content:c?(0,a.jsx)(n.Z,{sx:{border:"1px solid #444",borderRadius:el.E0,overflow:"hidden",mt:"8px","& .MuiAccordionSummary-root":{pb:"10px"}},children:(0,a.jsx)(eP.m,{className:"image-to-image-accordion-item",startIcon:Y.CustomSubjectReferenceOutline,label:"Image Reference",value:u,expend:m,onExpendChange:e=>t("image_urls.expanded",e),extra:(0,a.jsx)(eQ.U,{name:"image_urls",value:u}),sx:tE,children:(0,a.jsx)(n.Z,{direction:"column",spacing:2,children:(0,a.jsx)(eG.f,{value:u,onChange:e=>{g(e),h(e)},sx:{p:1},maxImages:6,checker:p})})})}):(0,a.jsx)(eb.Y,{plan:"Starter or above",feature:"to use image guidance"})}),(0,a.jsx)(eO.Q,{expanded:s,onClick:e=>t(i,e),title:"Output Settings",content:(0,a.jsxs)(n.Z,{direction:"column",spacing:"8px",children:[(0,a.jsx)(e5,{title:"Aspect Ratio",delimiter:":",predefinedSizes:tI}),(0,a.jsx)(ez,{UpscaleAEnhanceProps:{enableEnhance:[]}})]})})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(tU,{})]})]})}},t1=e=>t0[e],t2=()=>{let e=t1((0,V.TS)(e=>e.settingComponentType));return(0,a.jsx)(e,{})},t4=(e,t,i)=>({ml:{xs:"6px",md:i},fontSize:{xs:e,md:t},width:{xs:e,md:t},height:{xs:e,md:t}}),t6=()=>(0,a.jsx)(t5,{children:(0,a.jsx)(t2,{})});function t5(e){let{children:t}=e;return(0,a.jsx)(n.Z,{height:"100%",sx:{px:{xs:"11px",md:0},"& .iconify-icon-ph-info:not(.alert-icon)":t4(18,14,"2px"),"& .MuiAccordionSummary-root .iconify-icon-ph-info:not(.alert-icon)":t4(20,16,"4px"),backgroundColor:"var(--Gray-100)"},children:t})}},60775:function(e,t,i){i.d(t,{M:function(){return y}});var a=i(52676),n=i(75271),r=i(66266),s=i(75946),o=i(22988),l=i(56407),d=i(80110),c=i(63132),u=i(58306),h=i(70803),m=i(16272),p=i(98114),x=i(69395),g=i(22279),j=i(35114),b=i(97779),f=i(27806),S=i(19005),v=i(4629);let w=e=>{let{sx:t,config:i,tabValue:n}=e,s=(0,r.useRouter)(),h=e=>{s.replace({query:{...s.query,tab:e}},void 0,{shallow:!0})};return(0,a.jsx)(o.Z,{sx:{position:"sticky",top:0,zIndex:998,...t},children:(0,a.jsx)(u.Y,{value:n,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(e,t)=>h(t),sx:{height:j.As},children:i.map(e=>(0,a.jsx)(c.i,{value:e.value,label:(0,a.jsxs)(l.Z,{direction:"row",spacing:1,alignItems:"center",sx:{px:1},children:[e.icon,(0,a.jsx)(d.Z,{children:e.label})]}),sx:{marginRight:2}},e.value))})})};function y(e){var t;let{getTabsConfig:i,tabSx:d,defaultTabValue:c,sx:u}=e,{data:j}=(0,S.$_)(),y=null===(t=j||{})||void 0===t?void 0:t.id,{isMobile:C}=(0,b.j)(),{query:T}=(0,r.useRouter)(),_=(i??function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[{label:"Generation",value:"generation",icon:(0,a.jsx)(f.PhImagesSquare,{sx:{width:"20px",height:"20px"}}),rendTabPanel:()=>(0,a.jsx)(m.default,{sign:"create",userId:e,filter:{types:v.QP,resource_type:"image"},gridHeight:"100%",zoomMax:t?4:12},"generation-history")},{label:"Albums",value:"albums",icon:(0,a.jsx)(s.Z,{sx:{width:"20px",height:"20px"}}),rendTabPanel:()=>(0,a.jsx)(o.Z,{sx:{height:"100%",overflowY:"auto"},children:(0,a.jsx)(h.default,{userId:e})})},{label:"Editing History",value:"draft",icon:(0,a.jsx)(f.PhResizeBold,{sx:{width:"20px",height:"20px"}}),rendTabPanel:()=>(0,a.jsx)(m.default,{sign:"create",userId:e,filter:{types:v.Tb},gridHeight:"100%",enableRecreateFeatures:!1,zoomMax:t?4:12},"editing-history")},{label:"Bulk Creations",value:"bulk",icon:(0,a.jsx)(f.PhCopySimpleBold,{sx:{width:"20px",height:"20px"}}),rendTabPanel:()=>(0,a.jsx)(x.G,{user_id:e})}]})(y,C),Z=(0,n.useMemo)(()=>T.tab&&_.some(e=>e.value===T.tab)?T.tab:c??_[0].value,[c,T.tab,_]),N=_.find(e=>e.value===Z);return(0,a.jsxs)(l.Z,{direction:"column",height:"100%",sx:u,children:[(0,a.jsx)(g._,{children:C?(0,a.jsx)(w,{sx:d,config:_,tabValue:Z}):(0,a.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{borderBottom:1,borderColor:"divider"},children:[(0,a.jsx)(w,{sx:d,config:_,tabValue:Z}),(0,a.jsx)(p.Z,{sx:{height:"35px",marginRight:"10px"}})]})}),(0,a.jsx)(o.Z,{flex:1,px:"8px",sx:{overflowY:"hidden"},children:N.rendTabPanel()})]})}},20050:function(e,t,i){i.d(t,{x:function(){return c}});var a=i(52676),n=i(56407),r=i(22988),s=i(80110),o=i(42109),l=i(72381),d=i(34547);function c(e){let{isMobile:t,type:i}=e;return(0,a.jsx)(n.Z,{sx:{backgroundColor:"#101010"},children:"character"===i?(0,a.jsx)(u,{isMobile:t}):(0,a.jsxs)(r.Z,{py:2,px:3,children:[(0,a.jsx)(o.Z,{isMobile:t}),t?null:(0,a.jsx)(l.Z,{})]})})}function u(e){let{isMobile:t}=e;return(0,a.jsxs)(r.Z,{py:2,px:3,children:[(0,a.jsx)(n.Z,{direction:"column",sx:{mb:{xs:1,md:4},position:"relative"},spacing:2,children:(0,a.jsxs)(n.Z,{direction:"column",sx:{pt:4,borderRadius:"8px",position:"relative",overflow:"hidden"},children:[(0,a.jsxs)(r.Z,{sx:{zIndex:2},children:[(0,a.jsxs)(n.Z,{direction:"row",justifyContent:"center",alignItems:"flex-start",children:[(0,a.jsx)(r.Z,{fetchPriority:"high",component:"img",src:"https://cdn.openart.ai/assets/internal/uploads/image_1FwAnw6S_64x43_1753167359908.webp",sx:{mr:"2px",width:"32px",height:"21px"}}),(0,a.jsx)(s.Z,{variant:"h2",component:"h1",gutterBottom:!0,sx:{mb:0,textAlign:"center",fontFamily:"Inter",fontSize:{xs:"18px",sm:"35px",md:"30px",lg:"56px"},fontWeight:800,lineHeight:"115%",background:`linear-gradient(90deg, 
                  rgba(169, 189, 255, 1) 0%,
                  rgba(195, 204, 161, 1) 50%,
                  rgba(120, 199, 116, 1) 100%
                )`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent"},children:"Character Image Generation"}),(0,a.jsx)(r.Z,{fetchPriority:"high",alt:"OpenArt logo right",component:"img",src:"https://cdn.openart.ai/assets/internal/uploads/image_ToFhHNxv_58x51_1753167372880.webp",sx:{mt:"3px",ml:"2px",width:"29px",height:"25px"}})]}),(0,a.jsx)(r.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,a.jsx)(s.Z,{variant:"body1",gutterBottom:!0,sx:{mt:1,mb:2,color:"#AAA",textAlign:"center",fontSize:{xs:"12px",sm:"16px"},width:{xs:"320px",sm:"600px",md:"500px",lg:"850px"},fontWeight:500,lineHeight:"160%",fontFamily:"Inter"},children:"\uD83D\uDEE0 Start with Quick Templates, explore Pose Your Character, or try Place Character in Image — and build your own character universe in seconds."})})]}),(0,a.jsx)(n.Z,{direction:"row",justifyContent:"flex-start",sx:{my:2},children:(0,a.jsx)(d.Z,{GA_label:"AppHeader"})}),(0,a.jsx)(r.Z,{fetchPriority:"high",component:"img",src:t?"https://cdn.openart.ai/assets/internal/uploads/image_h1aylmTT_729x1348_1753173964490.webp":"https://cdn.openart.ai/assets/internal/uploads/image_uNVqwVq8_1758x694_1753173950862.webp",sx:{width:"100%",height:"auto"}})]})}),t?null:(0,a.jsx)(l.Z,{})]})}},37521:function(e,t,i){i.d(t,{g:function(){return a}});let a=(e,t,i,a,n)=>{let r,s;let[o,l]=e.split(":").map(e=>Number.parseInt(e));return Math.max(l,o)===l?(r=i,(s=Math.round(i*o/l))>t&&(s=t,r=Math.round(t*l/o))):(s=t,(r=Math.round(t*l/o))>i&&(r=i,s=Math.round(i*o/l))),{width:s=Math.max(s,a),height:r=Math.max(r,n)}}}}]);