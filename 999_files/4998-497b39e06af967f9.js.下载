(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4998],{75449:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),o(i(61905),e)},61905:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MiniSignal=void 0;let i=Symbol("SIGNAL");class n{constructor(){this._symbol=Symbol("MiniSignal"),this._refMap=new WeakMap,this._head=void 0,this._tail=void 0,this._dispatching=!1}hasListeners(){return null!=this._head}dispatch(...t){if(this._dispatching)throw Error("MiniSignal#dispatch(): Signal already dispatching.");let e=this._head;if(null==e)return!1;for(this._dispatching=!0;null!=e;)e.fn(...t),e=e.next;return this._dispatching=!1,!0}add(t){if("function"!=typeof t)throw Error("MiniSignal#add(): First arg must be a Function.");return this._createRef(this._addNode({fn:t}))}detach(t){if(!("object"==typeof t&&i in t))throw Error("MiniSignal#detach(): First arg must be a MiniSignal listener reference.");if(t[i]!==this._symbol)throw Error("MiniSignal#detach(): MiniSignal listener does not belong to this MiniSignal.");let e=this._refMap.get(t);return e&&(this._refMap.delete(t),this._disconnectNode(e),this._destroyNode(e)),this}detachAll(){let t=this._head;if(null==t)return this;for(this._head=this._tail=void 0,this._refMap=new WeakMap;null!=t;)this._destroyNode(t),t=t.next;return this}_destroyNode(t){t.fn=void 0,t.prev=void 0}_disconnectNode(t){t===this._head?(this._head=t.next,null==t.next&&(this._tail=void 0)):t===this._tail&&(this._tail=t.prev,null!=this._tail&&(this._tail.next=void 0)),null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev)}_addNode(t){return null==this._head?this._head=t:(this._tail.next=t,t.prev=this._tail),this._tail=t,t}_createRef(t){let e={[i]:this._symbol};return this._refMap.set(e,t),e}_getRef(t){return this._refMap.get(t)}}e.MiniSignal=n},83903:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2 2 6.48 2 12m10-1h4v2h-4v3l-4-4 4-4z"}),"ArrowCircleLeft")},31270:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward")},76039:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"}),"AutoFixHigh")},42283:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"}),"Bolt")},31664:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")},38108:function(t,e,i){"use strict";var n=i(26538);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(90219)),r=i(52676);e.default=(0,o.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},20041:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},67255:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20m6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9"}),"DoDisturbTwoTone")},2396:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M10 17H5v-2h5zm0-4H5v-2h5zm0-4H5V7h5zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42z"}),"FactCheck")},90534:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image")},33829:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M10 9h4V6h3l-5-5-5 5h3zm-1 1H6V7l-5 5 5 5v-3h3zm14 2-5-5v3h-3v4h3v3zm-9 3h-4v3H7l5 5 5-5h-3z"}),"OpenWith")},73335:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M20 4v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}),"PhotoLibraryOutlined")},40187:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},10280:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight")},83144:function(t,e,i){"use strict";var n=i(26538);e.Z=void 0;var o=n(i(90219)),r=i(52676);e.Z=(0,o.default)((0,r.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune")},18826:function(t,e,i){"use strict";var n=i(99664),o=i(52676);e.Z=(0,n.Z)((0,o.jsx)("path",{d:"M16 9v10H8V9zm-1.5-6h-5l-1 1H5v2h14V4h-3.5zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2z"}),"DeleteOutlined")},63159:function(t,e,i){"use strict";var n=i(99664),o=i(52676);e.Z=(0,n.Z)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20m6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9"}),"DoDisturbAlt")},76026:function(t,e,i){"use strict";var n=i(99664),o=i(52676);e.Z=(0,n.Z)((0,o.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5z"}),"FileUploadOutlined")},92514:function(t,e,i){"use strict";var n=i(99664),o=i(52676);e.Z=(0,n.Z)([(0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,o.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn")},38445:function(t,e,i){"use strict";var n=i(99664),o=i(52676);e.Z=(0,n.Z)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut")},91415:function(t,e,i){"use strict";var n=i(97963),o=i(2053),r=i(75271),s=i(4814),a=i(93828),l=i(84555),h=i(8928),p=i(68972),c=i(52676);let u=["children","className","component","image","src","style"],d=t=>{let{classes:e,isMediaComponent:i,isImageComponent:n}=t;return(0,a.Z)({root:["root",i&&"media",n&&"img"]},p.a,e)},f=(0,h.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:i}=t,{isMediaComponent:n,isImageComponent:o}=i;return[e.root,n&&e.media,o&&e.img]}})(t=>{let{ownerState:e}=t;return(0,o.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})}),m=["video","audio","picture","iframe","img"],g=["picture","img"],v=r.forwardRef(function(t,e){let i=(0,l.i)({props:t,name:"MuiCardMedia"}),{children:r,className:a,component:h="div",image:p,src:v,style:y}=i,b=(0,n.Z)(i,u),w=-1!==m.indexOf(h),x=!w&&p?(0,o.Z)({backgroundImage:`url("${p}")`},y):y,_=(0,o.Z)({},i,{component:h,isMediaComponent:w,isImageComponent:-1!==g.indexOf(h)}),S=d(_);return(0,c.jsx)(f,(0,o.Z)({className:(0,s.Z)(S.root,a),as:h,role:!w&&p?"img":void 0,ref:e,style:x,ownerState:_,src:w?p||v:void 0},b,{children:r}))});e.Z=v},68972:function(t,e,i){"use strict";i.d(e,{a:function(){return r}});var n=i(50238),o=i(18364);function r(t){return(0,o.ZP)("MuiCardMedia",t)}let s=(0,n.Z)("MuiCardMedia",["root","media","img"]);e.Z=s},139:function(){},99661:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return p.default}}),e.default=void 0;var n=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=d(void 0);if(i&&i.has(t))return i.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var s=o?Object.getOwnPropertyDescriptor(t,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(i(75271)),o=u(i(40507)),r=u(i(30967)),s=u(i(45924)),a=i(22153),l=i(32356),h=i(59035),p=u(i(17322)),c=u(i(63544));function u(t){return t&&t.__esModule?t:{default:t}}function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(d=function(t){return t?i:e})(t)}function f(){return(f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function m(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class g extends n.Component{static getDerivedStateFromProps(t,e){let{position:i}=t,{prevPropsPosition:n}=e;return i&&(!n||i.x!==n.x||i.y!==n.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:i,prevPropsPosition:n}),{x:i.x,y:i.y,prevPropsPosition:{...i}}):null}constructor(t){super(t),m(this,"onDragStart",(t,e)=>{if((0,c.default)("Draggable: onDragStart: %j",e),!1===this.props.onStart(t,(0,l.createDraggableData)(this,e)))return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(t,e)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",e);let i=(0,l.createDraggableData)(this,e),n={x:i.x,y:i.y,slackX:0,slackY:0};if(this.props.bounds){let{x:t,y:e}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;let[o,r]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=o,n.y=r,n.slackX=this.state.slackX+(t-n.x),n.slackY=this.state.slackY+(e-n.y),i.x=n.x,i.y=n.y,i.deltaX=n.x-this.state.x,i.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(t,i))return!1;this.setState(n)}),m(this,"onDragStop",(t,e)=>{if(!this.state.dragging||!1===this.props.onStop(t,(0,l.createDraggableData)(this,e)))return!1;(0,c.default)("Draggable: onDragStop: %j",e);let i={dragging:!1,slackX:0,slackY:0};if(this.props.position){let{x:t,y:e}=this.props.position;i.x=t,i.y=e}this.setState(i)}),this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,prevPropsPosition:{...t.position},slackX:0,slackY:0,isElementSVG:!1},t.position&&!(t.onDrag||t.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode() instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var t,e;return null!==(t=null===(e=this.props)||void 0===e||null===(e=e.nodeRef)||void 0===e?void 0:e.current)&&void 0!==t?t:r.default.findDOMNode(this)}render(){let{axis:t,bounds:e,children:i,defaultPosition:o,defaultClassName:r,defaultClassNameDragging:h,defaultClassNameDragged:c,position:u,positionOffset:d,scale:m,...g}=this.props,v={},y=null,b=!u||this.state.dragging,w=u||o,x={x:(0,l.canDragX)(this)&&b?this.state.x:w.x,y:(0,l.canDragY)(this)&&b?this.state.y:w.y};this.state.isElementSVG?y=(0,a.createSVGTransform)(x,d):v=(0,a.createCSSTransform)(x,d);let _=(0,s.default)(i.props.className||"",r,{[h]:this.state.dragging,[c]:this.state.dragged});return n.createElement(p.default,f({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(i),{className:_,style:{...i.props.style,...v},transform:y}))}}e.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...p.default.propTypes,axis:o.default.oneOf(["both","x","y","none"]),bounds:o.default.oneOfType([o.default.shape({left:o.default.number,right:o.default.number,top:o.default.number,bottom:o.default.number}),o.default.string,o.default.oneOf([!1])]),defaultClassName:o.default.string,defaultClassNameDragging:o.default.string,defaultClassNameDragged:o.default.string,defaultPosition:o.default.shape({x:o.default.number,y:o.default.number}),positionOffset:o.default.shape({x:o.default.oneOfType([o.default.number,o.default.string]),y:o.default.oneOfType([o.default.number,o.default.string])}),position:o.default.shape({x:o.default.number,y:o.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),m(g,"defaultProps",{...p.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},17322:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=c(void 0);if(i&&i.has(t))return i.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var s=o?Object.getOwnPropertyDescriptor(t,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(i(75271)),o=p(i(40507)),r=p(i(30967)),s=i(22153),a=i(32356),l=i(59035),h=p(i(63544));function p(t){return t&&t.__esModule?t:{default:t}}function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(c=function(t){return t?i:e})(t)}function u(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let d={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},f=d.mouse;class m extends n.Component{constructor(){super(...arguments),u(this,"dragging",!1),u(this,"lastX",NaN),u(this,"lastY",NaN),u(this,"touchIdentifier",null),u(this,"mounted",!1),u(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;let e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body)throw Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:i}=e;if(this.props.disabled||!(t.target instanceof i.defaultView.Node)||this.props.handle&&!(0,s.matchesSelectorAndParentsTo)(t.target,this.props.handle,e)||this.props.cancel&&(0,s.matchesSelectorAndParentsTo)(t.target,this.props.cancel,e))return;"touchstart"===t.type&&t.preventDefault();let n=(0,s.getTouchIdentifier)(t);this.touchIdentifier=n;let o=(0,a.getControlPosition)(t,n,this);if(null==o)return;let{x:r,y:l}=o,p=(0,a.createCoreData)(this,r,l);(0,h.default)("DraggableCore: handleDragStart: %j",p),(0,h.default)("calling",this.props.onStart),!1!==this.props.onStart(t,p)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(i),this.dragging=!0,this.lastX=r,this.lastY=l,(0,s.addEvent)(i,f.move,this.handleDrag),(0,s.addEvent)(i,f.stop,this.handleDragStop))}),u(this,"handleDrag",t=>{let e=(0,a.getControlPosition)(t,this.touchIdentifier,this);if(null==e)return;let{x:i,y:n}=e;if(Array.isArray(this.props.grid)){let t=i-this.lastX,e=n-this.lastY;if([t,e]=(0,a.snapToGrid)(this.props.grid,t,e),!t&&!e)return;i=this.lastX+t,n=this.lastY+e}let o=(0,a.createCoreData)(this,i,n);if((0,h.default)("DraggableCore: handleDrag: %j",o),!1===this.props.onDrag(t,o)||!1===this.mounted){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){let t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}return}this.lastX=i,this.lastY=n}),u(this,"handleDragStop",t=>{if(!this.dragging)return;let e=(0,a.getControlPosition)(t,this.touchIdentifier,this);if(null==e)return;let{x:i,y:n}=e;if(Array.isArray(this.props.grid)){let t=i-this.lastX||0,e=n-this.lastY||0;[t,e]=(0,a.snapToGrid)(this.props.grid,t,e),i=this.lastX+t,n=this.lastY+e}let o=(0,a.createCoreData)(this,i,n);if(!1===this.props.onStop(t,o)||!1===this.mounted)return!1;let r=this.findDOMNode();r&&this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(r.ownerDocument),(0,h.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,r&&((0,h.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(r.ownerDocument,f.move,this.handleDrag),(0,s.removeEvent)(r.ownerDocument,f.stop,this.handleDragStop))}),u(this,"onMouseDown",t=>(f=d.mouse,this.handleDragStart(t))),u(this,"onMouseUp",t=>(f=d.mouse,this.handleDragStop(t))),u(this,"onTouchStart",t=>(f=d.touch,this.handleDragStart(t))),u(this,"onTouchEnd",t=>(f=d.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;let t=this.findDOMNode();t&&(0,s.addEvent)(t,d.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let t=this.findDOMNode();if(t){let{ownerDocument:e}=t;(0,s.removeEvent)(e,d.mouse.move,this.handleDrag),(0,s.removeEvent)(e,d.touch.move,this.handleDrag),(0,s.removeEvent)(e,d.mouse.stop,this.handleDragStop),(0,s.removeEvent)(e,d.touch.stop,this.handleDragStop),(0,s.removeEvent)(t,d.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(e)}}findDOMNode(){var t,e;return null!==(t=this.props)&&void 0!==t&&t.nodeRef?null===(e=this.props)||void 0===e||null===(e=e.nodeRef)||void 0===e?void 0:e.current:r.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}e.default=m,u(m,"displayName","DraggableCore"),u(m,"propTypes",{allowAnyClick:o.default.bool,children:o.default.node.isRequired,disabled:o.default.bool,enableUserSelectHack:o.default.bool,offsetParent:function(t,e){if(t[e]&&1!==t[e].nodeType)throw Error("Draggable's offsetParent must be a DOM Node.")},grid:o.default.arrayOf(o.default.number),handle:o.default.string,cancel:o.default.string,nodeRef:o.default.object,onStart:o.default.func,onDrag:o.default.func,onStop:o.default.func,onMouseDown:o.default.func,scale:o.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),u(m,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},84569:function(t,e,i){"use strict";let{default:n,DraggableCore:o}=i(99661);t.exports=n,t.exports.default=n,t.exports.DraggableCore=o},22153:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addClassName=h,e.addEvent=function(t,e,i,n){if(!t)return;let o={capture:!0,...n};t.addEventListener?t.addEventListener(e,i,o):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},e.addUserSelectStyles=function(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||((e=t.createElement("style")).type="text/css",e.id="react-draggable-style-el",e.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",e.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",t.getElementsByTagName("head")[0].appendChild(e)),t.body&&h(t.body,"react-draggable-transparent-selection")},e.createCSSTransform=function(t,e){let i=l(t,e,"px");return{[(0,o.browserPrefixToKey)("transform",o.default)]:i}},e.createSVGTransform=function(t,e){return l(t,e,"")},e.getTouch=function(t,e){return t.targetTouches&&(0,n.findInArray)(t.targetTouches,t=>e===t.identifier)||t.changedTouches&&(0,n.findInArray)(t.changedTouches,t=>e===t.identifier)},e.getTouchIdentifier=function(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:void 0},e.getTranslation=l,e.innerHeight=function(t){let e=t.clientHeight,i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(i.paddingTop),e-=(0,n.int)(i.paddingBottom)},e.innerWidth=function(t){let e=t.clientWidth,i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(i.paddingLeft),e-=(0,n.int)(i.paddingRight)},e.matchesSelector=a,e.matchesSelectorAndParentsTo=function(t,e,i){let n=t;do{if(a(n,e))return!0;if(n===i)break;n=n.parentNode}while(n);return!1},e.offsetXYFromParent=function(t,e,i){let n=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:(t.clientX+e.scrollLeft-n.left)/i,y:(t.clientY+e.scrollTop-n.top)/i}},e.outerHeight=function(t){let e=t.clientHeight,i=t.ownerDocument.defaultView.getComputedStyle(t);return e+((0,n.int)(i.borderTopWidth)+(0,n.int)(i.borderBottomWidth))},e.outerWidth=function(t){let e=t.clientWidth,i=t.ownerDocument.defaultView.getComputedStyle(t);return e+((0,n.int)(i.borderLeftWidth)+(0,n.int)(i.borderRightWidth))},e.removeClassName=p,e.removeEvent=function(t,e,i,n){if(!t)return;let o={capture:!0,...n};t.removeEventListener?t.removeEventListener(e,i,o):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null},e.removeUserSelectStyles=function(t){if(t)try{if(t.body&&p(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{let e=(t.defaultView||window).getSelection();e&&"Caret"!==e.type&&e.removeAllRanges()}}catch(t){}};var n=i(59035),o=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=r(void 0);if(i&&i.has(t))return i.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=o?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}return n.default=t,i&&i.set(t,n),n}(i(68596));function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(r=function(t){return t?i:e})(t)}let s="";function a(t,e){return s||(s=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,n.isFunction)(t[e])})),!!(0,n.isFunction)(t[s])&&t[s](e)}function l(t,e,i){let{x:n,y:o}=t,r="translate(".concat(n).concat(i,",").concat(o).concat(i,")");if(e){let t="".concat("string"==typeof e.x?e.x:e.x+i),n="".concat("string"==typeof e.y?e.y:e.y+i);r="translate(".concat(t,", ").concat(n,")")+r}return r}function h(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function p(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}},68596:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.browserPrefixToKey=o,e.browserPrefixToStyle=function(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t},e.default=void 0,e.getPrefix=n;let i=["Moz","Webkit","O","ms"];function n(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";let n=null===(t=window.document)||void 0===t||null===(t=t.documentElement)||void 0===t?void 0:t.style;if(!n||e in n)return"";for(let t=0;t<i.length;t++)if(o(e,i[t]) in n)return i[t];return""}function o(t,e){return e?"".concat(e).concat(function(t){let e="",i=!0;for(let n=0;n<t.length;n++)i?(e+=t[n].toUpperCase(),i=!1):"-"===t[n]?i=!0:e+=t[n];return e}(t)):t}e.default=n()},63544:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},32356:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canDragX=function(t){return"both"===t.props.axis||"x"===t.props.axis},e.canDragY=function(t){return"both"===t.props.axis||"y"===t.props.axis},e.createCoreData=function(t,e,i){let o=!(0,n.isNum)(t.lastX),s=r(t);return o?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:i,x:e,y:i}:{node:s,deltaX:e-t.lastX,deltaY:i-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:i}},e.createDraggableData=function(t,e){let i=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/i,y:t.state.y+e.deltaY/i,deltaX:e.deltaX/i,deltaY:e.deltaY/i,lastX:t.state.x,lastY:t.state.y}},e.getBoundPosition=function(t,e,i){var s;if(!t.props.bounds)return[e,i];let{bounds:a}=t.props;a="string"==typeof a?a:{left:(s=a).left,top:s.top,right:s.right,bottom:s.bottom};let l=r(t);if("string"==typeof a){let t;let{ownerDocument:e}=l,i=e.defaultView;if(!((t="parent"===a?l.parentNode:e.querySelector(a))instanceof i.HTMLElement))throw Error('Bounds selector "'+a+'" could not find an element.');let r=i.getComputedStyle(l),s=i.getComputedStyle(t);a={left:-l.offsetLeft+(0,n.int)(s.paddingLeft)+(0,n.int)(r.marginLeft),top:-l.offsetTop+(0,n.int)(s.paddingTop)+(0,n.int)(r.marginTop),right:(0,o.innerWidth)(t)-(0,o.outerWidth)(l)-l.offsetLeft+(0,n.int)(s.paddingRight)-(0,n.int)(r.marginRight),bottom:(0,o.innerHeight)(t)-(0,o.outerHeight)(l)-l.offsetTop+(0,n.int)(s.paddingBottom)-(0,n.int)(r.marginBottom)}}return(0,n.isNum)(a.right)&&(e=Math.min(e,a.right)),(0,n.isNum)(a.bottom)&&(i=Math.min(i,a.bottom)),(0,n.isNum)(a.left)&&(e=Math.max(e,a.left)),(0,n.isNum)(a.top)&&(i=Math.max(i,a.top)),[e,i]},e.getControlPosition=function(t,e,i){let n="number"==typeof e?(0,o.getTouch)(t,e):null;if("number"==typeof e&&!n)return null;let s=r(i),a=i.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,o.offsetXYFromParent)(n||t,a,i.props.scale)},e.snapToGrid=function(t,e,i){return[Math.round(e/t[0])*t[0],Math.round(i/t[1])*t[1]]};var n=i(59035),o=i(22153);function r(t){let e=t.findDOMNode();if(!e)throw Error("<DraggableCore>: Unmounted during event!");return e}},59035:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dontSetMe=function(t,e,i){if(t[e])return Error("Invalid prop ".concat(e," passed to ").concat(i," - do not set this, set it on the child."))},e.findInArray=function(t,e){for(let i=0,n=t.length;i<n;i++)if(e.apply(e,[t[i],i,t]))return t[i]},e.int=function(t){return parseInt(t,10)},e.isFunction=function(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)},e.isNum=function(t){return"number"==typeof t&&!isNaN(t)}},39413:function(t,e,i){"use strict";i.d(e,{s:function(){return N}});var n,o,r=i(75271),s=i(84569),a=i.n(s),l=i(30967),h=(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=function(){return(p=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},u={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},d={width:"20px",height:"20px",position:"absolute"},f={top:p(p({},c),{top:"-5px"}),right:p(p({},u),{left:void 0,right:"-5px"}),bottom:p(p({},c),{top:void 0,bottom:"-5px"}),left:p(p({},u),{left:"-5px"}),topRight:p(p({},d),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:p(p({},d),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:p(p({},d),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:p(p({},d),{left:"-10px",top:"-10px",cursor:"nw-resize"})},m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMouseDown=function(t){e.props.onResizeStart(t,e.props.direction)},e.onTouchStart=function(t){e.props.onResizeStart(t,e.props.direction)},e}return h(e,t),e.prototype.render=function(){return r.createElement("div",{className:this.props.className||"",style:p(p({position:"absolute",userSelect:"none"},f[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},e}(r.PureComponent),g=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),v=function(){return(v=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},y={width:"auto",height:"auto"},b=function(t,e,i){return Math.max(Math.min(t,i),e)},w=function(t,e,i){var n=Math.round(t/e);return n*e+i*(n-1)},x=function(t,e){return RegExp(t,"i").test(e)},_=function(t){return!!(t.touches&&t.touches.length)},S=function(t,e,i){void 0===i&&(i=0);var n=e.reduce(function(i,n,o){return Math.abs(n-t)<Math.abs(e[i]-t)?o:i},0),o=Math.abs(e[n]-t);return 0===i||o<i?e[n]:t},P=function(t){return"auto"===(t=t.toString())||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:t+"px"},M=function(t,e,i,n){if(t&&"string"==typeof t){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var o=Number(t.replace("%",""))/100;return e*o}if(t.endsWith("vw")){var o=Number(t.replace("vw",""))/100;return i*o}if(t.endsWith("vh")){var o=Number(t.replace("vh",""))/100;return n*o}}return t},E=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],D="__resizable_base__",T=function(t){function e(e){var i,n,o,r,s=t.call(this,e)||this;return s.ratio=1,s.resizable=null,s.parentLeft=0,s.parentTop=0,s.resizableLeft=0,s.resizableRight=0,s.resizableTop=0,s.resizableBottom=0,s.targetLeft=0,s.targetTop=0,s.appendBase=function(){if(!s.resizable||!s.window)return null;var t=s.parentNode;if(!t)return null;var e=s.window.document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.transform="scale(0, 0)",e.style.left="0",e.style.flex="0 0 100%",e.classList?e.classList.add(D):e.className+=D,t.appendChild(e),e},s.removeBase=function(t){var e=s.parentNode;e&&e.removeChild(t)},s.state={isResizing:!1,width:null!==(n=null===(i=s.propsSize)||void 0===i?void 0:i.width)&&void 0!==n?n:"auto",height:null!==(r=null===(o=s.propsSize)||void 0===o?void 0:o.height)&&void 0!==r?r:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},s.onResizeStart=s.onResizeStart.bind(s),s.onMouseMove=s.onMouseMove.bind(s),s.onMouseUp=s.onMouseUp.bind(s),s}return g(e,t),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,e=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,n=this.resizable.offsetHeight,o=this.resizable.style.position;"relative"!==o&&(this.resizable.style.position="relative"),t="auto"!==this.resizable.style.width?this.resizable.offsetWidth:i,e="auto"!==this.resizable.style.height?this.resizable.offsetHeight:n,this.resizable.style.position=o}return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,e=this.props.size,i=function(e){var i;if(void 0===t.state[e]||"auto"===t.state[e])return"auto";if(t.propsSize&&t.propsSize[e]&&(null===(i=t.propsSize[e])||void 0===i?void 0:i.toString().endsWith("%"))){if(t.state[e].toString().endsWith("%"))return t.state[e].toString();var n=t.getParentSize();return Number(t.state[e].toString().replace("px",""))/n[e]*100+"%"}return P(t.state[e])};return{width:e&&void 0!==e.width&&!this.state.isResizing?P(e.width):i("width"),height:e&&void 0!==e.height&&!this.state.isResizing?P(e.height):i("height")}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var e=!1,i=this.parentNode.style.flexWrap;"wrap"!==i&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var n={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=i),this.removeBase(t),n},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(this.resizable&&this.window){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==t.flexBasis?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,e){var i=this.propsSize&&this.propsSize[e];return"auto"===this.state[e]&&this.state.original[e]===t&&(void 0===i||"auto"===i)?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,e){var i,n,o=this.props.boundsByDirection,r=this.state.direction,s=o&&x("left",r),a=o&&x("top",r);if("parent"===this.props.bounds){var l=this.parentNode;l&&(i=s?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),n=a?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(i=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,n=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(i=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),n=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return i&&Number.isFinite(i)&&(t=t&&t<i?t:i),n&&Number.isFinite(n)&&(e=e&&e<n?e:n),{maxWidth:t,maxHeight:e}},e.prototype.calculateNewSizeFromDirection=function(t,e){var i,n=this.props.scale||1,o=Array.isArray(i=this.props.resizeRatio||1)?i:[i,i],r=o[0],s=o[1],a=this.state,l=a.direction,h=a.original,p=this.props,c=p.lockAspectRatio,u=p.lockAspectRatioExtraHeight,d=p.lockAspectRatioExtraWidth,f=h.width,m=h.height,g=u||0,v=d||0;return x("right",l)&&(f=h.width+(t-h.x)*r/n,c&&(m=(f-v)/this.ratio+g)),x("left",l)&&(f=h.width-(t-h.x)*r/n,c&&(m=(f-v)/this.ratio+g)),x("bottom",l)&&(m=h.height+(e-h.y)*s/n,c&&(f=(m-g)*this.ratio+v)),x("top",l)&&(m=h.height-(e-h.y)*s/n,c&&(f=(m-g)*this.ratio+v)),{newWidth:f,newHeight:m}},e.prototype.calculateNewSizeFromAspectRatio=function(t,e,i,n){var o=this.props,r=o.lockAspectRatio,s=o.lockAspectRatioExtraHeight,a=o.lockAspectRatioExtraWidth,l=void 0===n.width?10:n.width,h=void 0===i.width||i.width<0?t:i.width,p=void 0===n.height?10:n.height,c=void 0===i.height||i.height<0?e:i.height,u=s||0,d=a||0;if(r){var f=(p-u)*this.ratio+d,m=(c-u)*this.ratio+d,g=(l-d)/this.ratio+u,v=(h-d)/this.ratio+u;t=b(t,Math.max(l,f),Math.min(h,m)),e=b(e,Math.max(p,g),Math.min(c,v))}else t=b(t,l,h),e=b(e,p,c);return{newWidth:t,newHeight:e}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if("parent"===this.props.bounds){var e=this.parentNode;if(e){var i=e.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left*t,this.targetTop=n.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),r=o.left,s=o.top,a=o.right,l=o.bottom;this.resizableLeft=r*t,this.resizableRight=a*t,this.resizableTop=s*t,this.resizableBottom=l*t}},e.prototype.onResizeStart=function(t,e){if(this.resizable&&this.window){var i,n,o=0,r=0;if(t.nativeEvent&&((i=t.nativeEvent).clientX||0===i.clientX)&&(i.clientY||0===i.clientY)?(o=t.nativeEvent.clientX,r=t.nativeEvent.clientY):t.nativeEvent&&_(t.nativeEvent)&&(o=t.nativeEvent.touches[0].clientX,r=t.nativeEvent.touches[0].clientY),!this.props.onResizeStart||!this.resizable||!1!==this.props.onResizeStart(t,e,this.resizable)){this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var s=this.window.getComputedStyle(this.resizable);if("auto"!==s.flexBasis){var a=this.parentNode;if(a){var l=this.window.getComputedStyle(a).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",n=s.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var h={original:{x:o,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:v(v({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:e,flexBasis:n};this.setState(h)}}},e.prototype.onMouseMove=function(t){var e,i,n,o,r,s,a=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&_(t))try{t.preventDefault(),t.stopPropagation()}catch(t){}var h=this.props,p=h.maxWidth,c=h.maxHeight,u=h.minWidth,d=h.minHeight,f=_(t)?t.touches[0].clientX:t.clientX,m=_(t)?t.touches[0].clientY:t.clientY,g=this.state,v=g.direction,y=g.original,b=g.width,x=g.height,P=this.getParentSize(),E=(e=this.window.innerWidth,i=this.window.innerHeight,n=p,o=c,r=u,s=d,n=M(n,P.width,e,i),o=M(o,P.height,e,i),r=M(r,P.width,e,i),s=M(s,P.height,e,i),{maxWidth:void 0===n?void 0:Number(n),maxHeight:void 0===o?void 0:Number(o),minWidth:void 0===r?void 0:Number(r),minHeight:void 0===s?void 0:Number(s)});p=E.maxWidth,c=E.maxHeight,u=E.minWidth,d=E.minHeight;var D=this.calculateNewSizeFromDirection(f,m),T=D.newHeight,z=D.newWidth,I=this.calculateNewMaxFromBoundary(p,c);this.props.snap&&this.props.snap.x&&(z=S(z,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(T=S(T,this.props.snap.y,this.props.snapGap));var R=this.calculateNewSizeFromAspectRatio(z,T,{width:I.maxWidth,height:I.maxHeight},{width:u,height:d});if(z=R.newWidth,T=R.newHeight,this.props.grid){var N=w(z,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),A=w(T,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,k=0===C||Math.abs(N-z)<=C?N:z,O=0===C||Math.abs(A-T)<=C?A:T;z=k,T=O}var j={width:z-y.width,height:T-y.height};if(b&&"string"==typeof b){if(b.endsWith("%")){var L=z/P.width*100;z=L+"%"}else if(b.endsWith("vw")){var H=z/this.window.innerWidth*100;z=H+"vw"}else if(b.endsWith("vh")){var F=z/this.window.innerHeight*100;z=F+"vh"}}if(x&&"string"==typeof x){if(x.endsWith("%")){var L=T/P.height*100;T=L+"%"}else if(x.endsWith("vw")){var H=T/this.window.innerWidth*100;T=H+"vw"}else if(x.endsWith("vh")){var F=T/this.window.innerHeight*100;T=F+"vh"}}var W={width:this.createSizeForCssProperty(z,"width"),height:this.createSizeForCssProperty(T,"height")};"row"===this.flexDir?W.flexBasis=W.width:"column"===this.flexDir&&(W.flexBasis=W.height);var X=this.state.width!==W.width,Z=this.state.height!==W.height,U=this.state.flexBasis!==W.flexBasis,Y=X||Z||U;Y&&(0,l.flushSync)(function(){a.setState(W)}),this.props.onResize&&Y&&this.props.onResize(t,v,this.resizable,j)}},e.prototype.onMouseUp=function(t){var e,i,n=this.state,o=n.isResizing,r=n.direction,s=n.original;if(o&&this.resizable){var a={width:this.size.width-s.width,height:this.size.height-s.height};this.props.onResizeStop&&this.props.onResizeStop(t,r,this.resizable,a),this.props.size&&this.setState({width:null!==(e=this.props.size.width)&&void 0!==e?e:"auto",height:null!==(i=this.props.size.height)&&void 0!==i?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:v(v({},this.state.backgroundStyle),{cursor:"auto"})})}},e.prototype.updateSize=function(t){var e,i;this.setState({width:null!==(e=t.width)&&void 0!==e?e:"auto",height:null!==(i=t.height)&&void 0!==i?i:"auto"})},e.prototype.renderResizer=function(){var t=this,e=this.props,i=e.enable,n=e.handleStyles,o=e.handleClasses,s=e.handleWrapperStyle,a=e.handleWrapperClass,l=e.handleComponent;if(!i)return null;var h=Object.keys(i).map(function(e){return!1!==i[e]?r.createElement(m,{key:e,direction:e,onResizeStart:t.onResizeStart,replaceStyles:n&&n[e],className:o&&o[e]},l&&l[e]?l[e]:null):null});return r.createElement("div",{className:a,style:s},h)},e.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce(function(e,i){return -1!==E.indexOf(i)||(e[i]=t.props[i]),e},{}),i=v(v(v({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var n=this.props.as||"div";return r.createElement(n,v({style:i,className:this.props.className},e,{ref:function(e){e&&(t.resizable=e)}}),this.state.isResizing&&r.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(r.PureComponent),z=function(t,e){return(z=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},I=function(){return(I=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},R={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},N=function(t){function e(e){var i=t.call(this,e)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:e.maxWidth,maxHeight:e.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return!function(t,e){function i(){this.constructor=t}z(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,e=t.left,i=t.top,n=this.getDraggablePosition(),o=n.x,r=n.y;this.draggable.setState({x:o-e,y:r-i}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state;return{x:t.x,y:t.y}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){return{maxWidth:void 0===this.props.maxWidth?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:void 0===this.props.maxHeight?Number.MAX_SAFE_INTEGER:this.props.maxHeight}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/e;case"body":return document.body.offsetHeight/e;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/e;case"body":return document.body.offsetWidth/e;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,e){this.props.onDragStart&&this.props.onDragStart(t,e);var i,n=this.getDraggablePosition();if(this.originalPosition=n,this.props.bounds){var o=this.getParent(),r=this.props.scale;if("parent"===this.props.bounds)i=o;else if("body"===this.props.bounds){var s=o.getBoundingClientRect(),a=s.left,l=s.top,h=document.body.getBoundingClientRect(),p=-(a-o.offsetLeft*r-h.left)/r,c=-(l-o.offsetTop*r-h.top)/r,u=(document.body.offsetWidth-this.resizable.size.width*r)/r+p,d=(document.body.offsetHeight-this.resizable.size.height*r)/r+c;return this.setState({bounds:{top:c,right:u,bottom:d,left:p}})}else if("window"===this.props.bounds){if(!this.resizable)return;var f=o.getBoundingClientRect(),m=f.left,g=f.top,v=-(m-o.offsetLeft*r)/r,y=-(g-o.offsetTop*r)/r,u=(window.innerWidth-this.resizable.size.width*r)/r+v,d=(window.innerHeight-this.resizable.size.height*r)/r+y;return this.setState({bounds:{top:y,right:u,bottom:d,left:v}})}else"string"==typeof this.props.bounds?i=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(i=this.props.bounds);if(i instanceof HTMLElement&&o instanceof HTMLElement){var b=i.getBoundingClientRect(),w=b.left,x=b.top,_=o.getBoundingClientRect(),S=_.left,P=_.top,M=(w-S)/r,E=x-P;if(this.resizable){this.updateOffsetFromParent();var D=this.offsetFromParent;this.setState({bounds:{top:E-D.top,right:M+(i.offsetWidth-this.resizable.size.width)-D.left/r,bottom:E+(i.offsetHeight-this.resizable.size.height)-D.top,left:M-D.left/r}})}}}},e.prototype.onDrag=function(t,e){if(this.props.onDrag){var i=this.offsetFromParent,n=i.left,o=i.top;if(!this.props.dragAxis||"both"===this.props.dragAxis)return this.props.onDrag(t,I(I({},e),{x:e.x+n,y:e.y+o}));if("x"===this.props.dragAxis)return this.props.onDrag(t,I(I({},e),{x:e.x+n,y:this.originalPosition.y+o,deltaY:0}));if("y"===this.props.dragAxis)return this.props.onDrag(t,I(I({},e),{x:this.originalPosition.x+n,y:e.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,e){if(this.props.onDragStop){var i=this.offsetFromParent,n=i.left,o=i.top;if(!this.props.dragAxis||"both"===this.props.dragAxis)return this.props.onDragStop(t,I(I({},e),{x:e.x+n,y:e.y+o}));if("x"===this.props.dragAxis)return this.props.onDragStop(t,I(I({},e),{x:e.x+n,y:this.originalPosition.y+o,deltaY:0}));if("y"===this.props.dragAxis)return this.props.onDragStop(t,I(I({},e),{x:this.originalPosition.x+n,y:e.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,e,i){t.stopPropagation(),this.setState({resizing:!0});var n=this.props.scale,o=this.offsetFromParent,r=this.getDraggablePosition();if(this.resizingPosition={x:r.x+o.left,y:r.y+o.top},this.originalPosition=r,this.props.bounds){var s=this.getParent(),a=void 0;"parent"===this.props.bounds?a=s:"body"===this.props.bounds?a=document.body:"window"===this.props.bounds?a=window:"string"==typeof this.props.bounds?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);var l=this.getSelfElement();if(l instanceof Element&&(a instanceof HTMLElement||a===window)&&s instanceof HTMLElement){var h=this.getMaxSizesFromProps(),p=h.maxWidth,c=h.maxHeight,u=this.getParentSize();if(p&&"string"==typeof p){if(p.endsWith("%")){var d=Number(p.replace("%",""))/100;p=u.width*d}else p.endsWith("px")&&(p=Number(p.replace("px","")))}if(c&&"string"==typeof c){if(c.endsWith("%")){var d=Number(c.replace("%",""))/100;c=u.height*d}else c.endsWith("px")&&(c=Number(c.replace("px","")))}var f=l.getBoundingClientRect(),m=f.left,g=f.top,v="window"===this.props.bounds?{left:0,top:0}:a.getBoundingClientRect(),y=v.left,b=v.top,w=this.getOffsetWidth(a),x=this.getOffsetHeight(a),_=e.toLowerCase().endsWith("left"),S=e.toLowerCase().endsWith("right"),P=e.startsWith("top"),M=e.startsWith("bottom");if((_||P)&&this.resizable){var E=(m-y)/n+this.resizable.size.width;this.setState({maxWidth:E>Number(p)?p:E})}if(S||this.props.lockAspectRatio&&!_&&!P){var E=w+(y-m)/n;this.setState({maxWidth:E>Number(p)?p:E})}if((P||_)&&this.resizable){var E=(g-b)/n+this.resizable.size.height;this.setState({maxHeight:E>Number(c)?c:E})}if(M||this.props.lockAspectRatio&&!P&&!_){var E=x+(b-g)/n;this.setState({maxHeight:E>Number(c)?c:E})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,e,i)},e.prototype.onResize=function(t,e,i,n){var o=this,r={x:this.originalPosition.x,y:this.originalPosition.y},s=-n.width,a=-n.height;["top","left","topLeft","bottomLeft","topRight"].includes(e)&&("bottomLeft"===e?r.x+=s:("topRight"===e||(r.x+=s),r.y+=a));var h=this.draggable.state;(r.x!==h.x||r.y!==h.y)&&(0,l.flushSync)(function(){o.draggable.setState(r)}),this.updateOffsetFromParent();var p=this.offsetFromParent,c=this.getDraggablePosition().x+p.left,u=this.getDraggablePosition().y+p.top;this.resizingPosition={x:c,y:u},this.props.onResize&&this.props.onResize(t,e,i,n,{x:c,y:u})},e.prototype.onResizeStop=function(t,e,i,n){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),r=o.maxWidth,s=o.maxHeight;this.setState({maxWidth:r,maxHeight:s}),this.props.onResizeStop&&this.props.onResizeStop(t,e,i,n,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,e=this.getParent(),i=this.getSelfElement();if(!e||null===i)return{top:0,left:0};var n=e.getBoundingClientRect(),o=n.left,r=n.top,s=i.getBoundingClientRect(),a=this.getDraggablePosition(),l=e.scrollLeft,h=e.scrollTop;this.offsetFromParent={left:s.left-o+l-a.x*t,top:s.top-r+h-a.y*t}},e.prototype.render=function(){var t,e=this,i=this.props,n=i.disableDragging,o=i.style,s=i.dragHandleClassName,l=i.position,h=i.onMouseDown,p=i.onMouseUp,c=i.dragAxis,u=i.dragGrid,d=i.bounds,f=i.enableUserSelectHack,m=i.cancel,g=i.children,v=(i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop,i.resizeHandleStyles),y=i.resizeHandleClasses,b=i.resizeHandleComponent,w=i.enableResizing,x=i.resizeGrid,_=i.resizeHandleWrapperClass,S=i.resizeHandleWrapperStyle,P=i.scale,M=i.allowAnyClick,E=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)0>e.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]]);return i}(i,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),D=this.props.default?I({},this.props.default):void 0;delete E.default;var z=I(I(I({},R),n||s?{cursor:"auto"}:{cursor:"move"}),o),N=this.offsetFromParent,A=N.left,C=N.top;l&&(t={x:l.x-A,y:l.y-C});var k=this.state.resizing?void 0:t,O=this.state.resizing?"both":c;return(0,r.createElement)(a(),{ref:function(t){t&&(e.draggable=t)},handle:s?".".concat(s):void 0,defaultPosition:D,onMouseDown:h,onMouseUp:p,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:O,disabled:n,grid:u,bounds:d?this.state.bounds:void 0,position:k,enableUserSelectHack:f,cancel:m,scale:P,allowAnyClick:M,nodeRef:this.resizableElement},(0,r.createElement)(T,I({},E,{ref:function(t){t&&(e.resizable=t,e.resizableElement.current=t.resizable)},defaultSize:D,size:this.props.size,enable:"boolean"==typeof w?{bottom:w,bottomLeft:w,bottomRight:w,left:w,right:w,top:w,topLeft:w,topRight:w}:w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:z,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:x,handleWrapperClass:_,handleWrapperStyle:S,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:v,handleClasses:y,handleComponent:b,scale:this.props.scale}),g))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(r.PureComponent)},1516:function(t,e,i){"use strict";i.d(e,{Z:function(){return l}});for(var n,o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},r=new Uint8Array(16),s=[],a=0;a<256;++a)s.push((a+256).toString(16).slice(1));var l=function(t,e,i){if(o.randomUUID&&!e&&!t)return o.randomUUID();var a=(t=t||{}).random||(t.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){i=i||0;for(var l=0;l<16;++l)e[i+l]=a[l];return e}return function(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}(a)}},86657:function(t,e){"use strict";var i,n,o;"undefined"!=typeof self&&self,o=function(t){t.addBackToTop=function(){var t,e,i,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o.backgroundColor,s=o.cornerOffset,a=void 0===s?20:s,l=o.diameter,h=o.ease,p=void 0===h?function(t){return .5*(1-Math.cos(Math.PI*t))}:h,c=o.id,u=void 0===c?"back-to-top":c,d=o.innerHTML,f=o.onClickScrollTo,m=void 0===f?0:f,g=o.scrollContainer,v=void 0===g?document.body:g,y=o.scrollDuration,b=void 0===y?100:y,w=o.showWhenScrollTopIs,x=void 0===w?1:w,_=o.size,S=void 0===_?void 0===l?56:l:_,P=o.textColor,M=o.zIndex,E=v===document.body,D=E&&document.documentElement;t=Math.round(.43*S),e="#"+u+"{background:"+(void 0===r?"#000":r)+";-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;bottom:"+a+"px;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26);color:"+(void 0===P?"#fff":P)+";cursor:pointer;display:block;height:"+S+"px;opacity:1;outline:0;position:fixed;right:"+a+"px;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-transition:bottom .2s,opacity .2s;-o-transition:bottom .2s,opacity .2s;-moz-transition:bottom .2s,opacity .2s;transition:bottom .2s,opacity .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:"+S+"px;z-index:"+(void 0===M?1:M)+"}#"+u+" svg{display:block;fill:currentColor;height:"+t+"px;margin:"+Math.round(.29*S)+"px auto 0;width:"+t+"px}#"+u+".hidden{bottom:-"+S+"px;opacity:0}",(i=document.createElement("style")).appendChild(document.createTextNode(e)),document.head.insertAdjacentElement("afterbegin",i);var T=((n=document.createElement("div")).id=u,n.className="hidden",n.innerHTML=void 0===d?'<svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg>':d,n.addEventListener("click",function(t){t.preventDefault(),function(){var t="function"==typeof m?m():m,e=window,i=e.performance,n=e.requestAnimationFrame;if(b<=0||void 0===i||void 0===n)return N(t);var o=i.now(),r=R(),s=r-t;n(function t(e){var i=Math.min((e-o)/b,1);N(r-Math.round(p(i)*s)),i<1&&n(t)})}()}),document.body.appendChild(n),n),z=!0;function I(){R()>=x?z&&(T.className="",z=!1):z||(T.className="hidden",z=!0)}function R(){return v.scrollTop||D&&document.documentElement.scrollTop||0}function N(t){v.scrollTop=t,D&&(document.documentElement.scrollTop=t)}(E?window:v).addEventListener("scroll",I),I()}},i=[e],void 0!==(n=o.apply(e,i))&&(t.exports=n)},53778:function(t,e,i){"use strict";var n=i(10707);e.Z=function(t){return(0,n.Z)(t,5)}},33715:function(t,e,i){"use strict";i.d(e,{z:function(){return d}});var n=i(54028);let o={type:"change"},r={type:"start"},s={type:"end"},a=new n.zHn,l=new n.JOQ,h=Math.cos(70*n.M8C.DEG2RAD),p=new n.Pa4,c=2*Math.PI,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};class d extends n.ZXd{constructor(t,e=null){super(t,e),this.state=u.NONE,this.enabled=!0,this.target=new n.Pa4,this.cursor=new n.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:n.RsA.ROTATE,MIDDLE:n.RsA.DOLLY,RIGHT:n.RsA.PAN},this.touches={ONE:n.QmN.ROTATE,TWO:n.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new n.Pa4,this._lastQuaternion=new n._fP,this._lastTargetPosition=new n.Pa4,this._quat=new n._fP().setFromUnitVectors(t.up,new n.Pa4(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new n.$V,this._sphericalDelta=new n.$V,this._scale=1,this._panOffset=new n.Pa4,this._rotateStart=new n.FM8,this._rotateEnd=new n.FM8,this._rotateDelta=new n.FM8,this._panStart=new n.FM8,this._panEnd=new n.FM8,this._panDelta=new n.FM8,this._dollyStart=new n.FM8,this._dollyEnd=new n.FM8,this._dollyDelta=new n.FM8,this._dollyDirection=new n.Pa4,this._mouse=new n.FM8,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=m.bind(this),this._onPointerDown=f.bind(this),this._onPointerUp=g.bind(this),this._onContextMenu=S.bind(this),this._onMouseWheel=b.bind(this),this._onKeyDown=w.bind(this),this._onTouchStart=x.bind(this),this._onTouchMove=_.bind(this),this._onMouseDown=v.bind(this),this._onMouseMove=y.bind(this),this._interceptControlDown=P.bind(this),this._interceptControlUp=M.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(o),this.update(),this.state=u.NONE}update(t=null){let e=this.object.position;p.copy(e).sub(this.target),p.applyQuaternion(this._quat),this._spherical.setFromVector3(p),this.autoRotate&&this.state===u.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=c:i>Math.PI&&(i-=c),r<-Math.PI?r+=c:r>Math.PI&&(r-=c),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let t=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=t!=this._spherical.radius}if(p.setFromSpherical(this._spherical),p.applyQuaternion(this._quatInverse),e.copy(this.target).add(p),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let t=null;if(this.object.isPerspectiveCamera){let e=p.length();t=this._clampDistance(e*this._scale);let i=e-t;this.object.position.addScaledVector(this._dollyDirection,i),this.object.updateMatrixWorld(),s=!!i}else if(this.object.isOrthographicCamera){let e=new n.Pa4(this._mouse.x,this._mouse.y,0);e.unproject(this.object);let i=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=i!==this.object.zoom;let o=new n.Pa4(this._mouse.x,this._mouse.y,0);o.unproject(this.object),this.object.position.sub(o).add(e),this.object.updateMatrixWorld(),t=p.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(t).add(this.object.position):(a.origin.copy(this.object.position),a.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(a.direction))<h?this.object.lookAt(this.target):(l.setFromNormalAndCoplanarPoint(this.object.up,this.target),a.intersectPlane(l,this.target))))}else if(this.object.isOrthographicCamera){let t=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),t!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,!!(s||this._lastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>1e-6||this._lastTargetPosition.distanceToSquared(this.target)>1e-6)&&(this.dispatchEvent(o),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?c/60*this.autoRotateSpeed*t:c/60/60*this.autoRotateSpeed}_getZoomScale(t){return Math.pow(.95,this.zoomSpeed*Math.abs(.01*t))}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){p.setFromMatrixColumn(e,0),p.multiplyScalar(-t),this._panOffset.add(p)}_panUp(t,e){!0===this.screenSpacePanning?p.setFromMatrixColumn(e,1):(p.setFromMatrixColumn(e,0),p.crossVectors(this.object.up,p)),p.multiplyScalar(t),this._panOffset.add(p)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let n=this.object.position;p.copy(n).sub(this.target);let o=p.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*o/i.clientHeight,this.object.matrix),this._panUp(2*e*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),n=t-i.left,o=e-i.top,r=i.width,s=i.height;this._mouse.x=n/r*2-1,this._mouse.y=-(o/s*2)+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(c*this._rotateDelta.x/e.clientHeight),this._rotateUp(c*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(c*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-c*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(c*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-c*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateStart.set(i,n)}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panStart.set(i,n)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y;this._dollyStart.set(0,Math.sqrt(i*i+n*n))}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateEnd.set(i,n)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(c*this._rotateDelta.x/e.clientHeight),this._rotateUp(c*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panEnd.set(i,n)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y;this._dollyEnd.set(0,Math.sqrt(i*i+n*n)),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let o=(t.pageX+e.x)*.5,r=(t.pageY+e.y)*.5;this._updateZoomParameters(o,r)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];void 0===e&&(e=new n.FM8,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function f(t){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(t)||(this._addPointer(t),"touch"===t.pointerType?this._onTouchStart(t):this._onMouseDown(t)))}function m(t){!1!==this.enabled&&("touch"===t.pointerType?this._onTouchMove(t):this._onMouseMove(t))}function g(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(s),this.state=u.NONE;break;case 1:let e=this._pointers[0],i=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:i.x,pageY:i.y})}}function v(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case n.RsA.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(t),this.state=u.DOLLY;break;case n.RsA.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=u.PAN}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=u.ROTATE}break;case n.RsA.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=u.ROTATE}else{if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=u.PAN}break;default:this.state=u.NONE}this.state!==u.NONE&&this.dispatchEvent(r)}function y(t){switch(this.state){case u.ROTATE:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(t);break;case u.DOLLY:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(t);break;case u.PAN:if(!1===this.enablePan)return;this._handleMouseMovePan(t)}}function b(t){!1!==this.enabled&&!1!==this.enableZoom&&this.state===u.NONE&&(t.preventDefault(),this.dispatchEvent(r),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(s))}function w(t){!1!==this.enabled&&this._handleKeyDown(t)}function x(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case n.QmN.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(t),this.state=u.TOUCH_ROTATE;break;case n.QmN.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(t),this.state=u.TOUCH_PAN;break;default:this.state=u.NONE}break;case 2:switch(this.touches.TWO){case n.QmN.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(t),this.state=u.TOUCH_DOLLY_PAN;break;case n.QmN.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(t),this.state=u.TOUCH_DOLLY_ROTATE;break;default:this.state=u.NONE}break;default:this.state=u.NONE}this.state!==u.NONE&&this.dispatchEvent(r)}function _(t){switch(this._trackPointer(t),this.state){case u.TOUCH_ROTATE:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(t),this.update();break;case u.TOUCH_PAN:if(!1===this.enablePan)return;this._handleTouchMovePan(t),this.update();break;case u.TOUCH_DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(t),this.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=u.NONE}}function S(t){!1!==this.enabled&&t.preventDefault()}function P(t){"Control"===t.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M(t){"Control"===t.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}},87970:function(t,e,i){"use strict";i.d(e,{Ys:function(){return d}});var n=i(54028);let o=new n.iMs,r=new n.Pa4,s=new n.Pa4,a=new n._fP,l={X:new n.Pa4(1,0,0),Y:new n.Pa4(0,1,0),Z:new n.Pa4(0,0,1)},h={type:"change"},p={type:"mouseDown",mode:null},c={type:"mouseUp",mode:null},u={type:"objectChange"};class d extends n.ZXd{constructor(t,e=null){super(void 0,e);let i=new C(this);this._root=i;let o=new k;this._gizmo=o,i.add(o);let r=new O;this._plane=r,i.add(r);let s=this;function a(t,e){let i=e;Object.defineProperty(s,t,{get:function(){return void 0!==i?i:e},set:function(e){i!==e&&(i=e,r[t]=e,o[t]=e,s.dispatchEvent({type:t+"-changed",value:e}),s.dispatchEvent(h))}}),s[t]=e,r[t]=e,o[t]=e}a("camera",t),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0),a("minX",-1/0),a("maxX",1/0),a("minY",-1/0),a("maxY",1/0),a("minZ",-1/0),a("maxZ",1/0);let l=new n.Pa4,p=new n.Pa4,c=new n._fP,u=new n._fP,d=new n.Pa4,b=new n._fP,w=new n.Pa4,x=new n.Pa4,_=new n.Pa4,S=new n.Pa4;a("worldPosition",l),a("worldPositionStart",p),a("worldQuaternion",c),a("worldQuaternionStart",u),a("cameraPosition",d),a("cameraQuaternion",b),a("pointStart",w),a("pointEnd",x),a("rotationAxis",_),a("rotationAngle",0),a("eye",S),this._offset=new n.Pa4,this._startNorm=new n.Pa4,this._endNorm=new n.Pa4,this._cameraScale=new n.Pa4,this._parentPosition=new n.Pa4,this._parentQuaternion=new n._fP,this._parentQuaternionInv=new n._fP,this._parentScale=new n.Pa4,this._worldScaleStart=new n.Pa4,this._worldQuaternionInv=new n._fP,this._worldScale=new n.Pa4,this._positionStart=new n.Pa4,this._quaternionStart=new n._fP,this._scaleStart=new n.Pa4,this._getPointer=f.bind(this),this._onPointerDown=g.bind(this),this._onPointerHover=m.bind(this),this._onPointerMove=v.bind(this),this._onPointerUp=y.bind(this),null!==e&&this.connect()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}getHelper(){return this._root}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;null!==t&&o.setFromCamera(t,this.camera);let e=b(this._gizmo.picker[this.mode],o);e?this.axis=e.object.name:this.axis=null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&(null==t||0===t.button)&&null!==this.axis){null!==t&&o.setFromCamera(t,this.camera);let e=b(this._plane,o,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,p.mode=this.mode,this.dispatchEvent(p)}}pointerMove(t){let e=this.axis,i=this.mode,n=this.object,p=this.space;if("scale"===i?p="local":("E"===e||"XYZE"===e||"XYZ"===e)&&(p="world"),void 0===n||null===e||!1===this.dragging||null!==t&&-1!==t.button)return;null!==t&&o.setFromCamera(t,this.camera);let c=b(this._plane,o,!0);if(c){if(this.pointEnd.copy(c.point).sub(this.worldPositionStart),"translate"===i)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===p&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===p&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),n.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===p&&(n.position.applyQuaternion(a.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(this._quaternionStart)),"world"===p&&(n.parent&&n.position.add(r.setFromMatrixPosition(n.parent.matrixWorld)),-1!==e.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(r.setFromMatrixPosition(n.parent.matrixWorld)))),n.position.x=Math.max(this.minX,Math.min(this.maxX,n.position.x)),n.position.y=Math.max(this.minY,Math.min(this.maxY,n.position.y)),n.position.z=Math.max(this.minZ,Math.min(this.maxZ,n.position.z));else if("scale"===i){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();0>this.pointEnd.dot(this.pointStart)&&(t*=-1),s.set(t,t,t)}else r.copy(this.pointStart),s.copy(this.pointEnd),r.applyQuaternion(this._worldQuaternionInv),s.applyQuaternion(this._worldQuaternionInv),s.divide(r),-1===e.search("X")&&(s.x=1),-1===e.search("Y")&&(s.y=1),-1===e.search("Z")&&(s.z=1);n.scale.copy(this._scaleStart).multiply(s),this.scaleSnap&&(-1!==e.search("X")&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===i){this._offset.copy(this.pointEnd).sub(this.pointStart);let t=20/this.worldPosition.distanceTo(r.setFromMatrixPosition(this.camera.matrixWorld)),i=!1;"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(r.copy(this.rotationAxis).cross(this.eye))*t):("X"===e||"Y"===e||"Z"===e)&&(this.rotationAxis.copy(l[e]),r.copy(l[e]),"local"===p&&r.applyQuaternion(this.worldQuaternion),r.cross(this.eye),0===r.length()?i=!0:this.rotationAngle=this._offset.dot(r.normalize())*t),("E"===e||i)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=0>this._endNorm.cross(this._startNorm).dot(this.eye)?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===p&&"E"!==e&&"XYZE"!==e?(n.quaternion.copy(this._quaternionStart),n.quaternion.multiply(a.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),n.quaternion.copy(a.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),n.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(h),this.dispatchEvent(u)}}pointerUp(t){(null===t||0===t.button)&&(this.dragging&&null!==this.axis&&(c.mode=this.mode,this.dispatchEvent(c)),this.dragging=!1,this.axis=null)}dispose(){this.disconnect(),this._root.dispose()}attach(t){return this.object=t,this._root.visible=!0,this}detach(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(h),this.dispatchEvent(u),this.pointStart.copy(this.pointEnd))}getRaycaster(){return o}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}}function f(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{let e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function m(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function g(t){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function v(t){this.enabled&&this.pointerMove(this._getPointer(t))}function y(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function b(t,e,i){let n=e.intersectObject(t,!0);for(let t=0;t<n.length;t++)if(n[t].object.visible||i)return n[t];return!1}let w=new n.USm,x=new n.Pa4(0,1,0),_=new n.Pa4(0,0,0),S=new n.yGw,P=new n._fP,M=new n._fP,E=new n.Pa4,D=new n.yGw,T=new n.Pa4(1,0,0),z=new n.Pa4(0,1,0),I=new n.Pa4(0,0,1),R=new n.Pa4,N=new n.Pa4,A=new n.Pa4;class C extends n.Tme{constructor(t){super(),this.isTransformControlsRoot=!0,this.controls=t,this.visible=!1}updateMatrixWorld(t){let e=this.controls;void 0!==e.object&&(e.object.updateMatrixWorld(),null===e.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):e.object.parent.matrixWorld.decompose(e._parentPosition,e._parentQuaternion,e._parentScale),e.object.matrixWorld.decompose(e.worldPosition,e.worldQuaternion,e._worldScale),e._parentQuaternionInv.copy(e._parentQuaternion).invert(),e._worldQuaternionInv.copy(e.worldQuaternion).invert()),e.camera.updateMatrixWorld(),e.camera.matrixWorld.decompose(e.cameraPosition,e.cameraQuaternion,e._cameraScale),e.camera.isOrthographicCamera?e.camera.getWorldDirection(e.eye).negate():e.eye.copy(e.cameraPosition).sub(e.worldPosition).normalize(),super.updateMatrixWorld(t)}dispose(){this.traverse(function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})}}class k extends n.Tme{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";let t=new n.vBJ({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new n.nls({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=t.clone();i.opacity=.15;let o=e.clone();o.opacity=.5;let r=t.clone();r.color.setHex(16711680);let s=t.clone();s.color.setHex(65280);let a=t.clone();a.color.setHex(255);let l=t.clone();l.color.setHex(16711680),l.opacity=.5;let h=t.clone();h.color.setHex(65280),h.opacity=.5;let p=t.clone();p.color.setHex(255),p.opacity=.5;let c=t.clone();c.opacity=.25;let u=t.clone();u.color.setHex(16776960),u.opacity=.25,t.clone().color.setHex(16776960);let d=t.clone();d.color.setHex(7895160);let f=new n.fHI(0,.04,.1,12);f.translate(0,.05,0);let m=new n.DvJ(.08,.08,.08);m.translate(0,.04,0);let g=new n.u9r;g.setAttribute("position",new n.a$l([0,0,0,1,0,0],3));let v=new n.fHI(.0075,.0075,.5,3);function y(t,e){let i=new n.XvJ(t,.0075,3,64,e*Math.PI*2);return i.rotateY(Math.PI/2),i.rotateX(Math.PI/2),i}v.translate(0,.25,0);let b={X:[[new n.Kj0(f,r),[.5,0,0],[0,0,-Math.PI/2]],[new n.Kj0(f,r),[-.5,0,0],[0,0,Math.PI/2]],[new n.Kj0(v,r),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Kj0(f,s),[0,.5,0]],[new n.Kj0(f,s),[0,-.5,0],[Math.PI,0,0]],[new n.Kj0(v,s)]],Z:[[new n.Kj0(f,a),[0,0,.5],[Math.PI/2,0,0]],[new n.Kj0(f,a),[0,0,-.5],[-Math.PI/2,0,0]],[new n.Kj0(v,a),null,[Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.pQR(.1,0),c.clone()),[0,0,0]]],XY:[[new n.Kj0(new n.DvJ(.15,.15,.01),p.clone()),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},w={X:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,.3,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.pQR(.2,0),i)]],XY:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},x={START:[[new n.Kj0(new n.pQR(.01,2),o),null,null,null,"helper"]],END:[[new n.Kj0(new n.pQR(.01,2),o),null,null,null,"helper"]],DELTA:[[new n.x12(function(){let t=new n.u9r;return t.setAttribute("position",new n.a$l([0,0,0,1,1,1],3)),t}(),o),null,null,null,"helper"]],X:[[new n.x12(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.x12(g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.x12(g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},_={XYZE:[[new n.Kj0(y(.5,1),d),null,[0,Math.PI/2,0]]],X:[[new n.Kj0(y(.5,.5),r)]],Y:[[new n.Kj0(y(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new n.Kj0(y(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new n.Kj0(y(.75,1),u),null,[0,Math.PI/2,0]]]},S={AXIS:[[new n.x12(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},P={XYZE:[[new n.Kj0(new n.xo$(.25,10,8),i)]],X:[[new n.Kj0(new n.XvJ(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new n.Kj0(new n.XvJ(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new n.Kj0(new n.XvJ(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new n.Kj0(new n.XvJ(.75,.1,2,24),i)]]},M={X:[[new n.Kj0(m,r),[.5,0,0],[0,0,-Math.PI/2]],[new n.Kj0(v,r),[0,0,0],[0,0,-Math.PI/2]],[new n.Kj0(m,r),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new n.Kj0(m,s),[0,.5,0]],[new n.Kj0(v,s)],[new n.Kj0(m,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new n.Kj0(m,a),[0,0,.5],[Math.PI/2,0,0]],[new n.Kj0(v,a),[0,0,0],[Math.PI/2,0,0]],[new n.Kj0(m,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new n.Kj0(new n.DvJ(.15,.15,.01),p),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.15,.15,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.DvJ(.1,.1,.1),c.clone())]]},E={X:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,.3,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new n.Kj0(new n.fHI(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n.DvJ(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.DvJ(.2,.2,.2),i),[0,0,0]]]},D={X:[[new n.x12(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.x12(g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.x12(g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function T(t){let e=new n.Tme;for(let i in t)for(let n=t[i].length;n--;){let o=t[i][n][0].clone(),r=t[i][n][1],s=t[i][n][2],a=t[i][n][3],l=t[i][n][4];o.name=i,o.tag=l,r&&o.position.set(r[0],r[1],r[2]),s&&o.rotation.set(s[0],s[1],s[2]),a&&o.scale.set(a[0],a[1],a[2]),o.updateMatrix();let h=o.geometry.clone();h.applyMatrix4(o.matrix),o.geometry=h,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),e.add(o)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=T(b)),this.add(this.gizmo.rotate=T(_)),this.add(this.gizmo.scale=T(M)),this.add(this.picker.translate=T(w)),this.add(this.picker.rotate=T(P)),this.add(this.picker.scale=T(E)),this.add(this.helper.translate=T(x)),this.add(this.helper.rotate=T(S)),this.add(this.helper.scale=T(D)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){let e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:M;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let i=[];i=(i=(i=i.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(let t=0;t<i.length;t++){let n;let o=i[t];if(o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition),n=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(n*this.size/4),"helper"===o.tag){o.visible=!1,"AXIS"===o.name?(o.visible=!!this.axis,"X"===this.axis&&(a.setFromEuler(w.set(0,0,0)),o.quaternion.copy(e).multiply(a),Math.abs(x.copy(T).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),"Y"===this.axis&&(a.setFromEuler(w.set(0,0,Math.PI/2)),o.quaternion.copy(e).multiply(a),Math.abs(x.copy(z).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),"Z"===this.axis&&(a.setFromEuler(w.set(0,Math.PI/2,0)),o.quaternion.copy(e).multiply(a),Math.abs(x.copy(I).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),"XYZE"===this.axis&&(a.setFromEuler(w.set(0,Math.PI/2,0)),x.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(S.lookAt(_,x,z)),o.quaternion.multiply(a),o.visible=this.dragging),"E"===this.axis&&(o.visible=!1)):"START"===o.name?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):"END"===o.name?(o.position.copy(this.worldPosition),o.visible=this.dragging):"DELTA"===o.name?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),r.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),r.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(r),o.visible=this.dragging):(o.quaternion.copy(e),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=-1!==this.axis.search(o.name)));continue}o.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode?("X"===o.name&&Math.abs(x.copy(T).applyQuaternion(e).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Y"===o.name&&Math.abs(x.copy(z).applyQuaternion(e).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Z"===o.name&&Math.abs(x.copy(I).applyQuaternion(e).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XY"===o.name&&.2>Math.abs(x.copy(I).applyQuaternion(e).dot(this.eye))&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"YZ"===o.name&&.2>Math.abs(x.copy(T).applyQuaternion(e).dot(this.eye))&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XZ"===o.name&&.2>Math.abs(x.copy(z).applyQuaternion(e).dot(this.eye))&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):"rotate"===this.mode&&(P.copy(e),x.copy(this.eye).applyQuaternion(a.copy(e).invert()),-1!==o.name.search("E")&&o.quaternion.setFromRotationMatrix(S.lookAt(this.eye,_,z)),"X"===o.name&&(a.setFromAxisAngle(T,Math.atan2(-x.y,x.z)),a.multiplyQuaternions(P,a),o.quaternion.copy(a)),"Y"===o.name&&(a.setFromAxisAngle(z,Math.atan2(x.x,x.z)),a.multiplyQuaternions(P,a),o.quaternion.copy(a)),"Z"===o.name&&(a.setFromAxisAngle(I,Math.atan2(x.y,x.x)),a.multiplyQuaternions(P,a),o.quaternion.copy(a))),o.visible=o.visible&&(-1===o.name.indexOf("X")||this.showX),o.visible=o.visible&&(-1===o.name.indexOf("Y")||this.showY),o.visible=o.visible&&(-1===o.name.indexOf("Z")||this.showZ),o.visible=o.visible&&(-1===o.name.indexOf("E")||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis?(o.material.color.setHex(16776960),o.material.opacity=1):this.axis.split("").some(function(t){return o.name===t})&&(o.material.color.setHex(16776960),o.material.opacity=1))}super.updateMatrixWorld(t)}}class O extends n.Kj0{constructor(){super(new n._12(1e5,1e5,2,2),new n.vBJ({visible:!1,wireframe:!0,side:n.ehD,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),R.copy(T).applyQuaternion("local"===e?this.worldQuaternion:M),N.copy(z).applyQuaternion("local"===e?this.worldQuaternion:M),A.copy(I).applyQuaternion("local"===e?this.worldQuaternion:M),x.copy(N),this.mode){case"translate":case"scale":switch(this.axis){case"X":x.copy(this.eye).cross(R),E.copy(R).cross(x);break;case"Y":x.copy(this.eye).cross(N),E.copy(N).cross(x);break;case"Z":x.copy(this.eye).cross(A),E.copy(A).cross(x);break;case"XY":E.copy(A);break;case"YZ":E.copy(R);break;case"XZ":x.copy(A),E.copy(N);break;case"XYZ":case"E":E.set(0,0,0)}break;default:E.set(0,0,0)}0===E.length()?this.quaternion.copy(this.cameraQuaternion):(D.lookAt(r.set(0,0,0),E,x),this.quaternion.setFromRotationMatrix(D)),super.updateMatrixWorld(t)}}},36674:function(t,e,i){"use strict";let n,o,r;i.d(e,{y:function(){return q}});var s=i(54028),a={},l=Uint8Array,h=Uint16Array,p=Int32Array,c=new l([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u=new l([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d=new l([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(t,e){for(var i=new h(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];for(var o=new p(i[30]),n=1;n<30;++n)for(var r=i[n];r<i[n+1];++r)o[r]=r-i[n]<<5|n;return{b:i,r:o}},m=f(c,2),g=m.b,v=m.r;g[28]=258,v[258]=28;for(var y=f(u,0),b=y.b,w=y.r,x=new h(32768),_=0;_<32768;++_){var S=(43690&_)>>1|(21845&_)<<1;S=(61680&(S=(52428&S)>>2|(13107&S)<<2))>>4|(3855&S)<<4,x[_]=((65280&S)>>8|(255&S)<<8)>>1}for(var P=function(t,e,i){for(var n,o=t.length,r=0,s=new h(e);r<o;++r)t[r]&&++s[t[r]-1];var a=new h(e);for(r=1;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;if(i){n=new h(1<<e);var l=15-e;for(r=0;r<o;++r)if(t[r])for(var p=r<<4|t[r],c=e-t[r],u=a[t[r]-1]++<<c,d=u|(1<<c)-1;u<=d;++u)n[x[u]>>l]=p}else for(r=0,n=new h(o);r<o;++r)t[r]&&(n[r]=x[a[t[r]-1]++]>>15-t[r]);return n},M=new l(288),_=0;_<144;++_)M[_]=8;for(var _=144;_<256;++_)M[_]=9;for(var _=256;_<280;++_)M[_]=7;for(var _=280;_<288;++_)M[_]=8;for(var E=new l(32),_=0;_<32;++_)E[_]=5;var D=P(M,9,1),T=P(E,5,1),z=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},I=function(t,e,i){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&i},R=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},N=function(t){return(t+7)/8|0},A=function(t,e,i){return(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length),new l(t.subarray(e,i))},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],k=function(t,e,i){var n=Error(e||C[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,k),!i)throw n;return n},O=function(t,e,i,n){var o=t.length,r=n?n.length:0;if(!o||e.f&&!e.l)return i||new l(0);var s=!i,a=s||2!=e.i,h=e.i;s&&(i=new l(3*o));var p=function(t){var e=i.length;if(t>e){var n=new l(Math.max(2*e,t));n.set(i),i=n}},f=e.f||0,m=e.p||0,v=e.b||0,y=e.l,w=e.d,x=e.m,_=e.n,S=8*o;do{if(!y){f=I(t,m,1);var M=I(t,m+1,3);if(m+=3,M){if(1==M)y=D,w=T,x=9,_=5;else if(2==M){var E=I(t,m,31)+257,C=I(t,m+10,15)+4,O=E+I(t,m+5,31)+1;m+=14;for(var j=new l(O),L=new l(19),H=0;H<C;++H)L[d[H]]=I(t,m+3*H,7);m+=3*C;for(var F=z(L),W=(1<<F)-1,X=P(L,F,1),H=0;H<O;){var Z=X[I(t,m,W)];m+=15&Z;var U=Z>>4;if(U<16)j[H++]=U;else{var Y=0,B=0;for(16==U?(B=3+I(t,m,3),m+=2,Y=j[H-1]):17==U?(B=3+I(t,m,7),m+=3):18==U&&(B=11+I(t,m,127),m+=7);B--;)j[H++]=Y}}var K=j.subarray(0,E),V=j.subarray(E);x=z(K),_=z(V),y=P(K,x,1),w=P(V,_,1)}else k(1)}else{var U=N(m)+4,G=t[U-4]|t[U-3]<<8,Q=U+G;if(Q>o){h&&k(0);break}a&&p(v+G),i.set(t.subarray(U,Q),v),e.b=v+=G,e.p=m=8*Q,e.f=f;continue}if(m>S){h&&k(0);break}}a&&p(v+131072);for(var q=(1<<x)-1,J=(1<<_)-1,$=m;;$=m){var Y=y[R(t,m)&q],tt=Y>>4;if((m+=15&Y)>S){h&&k(0);break}if(Y||k(2),tt<256)i[v++]=tt;else if(256==tt){$=m,y=null;break}else{var te=tt-254;if(tt>264){var H=tt-257,ti=c[H];te=I(t,m,(1<<ti)-1)+g[H],m+=ti}var tn=w[R(t,m)&J],to=tn>>4;tn||k(3),m+=15&tn;var V=b[to];if(to>3){var ti=u[to];V+=R(t,m)&(1<<ti)-1,m+=ti}if(m>S){h&&k(0);break}a&&p(v+131072);var tr=v+te;if(v<V){var ts=r-V,ta=Math.min(V,tr);for(ts+v<0&&k(3);v<ta;++v)i[v]=n[ts+v]}for(;v<tr;++v)i[v]=i[v-V]}}e.l=y,e.p=$,e.b=v,e.f=f,y&&(f=1,e.m=x,e.d=w,e.n=_)}while(!f);return v!=i.length&&s?A(i,0,v):i.subarray(0,v)},j=function(t,e,i){i<<=7&e;var n=e/8|0;t[n]|=i,t[n+1]|=i>>8},L=function(t,e,i){i<<=7&e;var n=e/8|0;t[n]|=i,t[n+1]|=i>>8,t[n+2]|=i>>16},H=function(t,e){for(var i=[],n=0;n<t.length;++n)t[n]&&i.push({s:n,f:t[n]});var o=i.length,r=i.slice();if(!o)return{t:B,l:0};if(1==o){var s=new l(i[0].s+1);return s[i[0].s]=1,{t:s,l:1}}i.sort(function(t,e){return t.f-e.f}),i.push({s:-1,f:25001});var a=i[0],p=i[1],c=0,u=1,d=2;for(i[0]={s:-1,f:a.f+p.f,l:a,r:p};u!=o-1;)a=i[i[c].f<i[d].f?c++:d++],p=i[c!=u&&i[c].f<i[d].f?c++:d++],i[u++]={s:-1,f:a.f+p.f,l:a,r:p};for(var f=r[0].s,n=1;n<o;++n)r[n].s>f&&(f=r[n].s);var m=new h(f+1),g=F(i[u-1],m,0);if(g>e){var n=0,v=0,y=g-e,b=1<<y;for(r.sort(function(t,e){return m[e.s]-m[t.s]||t.f-e.f});n<o;++n){var w=r[n].s;if(m[w]>e)v+=b-(1<<g-m[w]),m[w]=e;else break}for(v>>=y;v>0;){var x=r[n].s;m[x]<e?v-=1<<e-m[x]++-1:++n}for(;n>=0&&v;--n){var _=r[n].s;m[_]==e&&(--m[_],++v)}g=e}return{t:new l(m),l:g}},F=function(t,e,i){return -1==t.s?Math.max(F(t.l,e,i+1),F(t.r,e,i+1)):e[t.s]=i},W=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new h(++e),n=0,o=t[0],r=1,s=function(t){i[n++]=t},a=1;a<=e;++a)if(t[a]==o&&a!=e)++r;else{if(!o&&r>2){for(;r>138;r-=138)s(32754);r>2&&(s(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(s(o),--r;r>6;r-=6)s(8304);r>2&&(s(r-3<<5|8208),r=0)}for(;r--;)s(o);r=1,o=t[a]}return{c:i.subarray(0,n),n:e}},X=function(t,e){for(var i=0,n=0;n<e.length;++n)i+=t[n]*e[n];return i},Z=function(t,e,i){var n=i.length,o=N(e+2);t[o]=255&n,t[o+1]=n>>8,t[o+2]=255^t[o],t[o+3]=255^t[o+1];for(var r=0;r<n;++r)t[o+r+4]=i[r];return(o+4+n)*8},U=function(t,e,i,n,o,r,s,a,l,p,f){j(e,f++,i),++o[256];for(var m,g,v,y,b=H(o,15),w=b.t,x=b.l,_=H(r,15),S=_.t,D=_.l,T=W(w),z=T.c,I=T.n,R=W(S),N=R.c,A=R.n,C=new h(19),k=0;k<z.length;++k)++C[31&z[k]];for(var k=0;k<N.length;++k)++C[31&N[k]];for(var O=H(C,7),F=O.t,U=O.l,Y=19;Y>4&&!F[d[Y-1]];--Y);var B=p+5<<3,K=X(o,M)+X(r,E)+s,V=X(o,w)+X(r,S)+s+14+3*Y+X(C,F)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&B<=K&&B<=V)return Z(e,f,t.subarray(l,l+p));if(j(e,f,1+(V<K)),f+=2,V<K){m=P(w,x,0),g=w,v=P(S,D,0),y=S;var G=P(F,U,0);j(e,f,I-257),j(e,f+5,A-1),j(e,f+10,Y-4),f+=14;for(var k=0;k<Y;++k)j(e,f+3*k,F[d[k]]);f+=3*Y;for(var Q=[z,N],q=0;q<2;++q)for(var J=Q[q],k=0;k<J.length;++k){var $=31&J[k];j(e,f,G[$]),f+=F[$],$>15&&(j(e,f,J[k]>>5&127),f+=J[k]>>12)}}else m=null,g=M,v=null,y=E;for(var k=0;k<a;++k){var tt=n[k];if(tt>255){var $=tt>>18&31;L(e,f,m[$+257]),f+=g[$+257],$>7&&(j(e,f,tt>>23&31),f+=c[$]);var te=31&tt;L(e,f,v[te]),f+=y[te],te>3&&(L(e,f,tt>>5&8191),f+=u[te])}else L(e,f,m[tt]),f+=g[tt]}return L(e,f,m[256]),f+g[256]},Y=new p([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),B=new l(0),K=function(t,e,i,n,o,r){var s=r.z||t.length,a=new l(n+s+5*(1+Math.ceil(s/7e3))+o),d=a.subarray(n,a.length-o),f=r.l,m=7&(r.r||0);if(e){m&&(d[0]=r.r>>3);for(var g=Y[e-1],y=g>>13,b=8191&g,x=(1<<i)-1,_=r.p||new h(32768),S=r.h||new h(x+1),P=Math.ceil(i/3),M=2*P,E=function(e){return(t[e]^t[e+1]<<P^t[e+2]<<M)&x},D=new p(25e3),T=new h(288),z=new h(32),I=0,R=0,C=r.i||0,k=0,O=r.w||0,j=0;C+2<s;++C){var L=E(C),H=32767&C,F=S[L];if(_[H]=F,S[L]=H,O<=C){var W=s-C;if((I>7e3||k>24576)&&(W>423||!f)){m=U(t,d,0,D,T,z,R,k,j,C-j,m),k=I=R=0,j=C;for(var X=0;X<286;++X)T[X]=0;for(var X=0;X<30;++X)z[X]=0}var B=2,K=0,V=b,G=H-F&32767;if(W>2&&L==E(C-G))for(var Q=Math.min(y,W)-1,q=Math.min(32767,C),J=Math.min(258,W);G<=q&&--V&&H!=F;){if(t[C+B]==t[C+B-G]){for(var $=0;$<J&&t[C+$]==t[C+$-G];++$);if($>B){if(B=$,K=G,$>Q)break;for(var tt=Math.min(G,$-2),te=0,X=0;X<tt;++X){var ti=C-G+X&32767,tn=_[ti],to=ti-tn&32767;to>te&&(te=to,F=ti)}}}F=_[H=F],G+=H-F&32767}if(K){D[k++]=268435456|v[B]<<18|w[K];var tr=31&v[B],ts=31&w[K];R+=c[tr]+u[ts],++T[257+tr],++z[ts],O=C+B,++I}else D[k++]=t[C],++T[t[C]]}}for(C=Math.max(C,O);C<s;++C)D[k++]=t[C],++T[t[C]];m=U(t,d,f,D,T,z,R,k,j,C-j,m),f||(r.r=7&m|d[m/8|0]<<3,m-=7,r.h=S,r.p=_,r.i=C,r.w=O)}else{for(var C=r.w||0;C<s+f;C+=65535){var ta=C+65535;ta>=s&&(d[m/8|0]=f,ta=s),m=Z(d,m+1,t.subarray(C,ta))}r.i=s}return A(a,0,n+N(m)+o)},V="undefined"!=typeof TextDecoder&&new TextDecoder;try{V.decode(B,{stream:!0})}catch(t){}function G(t,e,i){let n=i.length-t-1;if(e>=i[n])return n-1;if(e<=i[t])return t;let o=t,r=n,s=Math.floor((o+r)/2);for(;e<i[s]||e>=i[s+1];)e<i[s]?r=s:o=s,s=Math.floor((o+r)/2);return s}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;class Q extends s.Hyl{constructor(t,e,i,n,o){super();let r=e?e.length-1:0,a=i?i.length:0;this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=n||0,this.endKnot=o||r;for(let t=0;t<a;++t){let e=i[t];this.controlPoints[t]=new s.Ltg(e.x,e.y,e.z,e.w)}}getPoint(t,e=new s.Pa4){let i=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),n=function(t,e,i,n){let o=G(t,n,e),r=function(t,e,i,n){let o=[],r=[],s=[];o[0]=1;for(let a=1;a<=i;++a){r[a]=e-n[t+1-a],s[a]=n[t+a]-e;let i=0;for(let t=0;t<a;++t){let e=s[t+1],n=r[a-t],l=o[t]/(e+n);o[t]=i+e*l,i=n*l}o[a]=i}return o}(o,n,t,e),a=new s.Ltg(0,0,0,0);for(let e=0;e<=t;++e){let n=i[o-t+e],s=r[e],l=n.w*s;a.x+=n.x*l,a.y+=n.y*l,a.z+=n.z*l,a.w+=n.w*s}return a}(this.degree,this.knots,this.controlPoints,i);return 1!==n.w&&n.divideScalar(n.w),e.set(n.x,n.y,n.z)}getTangent(t,e=new s.Pa4){var i;let n=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),o=(i=this.degree,function(t){let e=t.length,i=[],n=[];for(let o=0;o<e;++o){let e=t[o];i[o]=new s.Pa4(e.x,e.y,e.z),n[o]=e.w}let o=[];for(let t=0;t<e;++t){let e=i[t].clone();for(let i=1;i<=t;++i)e.sub(o[t-i].clone().multiplyScalar(function(t,e){let i=1;for(let e=2;e<=t;++e)i*=e;let n=1;for(let t=2;t<=e;++t)n*=t;for(let i=2;i<=t-e;++i)n*=i;return i/n}(t,i)*n[i]));o[t]=e.divideScalar(n[0])}return o}(function(t,e,i,n,o){let r=1<t?1:t,a=[],l=G(t,n,e),h=function(t,e,i,n,o){let r=[];for(let t=0;t<=i;++t)r[t]=0;let s=[];for(let t=0;t<=n;++t)s[t]=r.slice(0);let a=[];for(let t=0;t<=i;++t)a[t]=r.slice(0);a[0][0]=1;let l=r.slice(0),h=r.slice(0);for(let n=1;n<=i;++n){l[n]=e-o[t+1-n],h[n]=o[t+n]-e;let i=0;for(let t=0;t<n;++t){let e=h[t+1],o=l[n-t];a[n][t]=e+o;let r=a[t][n-1]/a[n][t];a[t][n]=i+e*r,i=o*r}a[n][n]=i}for(let t=0;t<=i;++t)s[0][t]=a[t][i];for(let t=0;t<=i;++t){let e=0,o=1,l=[];for(let t=0;t<=i;++t)l[t]=r.slice(0);l[0][0]=1;for(let r=1;r<=n;++r){let n=0,h=t-r,p=i-r;t>=r&&(l[o][0]=l[e][0]/a[p+1][h],n=l[o][0]*a[h][p]);let c=h>=-1?1:-h,u=t-1<=p?r-1:i-t;for(let t=c;t<=u;++t)l[o][t]=(l[e][t]-l[e][t-1])/a[p+1][h+t],n+=l[o][t]*a[h+t][p];t<=p&&(l[o][r]=-l[e][r-1]/a[p+1][t],n+=l[o][r]*a[t][p]),s[r][t]=n;let d=e;e=o,o=d}}let p=i;for(let t=1;t<=n;++t){for(let e=0;e<=i;++e)s[t][e]*=p;p*=i-t}return s}(l,n,t,r,e),p=[];for(let t=0;t<i.length;++t){let e=i[t].clone(),n=e.w;e.x*=n,e.y*=n,e.z*=n,p[t]=e}for(let e=0;e<=r;++e){let i=p[l-t].clone().multiplyScalar(h[e][0]);for(let n=1;n<=t;++n)i.add(p[l-t+n].clone().multiplyScalar(h[e][n]));a[e]=i}for(let t=r+1;t<=o+1;++t)a[t]=new s.Ltg(0,0,0);return a}(i,this.knots,this.controlPoints,n,1)));return e.copy(o[1]).normalize(),e}toJSON(){let t=super.toJSON();return t.degree=this.degree,t.knots=[...this.knots],t.controlPoints=this.controlPoints.map(t=>t.toArray()),t.startKnot=this.startKnot,t.endKnot=this.endKnot,t}fromJSON(t){return super.fromJSON(t),this.degree=t.degree,this.knots=[...t.knots],this.controlPoints=t.controlPoints.map(t=>new s.Ltg(t[0],t[1],t[2],t[3])),this.startKnot=t.startKnot,this.endKnot=t.endKnot,this}}class q extends s.aNw{constructor(t){super(t)}load(t,e,i,n){let o=this,r=""===o.path?s.Zp0.extractUrlBase(t):o.path,a=new s.hH6(this.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(t,function(i){try{e(o.parse(i,r))}catch(e){n?n(e):console.error(e),o.manager.itemError(t)}},i,n)}parse(t,e){if(function(t){let e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===tf(t,0,e.length)}(t))n=new ti().parse(t);else{let e=tf(t);if(!function(t){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],i=0;for(let n=0;n<e.length;++n)if(function(e){let n=t[0];return t=t.slice(i+1),i++,n}(0)===e[n])return!1;return!0}(e))throw Error("THREE.FBXLoader: Unknown format.");if(7e3>tr(e))throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+tr(e));n=new te().parse(e)}return new J(new s.dpR(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin),this.manager).parse(n)}}class J{constructor(t,e){this.textureLoader=t,this.manager=e}parse(){o=this.parseConnections();let t=this.parseImages(),e=this.parseTextures(t),i=this.parseMaterials(e),n=this.parseDeformers(),s=new $().parse(n);return this.parseScene(n,s,i),r}parseConnections(){let t=new Map;return"Connections"in n&&n.Connections.connections.forEach(function(e){let i=e[0],n=e[1],o=e[2];t.has(i)||t.set(i,{parents:[],children:[]}),t.get(i).parents.push({ID:n,relationship:o}),t.has(n)||t.set(n,{parents:[],children:[]}),t.get(n).children.push({ID:i,relationship:o})}),t}parseImages(){let t={},e={};if("Video"in n.Objects){let i=n.Objects.Video;for(let n in i){let o=i[n];if(t[parseInt(n)]=o.RelativeFilename||o.Filename,"Content"in o){let t=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,r="string"==typeof o.Content&&""!==o.Content;if(t||r){let t=this.parseImage(i[n]);e[o.RelativeFilename||o.Filename]=t}}}}for(let i in t){let n=t[i];void 0!==e[n]?t[i]=e[n]:t[i]=t[i].split("\\").pop()}return t}parseImage(t){let e;let i=t.Content,n=t.RelativeFilename||t.Filename,o=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(o){case"bmp":e="image/bmp";break;case"jpg":case"jpeg":e="image/jpeg";break;case"png":e="image/png";break;case"tif":e="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),e="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if("string"==typeof i)return"data:"+e+";base64,"+i;{let t=new Uint8Array(i);return window.URL.createObjectURL(new Blob([t],{type:e}))}}parseTextures(t){let e=new Map;if("Texture"in n.Objects){let i=n.Objects.Texture;for(let n in i){let o=this.parseTexture(i[n],t);e.set(parseInt(n),o)}}return e}parseTexture(t,e){let i=this.loadTexture(t,e);i.ID=t.id,i.name=t.attrName;let n=t.WrapModeU,o=t.WrapModeV,r=void 0!==n?n.value:0,a=void 0!==o?o.value:0;if(i.wrapS=0===r?s.rpg:s.uWy,i.wrapT=0===a?s.rpg:s.uWy,"Scaling"in t){let e=t.Scaling.value;i.repeat.x=e[0],i.repeat.y=e[1]}if("Translation"in t){let e=t.Translation.value;i.offset.x=e[0],i.offset.y=e[1]}return i}loadTexture(t,e){let i;let n=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),r=t.FileName.split(".").pop().toLowerCase(),a=n.has(r)?this.manager.getHandler(`.${r}`):this.textureLoader;if(!a)return console.warn(`FBXLoader: ${r.toUpperCase()} loader not found, creating placeholder texture for`,t.RelativeFilename),new s.xEZ;let l=a.path;l||a.setPath(this.textureLoader.path);let h=o.get(t.id).children;void 0!==h&&h.length>0&&void 0!==e[h[0].ID]&&(0===(i=e[h[0].ID]).indexOf("blob:")||0===i.indexOf("data:"))&&a.setPath(void 0);let p=a.load(i);return a.setPath(l),p}parseMaterials(t){let e=new Map;if("Material"in n.Objects){let i=n.Objects.Material;for(let n in i){let o=this.parseMaterial(i[n],t);null!==o&&e.set(parseInt(n),o)}}return e}parseMaterial(t,e){let i;let n=t.id,r=t.attrName,a=t.ShadingModel;if("object"==typeof a&&(a=a.value),!o.has(n))return null;let l=this.parseParameters(t,e,n);switch(a.toLowerCase()){case"phong":i=new s.xoR;break;case"lambert":i=new s.YBo;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),i=new s.xoR}return i.setValues(l),i.name=r,i}parseParameters(t,e,i){let n={};t.BumpFactor&&(n.bumpScale=t.BumpFactor.value),t.Diffuse?n.color=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.Diffuse.value),s.KI_):t.DiffuseColor&&("Color"===t.DiffuseColor.type||"ColorRGB"===t.DiffuseColor.type)&&(n.color=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.DiffuseColor.value),s.KI_)),t.DisplacementFactor&&(n.displacementScale=t.DisplacementFactor.value),t.Emissive?n.emissive=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.Emissive.value),s.KI_):t.EmissiveColor&&("Color"===t.EmissiveColor.type||"ColorRGB"===t.EmissiveColor.type)&&(n.emissive=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.EmissiveColor.value),s.KI_)),t.EmissiveFactor&&(n.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),n.opacity=1-(t.TransparencyFactor?parseFloat(t.TransparencyFactor.value):0),(1===n.opacity||0===n.opacity)&&(n.opacity=t.Opacity?parseFloat(t.Opacity.value):null,null===n.opacity&&(n.opacity=1-(t.TransparentColor?parseFloat(t.TransparentColor.value[0]):0))),n.opacity<1&&(n.transparent=!0),t.ReflectionFactor&&(n.reflectivity=t.ReflectionFactor.value),t.Shininess&&(n.shininess=t.Shininess.value),t.Specular?n.specular=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.Specular.value),s.KI_):t.SpecularColor&&"Color"===t.SpecularColor.type&&(n.specular=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(t.SpecularColor.value),s.KI_));let r=this;return o.get(i).children.forEach(function(t){let i=t.relationship;switch(i){case"Bump":n.bumpMap=r.getTexture(e,t.ID);break;case"Maya|TEX_ao_map":n.aoMap=r.getTexture(e,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=r.getTexture(e,t.ID),void 0!==n.map&&(n.map.colorSpace=s.KI_);break;case"DisplacementColor":n.displacementMap=r.getTexture(e,t.ID);break;case"EmissiveColor":n.emissiveMap=r.getTexture(e,t.ID),void 0!==n.emissiveMap&&(n.emissiveMap.colorSpace=s.KI_);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=r.getTexture(e,t.ID);break;case"ReflectionColor":n.envMap=r.getTexture(e,t.ID),void 0!==n.envMap&&(n.envMap.mapping=s.dSO,n.envMap.colorSpace=s.KI_);break;case"SpecularColor":n.specularMap=r.getTexture(e,t.ID),void 0!==n.specularMap&&(n.specularMap.colorSpace=s.KI_);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=r.getTexture(e,t.ID),n.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",i)}}),n}getTexture(t,e){return"LayeredTexture"in n.Objects&&e in n.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),e=o.get(e).children[0].ID),t.get(e)}parseDeformers(){let t={},e={};if("Deformer"in n.Objects){let i=n.Objects.Deformer;for(let n in i){let r=i[n],s=o.get(parseInt(n));if("Skin"===r.attrType){let e=this.parseSkeleton(s,i);e.ID=n,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),e.geometryID=s.parents[0].ID,t[n]=e}else if("BlendShape"===r.attrType){let t={id:n};t.rawTargets=this.parseMorphTargets(s,i),t.id=n,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),e[n]=t}}}return{skeletons:t,morphTargets:e}}parseSkeleton(t,e){let i=[];return t.children.forEach(function(t){let n=e[t.ID];if("Cluster"!==n.attrType)return;let o={ID:t.ID,indices:[],weights:[],transformLink:new s.yGw().fromArray(n.TransformLink.a)};"Indexes"in n&&(o.indices=n.Indexes.a,o.weights=n.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(t,e){let i=[];for(let n=0;n<t.children.length;n++){let r=t.children[n],s=e[r.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;a.geoID=o.get(parseInt(r.ID)).children.filter(function(t){return void 0===t.relationship})[0].ID,i.push(a)}return i}parseScene(t,e,i){r=new s.ZAu;let a=this.parseModels(t.skeletons,e,i),l=n.Objects.Model,h=this;a.forEach(function(t){let e=l[t.ID];h.setLookAtProperties(t,e),o.get(t.ID).parents.forEach(function(e){let i=a.get(e.ID);void 0!==i&&i.add(t)}),null===t.parent&&r.add(t)}),this.bindSkeleton(t.skeletons,e,a),this.addGlobalSceneSettings(),r.traverse(function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrix=t.parent.matrix,t.userData.transformData.parentMatrixWorld=t.parent.matrixWorld);let e=tc(t.userData.transformData);t.applyMatrix4(e),t.updateWorldMatrix()}});let p=new tt().parse();1===r.children.length&&r.children[0].isGroup&&(r.children[0].animations=p,r=r.children[0]),r.animations=p}parseModels(t,e,i){let r=new Map,a=n.Objects.Model;for(let n in a){let l=parseInt(n),h=a[n],p=o.get(l),c=this.buildSkeleton(p,t,l,h.attrName);if(!c){switch(h.attrType){case"Camera":c=this.createCamera(p);break;case"Light":c=this.createLight(p);break;case"Mesh":c=this.createMesh(p,e,i);break;case"NurbsCurve":c=this.createCurve(p,e);break;case"LimbNode":case"Root":c=new s.N$j;break;default:c=new s.ZAu}c.name=h.attrName?s.iUV.sanitizeNodeName(h.attrName):"",c.userData.originalName=h.attrName,c.ID=l}this.getTransformData(c,h),r.set(l,c)}return r}buildSkeleton(t,e,i,n){let o=null;return t.parents.forEach(function(t){for(let r in e){let a=e[r];a.rawBones.forEach(function(e,r){if(e.ID===t.ID){let t=o;(o=new s.N$j).matrixWorld.copy(e.transformLink),o.name=n?s.iUV.sanitizeNodeName(n):"",o.userData.originalName=n,o.ID=i,a.bones[r]=o,null!==t&&o.add(t)}})}}),o}createCamera(t){let e,i;if(t.children.forEach(function(t){let e=n.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)}),void 0===i)e=new s.Tme;else{let t=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(t=1);let n=1;void 0!==i.NearPlane&&(n=i.NearPlane.value/1e3);let o=1e3;void 0!==i.FarPlane&&(o=i.FarPlane.value/1e3);let r=window.innerWidth,a=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(r=i.AspectWidth.value,a=i.AspectHeight.value);let l=r/a,h=45;void 0!==i.FieldOfView&&(h=i.FieldOfView.value);let p=i.FocalLength?i.FocalLength.value:null;switch(t){case 0:e=new s.cPb(h,l,n,o),null!==p&&e.setFocalLength(p);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),e=new s.Tme;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+t+"."),e=new s.Tme}}return e}createLight(t){let e,i;if(t.children.forEach(function(t){let e=n.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)}),void 0===i)e=new s.Tme;else{let t;t=void 0===i.LightType?0:i.LightType.value;let n=16777215;void 0!==i.Color&&(n=s.epp.toWorkingColorSpace(new s.Ilk().fromArray(i.Color.value),s.KI_));let o=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(o=0);let r=0;switch(void 0!==i.FarAttenuationEnd&&(r=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value),t){case 0:e=new s.cek(n,o,r,1);break;case 1:e=new s.Ox3(n,o);break;case 2:let a=Math.PI/3;void 0!==i.InnerAngle&&(a=s.M8C.degToRad(i.InnerAngle.value));let l=0;void 0!==i.OuterAngle&&(l=Math.max(l=s.M8C.degToRad(i.OuterAngle.value),1)),e=new s.PMe(n,o,r,a,l,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),e=new s.cek(n,o)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(e.castShadow=!0)}return e}createMesh(t,e,i){let n;let o=null,r=null,a=[];return t.children.forEach(function(t){e.has(t.ID)&&(o=e.get(t.ID)),i.has(t.ID)&&a.push(i.get(t.ID))}),a.length>1?r=a:a.length>0?r=a[0]:(r=new s.xoR({name:s.aNw.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(r)),"color"in o.attributes&&a.forEach(function(t){t.vertexColors=!0}),o.FBX_Deformer?(n=new s.TUv(o,r)).normalizeSkinWeights():n=new s.Kj0(o,r),n}createCurve(t,e){let i=t.children.reduce(function(t,i){return e.has(i.ID)&&(t=e.get(i.ID)),t},null),n=new s.nls({name:s.aNw.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new s.x12(i,n)}getTransformData(t,e){let i={};"InheritType"in e&&(i.inheritType=parseInt(e.InheritType.value)),"RotationOrder"in e?i.eulerOrder=tu(e.RotationOrder.value):i.eulerOrder=tu(0),"Lcl_Translation"in e&&(i.translation=e.Lcl_Translation.value),"PreRotation"in e&&(i.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(i.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(i.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(i.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(i.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(i.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(i.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(i.rotationPivot=e.RotationPivot.value),t.userData.transformData=i}setLookAtProperties(t,e){"LookAtProperty"in e&&o.get(t.ID).children.forEach(function(e){if("LookAtProperty"===e.relationship){let i=n.Objects.Model[e.ID];if("Lcl_Translation"in i){let e=i.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(e),r.add(t.target)):t.lookAt(new s.Pa4().fromArray(e))}}})}bindSkeleton(t,e,i){let n=this.parsePoseNodes();for(let r in t){let a=t[r];o.get(parseInt(a.ID)).parents.forEach(function(t){if(e.has(t.ID)){let e=t.ID;o.get(e).parents.forEach(function(t){i.has(t.ID)&&i.get(t.ID).bind(new s.OdW(a.bones),n[t.ID])})}})}}parsePoseNodes(){let t={};if("Pose"in n.Objects){let e=n.Objects.Pose;for(let i in e)if("BindPose"===e[i].attrType&&e[i].NbPoseNodes>0){let n=e[i].PoseNode;Array.isArray(n)?n.forEach(function(e){t[e.Node]=new s.yGw().fromArray(e.Matrix.a)}):t[n.Node]=new s.yGw().fromArray(n.Matrix.a)}}return t}addGlobalSceneSettings(){if("GlobalSettings"in n){if("AmbientColor"in n.GlobalSettings){let t=n.GlobalSettings.AmbientColor.value,e=t[0],i=t[1],o=t[2];if(0!==e||0!==i||0!==o){let t=new s.Ilk().setRGB(e,i,o,s.KI_);r.add(new s.Mig(t,1))}}"UnitScaleFactor"in n.GlobalSettings&&(r.userData.unitScaleFactor=n.GlobalSettings.UnitScaleFactor.value)}}}class ${constructor(){this.negativeMaterialIndices=!1}parse(t){let e=new Map;if("Geometry"in n.Objects){let i=n.Objects.Geometry;for(let n in i){let r=o.get(parseInt(n)),s=this.parseGeometry(r,i[n],t);e.set(parseInt(n),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),e}parseGeometry(t,e,i){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,i);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometry(t,e,i){let o=i.skeletons,r=[],s=t.parents.map(function(t){return n.Objects.Model[t.ID]});if(0===s.length)return;let a=t.children.reduce(function(t,e){return void 0!==o[e.ID]&&(t=o[e.ID]),t},null);t.children.forEach(function(t){void 0!==i.morphTargets[t.ID]&&r.push(i.morphTargets[t.ID])});let l=s[0],h={};"RotationOrder"in l&&(h.eulerOrder=tu(l.RotationOrder.value)),"InheritType"in l&&(h.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(h.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(h.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(h.scale=l.GeometricScaling.value);let p=tc(h);return this.genGeometry(e,a,r,p)}genGeometry(t,e,i,n){let o=new s.u9r;t.attrName&&(o.name=t.attrName);let r=this.parseGeoNode(t,e),a=this.genBuffers(r),l=new s.a$l(a.vertex,3);if(l.applyMatrix4(n),o.setAttribute("position",l),a.colors.length>0&&o.setAttribute("color",new s.a$l(a.colors,3)),e&&(o.setAttribute("skinIndex",new s.qlB(a.weightsIndices,4)),o.setAttribute("skinWeight",new s.a$l(a.vertexWeights,4)),o.FBX_Deformer=e),a.normal.length>0){let t=new s.Vkp().getNormalMatrix(n),e=new s.a$l(a.normal,3);e.applyNormalMatrix(t),o.setAttribute("normal",e)}if(a.uvs.forEach(function(t,e){let i=0===e?"uv":`uv${e}`;o.setAttribute(i,new s.a$l(a.uvs[e],2))}),r.material&&"AllSame"!==r.material.mappingType){let t=a.materialIndex[0],e=0;if(a.materialIndex.forEach(function(i,n){i!==t&&(o.addGroup(e,n-e,t),t=i,e=n)}),o.groups.length>0){let e=o.groups[o.groups.length-1],i=e.start+e.count;i!==a.materialIndex.length&&o.addGroup(i,a.materialIndex.length-i,t)}0===o.groups.length&&o.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(o,t,i,n),o}parseGeoNode(t,e){let i={};if(i.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],i.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(i.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(i.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(i.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){i.uv=[];let e=0;for(;t.LayerElementUV[e];)t.LayerElementUV[e].UV&&i.uv.push(this.parseUVs(t.LayerElementUV[e])),e++}return i.weightTable={},null!==e&&(i.skeleton=e,e.rawBones.forEach(function(t,e){t.indices.forEach(function(n,o){void 0===i.weightTable[n]&&(i.weightTable[n]=[]),i.weightTable[n].push({id:e,weight:t.weights[o]})})})),i}genBuffers(t){let e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,n=0,o=!1,r=[],s=[],a=[],l=[],h=[],p=[],c=this;return t.vertexIndices.forEach(function(u,d){let f;let m=!1;u<0&&(u^=-1,m=!0);let g=[],v=[];if(r.push(3*u,3*u+1,3*u+2),t.color){let e=tl(d,i,u,t.color);a.push(e[0],e[1],e[2])}if(t.skeleton){if(void 0!==t.weightTable[u]&&t.weightTable[u].forEach(function(t){v.push(t.weight),g.push(t.id)}),v.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let t=[0,0,0,0],e=[0,0,0,0];v.forEach(function(i,n){let o=i,r=g[n];e.forEach(function(e,i,n){if(o>e){n[i]=o,o=e;let s=t[i];t[i]=r,r=s}})}),g=t,v=e}for(;v.length<4;)v.push(0),g.push(0);for(let t=0;t<4;++t)h.push(v[t]),p.push(g[t])}if(t.normal){let e=tl(d,i,u,t.normal);s.push(e[0],e[1],e[2])}t.material&&"AllSame"!==t.material.mappingType&&(f=tl(d,i,u,t.material)[0])<0&&(c.negativeMaterialIndices=!0,f=0),t.uv&&t.uv.forEach(function(t,e){let n=tl(d,i,u,t);void 0===l[e]&&(l[e]=[]),l[e].push(n[0]),l[e].push(n[1])}),n++,m&&(c.genFace(e,t,r,f,s,a,l,h,p,n),i++,n=0,r=[],s=[],a=[],l=[],h=[],p=[])}),e}getNormalNewell(t){let e=new s.Pa4(0,0,0);for(let i=0;i<t.length;i++){let n=t[i],o=t[(i+1)%t.length];e.x+=(n.y-o.y)*(n.z+o.z),e.y+=(n.z-o.z)*(n.x+o.x),e.z+=(n.x-o.x)*(n.y+o.y)}return e.normalize(),e}getNormalTangentAndBitangent(t){let e=this.getNormalNewell(t),i=(Math.abs(e.z)>.5?new s.Pa4(0,1,0):new s.Pa4(0,0,1)).cross(e).normalize(),n=e.clone().cross(i).normalize();return{normal:e,tangent:i,bitangent:n}}flattenVertex(t,e,i){return new s.FM8(t.dot(e),t.dot(i))}genFace(t,e,i,n,o,r,a,l,h,p){let c;if(p>3){let t=[],n=e.baseVertexPositions||e.vertexPositions;for(let e=0;e<i.length;e+=3)t.push(new s.Pa4(n[i[e]],n[i[e+1]],n[i[e+2]]));let{tangent:o,bitangent:r}=this.getNormalTangentAndBitangent(t),a=[];for(let e of t)a.push(this.flattenVertex(e,o,r));c=s.iDF.triangulateShape(a,[])}else c=[[0,1,2]];for(let[s,p,u]of c)t.vertex.push(e.vertexPositions[i[3*s]]),t.vertex.push(e.vertexPositions[i[3*s+1]]),t.vertex.push(e.vertexPositions[i[3*s+2]]),t.vertex.push(e.vertexPositions[i[3*p]]),t.vertex.push(e.vertexPositions[i[3*p+1]]),t.vertex.push(e.vertexPositions[i[3*p+2]]),t.vertex.push(e.vertexPositions[i[3*u]]),t.vertex.push(e.vertexPositions[i[3*u+1]]),t.vertex.push(e.vertexPositions[i[3*u+2]]),e.skeleton&&(t.vertexWeights.push(l[4*s]),t.vertexWeights.push(l[4*s+1]),t.vertexWeights.push(l[4*s+2]),t.vertexWeights.push(l[4*s+3]),t.vertexWeights.push(l[4*p]),t.vertexWeights.push(l[4*p+1]),t.vertexWeights.push(l[4*p+2]),t.vertexWeights.push(l[4*p+3]),t.vertexWeights.push(l[4*u]),t.vertexWeights.push(l[4*u+1]),t.vertexWeights.push(l[4*u+2]),t.vertexWeights.push(l[4*u+3]),t.weightsIndices.push(h[4*s]),t.weightsIndices.push(h[4*s+1]),t.weightsIndices.push(h[4*s+2]),t.weightsIndices.push(h[4*s+3]),t.weightsIndices.push(h[4*p]),t.weightsIndices.push(h[4*p+1]),t.weightsIndices.push(h[4*p+2]),t.weightsIndices.push(h[4*p+3]),t.weightsIndices.push(h[4*u]),t.weightsIndices.push(h[4*u+1]),t.weightsIndices.push(h[4*u+2]),t.weightsIndices.push(h[4*u+3])),e.color&&(t.colors.push(r[3*s]),t.colors.push(r[3*s+1]),t.colors.push(r[3*s+2]),t.colors.push(r[3*p]),t.colors.push(r[3*p+1]),t.colors.push(r[3*p+2]),t.colors.push(r[3*u]),t.colors.push(r[3*u+1]),t.colors.push(r[3*u+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(n),t.materialIndex.push(n),t.materialIndex.push(n)),e.normal&&(t.normal.push(o[3*s]),t.normal.push(o[3*s+1]),t.normal.push(o[3*s+2]),t.normal.push(o[3*p]),t.normal.push(o[3*p+1]),t.normal.push(o[3*p+2]),t.normal.push(o[3*u]),t.normal.push(o[3*u+1]),t.normal.push(o[3*u+2])),e.uv&&e.uv.forEach(function(e,i){void 0===t.uvs[i]&&(t.uvs[i]=[]),t.uvs[i].push(a[i][2*s]),t.uvs[i].push(a[i][2*s+1]),t.uvs[i].push(a[i][2*p]),t.uvs[i].push(a[i][2*p+1]),t.uvs[i].push(a[i][2*u]),t.uvs[i].push(a[i][2*u+1])})}addMorphTargets(t,e,i,o){if(0===i.length)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];let r=this;i.forEach(function(i){i.rawTargets.forEach(function(i){let s=n.Objects.Geometry[i.geoID];void 0!==s&&r.genMorphGeometry(t,e,s,o,i.name)})})}genMorphGeometry(t,e,i,n,o){let r=void 0!==e.Vertices?e.Vertices.a:[],a=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],l=void 0!==i.Vertices?i.Vertices.a:[],h=void 0!==i.Indexes?i.Indexes.a:[],p=new Float32Array(3*t.attributes.position.count);for(let t=0;t<h.length;t++){let e=3*h[t];p[e]=l[3*t],p[e+1]=l[3*t+1],p[e+2]=l[3*t+2]}let c=this.genBuffers({vertexIndices:a,vertexPositions:p,baseVertexPositions:r}),u=new s.a$l(c.vertex,3);u.name=o||i.attrName,u.applyMatrix4(n),t.morphAttributes.position.push(u)}parseNormals(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.Normals.a,o=[];return"IndexToDirect"===i&&("NormalIndex"in t?o=t.NormalIndex.a:"NormalsIndex"in t&&(o=t.NormalsIndex.a)),{dataSize:3,buffer:n,indices:o,mappingType:e,referenceType:i}}parseUVs(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.UV.a,o=[];return"IndexToDirect"===i&&(o=t.UVIndex.a),{dataSize:2,buffer:n,indices:o,mappingType:e,referenceType:i}}parseVertexColors(t){let e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.Colors.a,o=[];"IndexToDirect"===i&&(o=t.ColorIndex.a);for(let t=0,e=new s.Ilk;t<n.length;t+=4)e.fromArray(n,t),s.epp.toWorkingColorSpace(e,s.KI_),e.toArray(n,t);return{dataSize:4,buffer:n,indices:o,mappingType:e,referenceType:i}}parseMaterialIndices(t){let e=t.MappingInformationType,i=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};let n=t.Materials.a,o=[];for(let t=0;t<n.length;++t)o.push(t);return{dataSize:1,buffer:n,indices:o,mappingType:e,referenceType:i}}parseNurbsGeometry(t){let e,i;let n=parseInt(t.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new s.u9r;let o=n-1,r=t.KnotVector.a,a=[],l=t.Points.a;for(let t=0,e=l.length;t<e;t+=4)a.push(new s.Ltg().fromArray(l,t));if("Closed"===t.Form)a.push(a[0]);else if("Periodic"===t.Form){e=o,i=r.length-1-e;for(let t=0;t<o;++t)a.push(a[t])}let h=new Q(o,r,a,e,i).getPoints(12*a.length);return new s.u9r().setFromPoints(h)}}class tt{parse(){let t=[],e=this.parseClips();if(void 0!==e)for(let i in e){let n=e[i],o=this.addClip(n);t.push(o)}return t}parseClips(){if(void 0===n.Objects.AnimationCurve)return;let t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);let e=this.parseAnimationLayers(t);return this.parseAnimStacks(e)}parseAnimationCurveNodes(){let t=n.Objects.AnimationCurveNode,e=new Map;for(let i in t){let n=t[i];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){let t={id:n.id,attr:n.attrName,curves:{}};e.set(t.id,t)}}return e}parseAnimationCurves(t){let e=n.Objects.AnimationCurve;for(let i in e){let n={id:e[i].id,times:e[i].KeyTime.a.map(ts),values:e[i].KeyValueFloat.a},r=o.get(n.id);if(void 0!==r){let e=r.parents[0].ID,i=r.parents[0].relationship;i.match(/X/)?t.get(e).curves.x=n:i.match(/Y/)?t.get(e).curves.y=n:i.match(/Z/)?t.get(e).curves.z=n:i.match(/DeformPercent/)&&t.has(e)&&(t.get(e).curves.morph=n)}}}parseAnimationLayers(t){let e=n.Objects.AnimationLayer,i=new Map;for(let a in e){let e=[],l=o.get(parseInt(a));void 0!==l&&(l.children.forEach(function(i,a){if(t.has(i.ID)){let l=t.get(i.ID);if(void 0!==l.curves.x||void 0!==l.curves.y||void 0!==l.curves.z){if(void 0===e[a]){let t=o.get(i.ID).parents.filter(function(t){return void 0!==t.relationship})[0].ID;if(void 0!==t){let o=n.Objects.Model[t.toString()];if(void 0===o){console.warn("THREE.FBXLoader: Encountered a unused curve.",i);return}let l={modelName:o.attrName?s.iUV.sanitizeNodeName(o.attrName):"",ID:o.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};r.traverse(function(t){t.ID===o.id&&(l.transform=t.matrix,t.userData.transformData&&(l.eulerOrder=t.userData.transformData.eulerOrder))}),l.transform||(l.transform=new s.yGw),"PreRotation"in o&&(l.preRotation=o.PreRotation.value),"PostRotation"in o&&(l.postRotation=o.PostRotation.value),e[a]=l}}e[a]&&(e[a][l.attr]=l)}else if(void 0!==l.curves.morph){if(void 0===e[a]){let t=o.get(i.ID).parents.filter(function(t){return void 0!==t.relationship})[0].ID,r=o.get(t).parents[0].ID,l=o.get(r).parents[0].ID,h=o.get(l).parents[0].ID,p=n.Objects.Model[h],c={modelName:p.attrName?s.iUV.sanitizeNodeName(p.attrName):"",morphName:n.Objects.Deformer[t].attrName};e[a]=c}e[a][l.attr]=l}}}),i.set(parseInt(a),e))}return i}parseAnimStacks(t){let e=n.Objects.AnimationStack,i={};for(let n in e){let r=o.get(parseInt(n)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=t.get(r[0].ID);i[n]={name:e[n].attrName,layer:s}}return i}addClip(t){let e=[],i=this;return t.layer.forEach(function(t){e=e.concat(i.generateTracks(t))}),new s.m7l(t.name,-1,e)}generateTracks(t){let e=[],i=new s.Pa4,n=new s.Pa4;if(t.transform&&t.transform.decompose(i,new s._fP,n),i=i.toArray(),n=n.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){let n=this.generateVectorTrack(t.modelName,t.T.curves,i,"position");void 0!==n&&e.push(n)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){let i=this.generateRotationTrack(t.modelName,t.R.curves,t.preRotation,t.postRotation,t.eulerOrder);void 0!==i&&e.push(i)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){let i=this.generateVectorTrack(t.modelName,t.S.curves,n,"scale");void 0!==i&&e.push(i)}if(void 0!==t.DeformPercent){let i=this.generateMorphTrack(t);void 0!==i&&e.push(i)}return e}generateVectorTrack(t,e,i,n){let o=this.getTimesForAllAxes(e),r=this.getKeyframeTrackValues(o,e,i);return new s.yC1(t+"."+n,o,r)}generateRotationTrack(t,e,i,n,o){let r,a;if(void 0!==e.x&&void 0!==e.y&&void 0!==e.z){let t=this.interpolateRotations(e.x,e.y,e.z,o);r=t[0],a=t[1]}let l=tu(0);void 0!==i&&((i=i.map(s.M8C.degToRad)).push(l),i=new s.USm().fromArray(i),i=new s._fP().setFromEuler(i)),void 0!==n&&((n=n.map(s.M8C.degToRad)).push(l),n=new s.USm().fromArray(n),n=new s._fP().setFromEuler(n).invert());let h=new s._fP,p=new s.USm,c=[];if(!a||!r)return new s.iLg(t+".quaternion",[0],[0]);for(let t=0;t<a.length;t+=3)p.set(a[t],a[t+1],a[t+2],o),h.setFromEuler(p),void 0!==i&&h.premultiply(i),void 0!==n&&h.multiply(n),t>2&&0>new s._fP().fromArray(c,(t-3)/3*4).dot(h)&&h.set(-h.x,-h.y,-h.z,-h.w),h.toArray(c,t/3*4);return new s.iLg(t+".quaternion",r,c)}generateMorphTrack(t){let e=t.DeformPercent.curves.morph,i=e.values.map(function(t){return t/100}),n=r.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new s.dUE(t.modelName+".morphTargetInfluences["+n+"]",e.times,i)}getTimesForAllAxes(t){let e=[];if(void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),(e=e.sort(function(t,e){return t-e})).length>1){let t=1,i=e[0];for(let n=1;n<e.length;n++){let o=e[n];o!==i&&(e[t]=o,i=o,t++)}e=e.slice(0,t)}return e}getKeyframeTrackValues(t,e,i){let n=[],o=-1,r=-1,s=-1;return t.forEach(function(t){if(e.x&&(o=e.x.times.indexOf(t)),e.y&&(r=e.y.times.indexOf(t)),e.z&&(s=e.z.times.indexOf(t)),-1!==o){let t=e.x.values[o];n.push(t),i[0]=t}else n.push(i[0]);if(-1!==r){let t=e.y.values[r];n.push(t),i[1]=t}else n.push(i[1]);if(-1!==s){let t=e.z.values[s];n.push(t),i[2]=t}else n.push(i[2])}),n}interpolateRotations(t,e,i,n){let o=[],r=[];o.push(t.times[0]),r.push(s.M8C.degToRad(t.values[0])),r.push(s.M8C.degToRad(e.values[0])),r.push(s.M8C.degToRad(i.values[0]));for(let a=1;a<t.values.length;a++){let l=[t.values[a-1],e.values[a-1],i.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;let h=l.map(s.M8C.degToRad),p=[t.values[a],e.values[a],i.values[a]];if(isNaN(p[0])||isNaN(p[1])||isNaN(p[2]))continue;let c=p.map(s.M8C.degToRad),u=[p[0]-l[0],p[1]-l[1],p[2]-l[2]],d=[Math.abs(u[0]),Math.abs(u[1]),Math.abs(u[2])];if(d[0]>=180||d[1]>=180||d[2]>=180){let e=Math.max(...d)/180,i=new s.USm(...h,n),l=new s.USm(...c,n),p=new s._fP().setFromEuler(i),u=new s._fP().setFromEuler(l);p.dot(u)&&u.set(-u.x,-u.y,-u.z,-u.w);let f=t.times[a-1],m=t.times[a]-f,g=new s._fP,v=new s.USm;for(let t=0;t<1;t+=1/e)g.copy(p.clone().slerp(u.clone(),t)),o.push(f+t*m),v.setFromQuaternion(g,n),r.push(v.x),r.push(v.y),r.push(v.z)}else o.push(t.times[a]),r.push(s.M8C.degToRad(t.values[a])),r.push(s.M8C.degToRad(e.values[a])),r.push(s.M8C.degToRad(i.values[a]))}return[o,r]}}class te{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new to,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let e=this,i=t.split(/[\r\n]+/);return i.forEach(function(t,n){let o=t.match(/^[\s\t]*;/),r=t.match(/^[\s\t]*$/);if(o||r)return;let s=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),a=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=t.match("^\\t{"+(e.currentIndent-1)+"}}");s?e.parseNodeBegin(t,s):a?e.parseNodeProperty(t,a,i[++n]):l?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)}),this.allNodes}parseNodeBegin(t,e){let i=e[1].trim().replace(/^"/,"").replace(/"$/,""),n=e[2].split(",").map(function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},r=this.parseNodeAttr(n),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,o):i in s?("PoseNode"===i?s.PoseNode.push(o):void 0!==s[i].id&&(s[i]={},s[i][s[i].id]=s[i]),""!==r.id&&(s[i][r.id]=o)):"number"==typeof r.id?(s[i]={},s[i][r.id]=o):"Properties70"!==i&&("PoseNode"===i?s[i]=[o]:s[i]=o),"number"==typeof r.id&&(o.id=r.id),""!==r.name&&(o.attrName=r.name),""!==r.type&&(o.attrType=r.type),this.pushStack(o)}parseNodeAttr(t){let e=t[0];""!==t[0]&&isNaN(e=parseInt(t[0]))&&(e=t[0]);let i="",n="";return t.length>1&&(i=t[1].replace(/^(\w+)::/,""),n=t[2]),{id:e,name:i,type:n}}parseNodeProperty(t,e,i){let n=e[1].replace(/^"/,"").replace(/"$/,"").trim(),o=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===o&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());let r=this.getCurrentNode();if("Properties70"===r.name){this.parseNodeSpecialProperty(t,n,o);return}if("C"===n){let t=o.split(",").slice(1),e=parseInt(t[0]),i=parseInt(t[1]),s=o.split(",").slice(3);s=s.map(function(t){return t.trim().replace(/^"/,"")}),n="connections",function(t,e){for(let i=0,n=t.length,o=e.length;i<o;i++,n++)t[n]=e[i]}(o=[e,i],s),void 0===r[n]&&(r[n]=[])}"Node"===n&&(r.id=o),n in r&&Array.isArray(r[n])?r[n].push(o):"a"!==n?r[n]=o:r.a=o,this.setCurrentProp(r,n),"a"===n&&","!==o.slice(-1)&&(r.a=td(o))}parseNodePropertyContinued(t){let e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=td(e.a))}parseNodeSpecialProperty(t,e,i){let n=i.split('",').map(function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=n[0],r=n[1],s=n[2],a=n[3],l=n[4];switch(r){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=td(l)}this.getPrevNode()[o]={type:r,type2:s,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),o)}}class ti{parse(t){let e=new tn(t);e.skip(23);let i=e.getUint32();if(i<6400)throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);let n=new to;for(;!this.endOfContent(e);){let t=this.parseNode(e,i);null!==t&&n.add(t.name,t)}return n}endOfContent(t){return t.size()%16==0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){let i={},n=e>=7500?t.getUint64():t.getUint32(),o=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();let r=t.getUint8(),s=t.getString(r);if(0===n)return null;let a=[];for(let e=0;e<o;e++)a.push(this.parseProperty(t));let l=a.length>0?a[0]:"",h=a.length>1?a[1]:"",p=a.length>2?a[2]:"";for(i.singleProperty=1===o&&t.getOffset()===n;n>t.getOffset();){let n=this.parseNode(t,e);null!==n&&this.parseSubNode(s,i,n)}return i.propertyList=a,"number"==typeof l&&(i.id=l),""!==h&&(i.attrName=h),""!==p&&(i.attrType=p),""!==s&&(i.name=s),i}parseSubNode(t,e,i){if(!0===i.singleProperty){let t=i.propertyList[0];Array.isArray(t)?(e[i.name]=i,i.a=t):e[i.name]=t}else if("Connections"===t&&"C"===i.name){let t=[];i.propertyList.forEach(function(e,i){0!==i&&t.push(e)}),void 0===e.connections&&(e.connections=[]),e.connections.push(t)}else if("Properties70"===i.name)Object.keys(i).forEach(function(t){e[t]=i[t]});else if("Properties70"===t&&"P"===i.name){let t,n=i.propertyList[0],o=i.propertyList[1],r=i.propertyList[2],s=i.propertyList[3];0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),0===o.indexOf("Lcl ")&&(o=o.replace("Lcl ","Lcl_")),t="Color"===o||"ColorRGB"===o||"Vector"===o||"Vector3D"===o||0===o.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],e[n]={type:o,type2:r,flag:s,value:t}}else void 0===e[i.name]?"number"==typeof i.id?(e[i.name]={},e[i.name][i.id]=i):e[i.name]=i:"PoseNode"===i.name?(Array.isArray(e[i.name])||(e[i.name]=[e[i.name]]),e[i.name].push(i)):void 0===e[i.name][i.id]&&(e[i.name][i.id]=i)}parseProperty(t){let e;let i=t.getString(1);switch(i){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return e=t.getUint32(),t.getArrayBuffer(e);case"S":return e=t.getUint32(),t.getString(e);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n,o,r;let s=t.getUint32(),a=t.getUint32(),l=t.getUint32();if(0===a)switch(i){case"b":case"c":return t.getBooleanArray(s);case"d":return t.getFloat64Array(s);case"f":return t.getFloat32Array(s);case"i":return t.getInt32Array(s);case"l":return t.getInt64Array(s)}let h=new tn(O((n=new Uint8Array(t.getArrayBuffer(l))).subarray((r=void 0,((15&n[0])!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&k(6,"invalid zlib data"),(n[1]>>5&1)==+!r&&k(6,"invalid zlib data: "+(32&n[1]?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2),-4),{i:2},o&&o.out,o&&o.dictionary).buffer);switch(i){case"b":case"c":return h.getBooleanArray(s);case"d":return h.getFloat64Array(s);case"f":return h.getFloat32Array(s);case"i":return h.getInt32Array(s);case"l":return h.getInt64Array(s)}break;default:throw Error("THREE.FBXLoader: Unknown property type "+i)}}}class tn{constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(1&this.getUint8())==1}getBooleanArray(t){let e=[];for(let i=0;i<t;i++)e.push(this.getBoolean());return e}getUint8(){let t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){let t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){let t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getInt32());return e}getUint32(){let t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return(this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e)?(e=4294967295&~e,4294967295==(t=4294967295&~t)&&(e=e+1&4294967295),-(4294967296*e+(t=t+1&4294967295))):4294967296*e+t}getInt64Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getInt64());return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t}getFloat32(){let t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getFloat32());return e}getFloat64(){let t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){let e=[];for(let i=0;i<t;i++)e.push(this.getFloat64());return e}getArrayBuffer(t){let e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getString(t){let e=this.offset,i=new Uint8Array(this.dv.buffer,e,t);this.skip(t);let n=i.indexOf(0);return n>=0&&(i=new Uint8Array(this.dv.buffer,e,n)),this._textDecoder.decode(i)}}class to{add(t,e){this[t]=e}}function tr(t){let e=t.match(/FBXVersion: (\d+)/);if(e)return parseInt(e[1]);throw Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function ts(t){return t/46186158e3}let ta=[];function tl(t,e,i,n){let o;switch(n.mappingType){case"ByPolygonVertex":o=t;break;case"ByPolygon":o=e;break;case"ByVertice":o=i;break;case"AllSame":o=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(o=n.indices[o]);let r=o*n.dataSize,s=r+n.dataSize;return function(t,e,i,n){for(let o=i,r=0;o<n;o++,r++)t[r]=e[o];return t}(ta,n.buffer,r,s)}let th=new s.USm,tp=new s.Pa4;function tc(t){let e=new s.yGw,i=new s.yGw,n=new s.yGw,o=new s.yGw,r=new s.yGw,a=new s.yGw,l=new s.yGw,h=new s.yGw,p=new s.yGw,c=new s.yGw,u=new s.yGw,d=new s.yGw,f=t.inheritType?t.inheritType:0;t.translation&&e.setPosition(tp.fromArray(t.translation));let m=tu(0);if(t.preRotation){let e=t.preRotation.map(s.M8C.degToRad);e.push(m),i.makeRotationFromEuler(th.fromArray(e))}if(t.rotation){let e=t.rotation.map(s.M8C.degToRad);e.push(t.eulerOrder||m),n.makeRotationFromEuler(th.fromArray(e))}if(t.postRotation){let e=t.postRotation.map(s.M8C.degToRad);e.push(m),o.makeRotationFromEuler(th.fromArray(e)),o.invert()}t.scale&&r.scale(tp.fromArray(t.scale)),t.scalingOffset&&l.setPosition(tp.fromArray(t.scalingOffset)),t.scalingPivot&&a.setPosition(tp.fromArray(t.scalingPivot)),t.rotationOffset&&h.setPosition(tp.fromArray(t.rotationOffset)),t.rotationPivot&&p.setPosition(tp.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(u.copy(t.parentMatrix),c.copy(t.parentMatrixWorld));let g=i.clone().multiply(n).multiply(o),v=new s.yGw;v.extractRotation(c);let y=new s.yGw;y.copyPosition(c);let b=y.clone().invert().multiply(c),w=v.clone().invert().multiply(b),x=new s.yGw;if(0===f)x.copy(v).multiply(g).multiply(w).multiply(r);else if(1===f)x.copy(v).multiply(w).multiply(g).multiply(r);else{let t=new s.yGw().scale(new s.Pa4().setFromMatrixScale(u)).clone().invert(),e=w.clone().multiply(t);x.copy(v).multiply(g).multiply(e).multiply(r)}let _=p.clone().invert(),S=a.clone().invert(),P=e.clone().multiply(h).multiply(p).multiply(i).multiply(n).multiply(o).multiply(_).multiply(l).multiply(a).multiply(r).multiply(S),M=new s.yGw().copyPosition(P),E=c.clone().multiply(M);return d.copyPosition(E),(P=d.clone().multiply(x)).premultiply(c.invert()),P}function tu(t){return 6===(t=t||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),"ZYX"):["ZYX","YZX","XZY","ZXY","YXZ","XYZ"][t]}function td(t){return t.split(",").map(function(t){return parseFloat(t)})}function tf(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,i))}}}]);