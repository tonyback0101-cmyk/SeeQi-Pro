"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9526],{88477:function(e,i,t){t.d(i,{D:function(){return l}});var r=t(52676),n=t(80110),o=t(45984);let l=e=>{let{text:i,clickableText:t,onClick:l,color:a,variant:s="caption",linkSx:d,typographySx:c,renderLink:u}=e,g=i.split(t);if(g.length<2)return(0,r.jsx)(n.Z,{variant:s,sx:c,children:i});let p=(0,r.jsx)(o.Z,{component:"button",sx:{color:a,fontWeight:"bold",textDecoration:"underline",cursor:"pointer",border:"none",background:"none",padding:0,...d},onClick:l,children:t});return(0,r.jsxs)(n.Z,{variant:s,sx:c,children:[g[0],u?u(t):p,g[1]]})}},19526:function(e,i,t){t.d(i,{Z:function(){return Z}});var r=t(52676),n=t(75271),o=t(56407),l=t(80110),a=t(22988),s=t(6721),d=t(8765),c=t(88477),u=t(68926),g=t(90043),p=t(72509),h=t(53971),x=t(26070),m=t(19005),b=t(53138),f=t(38218),w=t(328),v=t(46973);let j={"image/png":[],"image/jpeg":[],"image/webp":[]};function Z(e){let{value:i,onChange:t,maxFiles:Z=64,successText:C='Click "Upload" below to proceed.',showUpgradeHintForMaxFiles:E=!0,showStatusAt:k="top",sx:y,containerSx:U,allowChooseFromHistory:I=!0}=e,[W,F]=(0,n.useState)(!1),[S,R]=(0,n.useState)(i),{showModal:$}=(0,d.dd)(),_=(0,n.useRef)(null),D=e=>{t((S||[]).filter(i=>i.imageUrl!==e.imageUrl)),R((S||[]).filter(i=>i.imageUrl!==e.imageUrl))},{data:N}=(0,m.$_)(),z=(0,f.fE)(N),P=async e=>{F(!0);let i=async e=>{try{let i=new FormData;return i.append("file",e),await v.ZP.post("/media/upload_raw_image_nsfw",i,{headers:{"Content-Type":"multipart/form-data"}}).then(async e=>{if(200===e.status&&e.data){let{imageUrl:i,isNSFW:t}=e.data,r=await L(i);return{imageUrl:i,isNSFW:t,error:r}}})}catch{return null}};if(e&&e.length>0){let r=[...S||[],...(await Promise.allSettled(e.map(i))).map(e=>{let{status:i,value:t}=e;return"fulfilled"===i?t:null}).filter(Boolean)].reduce((e,i)=>(e.some(e=>e.imageUrl===i.imageUrl)||e.push(i),e),[]);t(r),R(r)}F(!1)},{UploadContextMenu:T,handleMenuOpen:A}=(0,p.w)({onChange:e=>{e&&e.length>0&&H(e)},onClickUpload:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:Z}),H=async e=>{if(e&&e.length>0){F(!0);let i=[...S||[],...await Promise.all(e.map(async e=>{let i=await L(e);return{imageUrl:e,isNSFW:!1,error:i}}))].reduce((e,i)=>(e.some(e=>e.imageUrl===i.imageUrl)||e.push(i),e),[]);t(i),R(i),F(!1)}},M=()=>(0,r.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(w.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:"We've detected one or more NSFW images. Please remove them before proceeding with model training."})]}),B=()=>(0,r.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(w.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:"Please upload at least 4 images."})]}),G=e=>(0,r.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(w.Z,{icon:"ic:round-check-circle",sx:{width:25,height:25,color:"#16D866"}}),(0,r.jsxs)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#16D866",ml:1},children:[e," images ready to go. ",C]})]}),L=async e=>{let[i,t]=await (0,x.G1)(e);if(i<384||t<384)return`Image size is ${t}x${i} pixels. Each dimension must be at least 384 pixels.`;if(i>2048||t>2048){let e=Math.min(2048/t,2048/i),r=t*e,n=i*e;if(n<384||r<384)return`Image size is ${t}x${i} pixels. After resizing to ${r.toFixed(0)}x${n.toFixed(0)}, each dimension must be at least 384 pixels.`}},Q=e=>(0,r.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(w.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"red"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"red",ml:1},children:e})]}),Y=e=>{let i=E&&z!==b.Qe.Infinite?(0,r.jsx)(c.D,{text:`Limit exceeded. Please Upgrade to Infinite to upload up to ${e} images.`,clickableText:"Upgrade to Infinite",onClick:()=>{$(h.Z,{type:"openart_subscription"})},color:"#EC681E"}):`Maximum upload limit is ${e} images.`;return(0,r.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,r.jsx)(w.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,r.jsx)(l.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:i})]})},q=e=>{if(null==e?void 0:e.some(e=>e.isNSFW))return M();if((null==e?void 0:e.length)<4)return B();if((null==e?void 0:e.length)>Z)return Y(Z);if((null==e?void 0:e.length)>=4&&!(null==e?void 0:e.some(e=>e.isNSFW||e.error)))return G(null==e?void 0:e.length);if(null==e?void 0:e.some(e=>e.error)){var i;return Q(null==e?void 0:null===(i=e.find(e=>e.error))||void 0===i?void 0:i.error)}return null};return(0,r.jsxs)(o.Z,{direction:"column",spacing:1,sx:{...U},children:["top"===k&&q(S),(0,r.jsx)(o.Z,{spacing:1,sx:{border:"1px dashed rgba(255, 255, 255, 0.50)",borderRadius:"10px",position:"relative",width:"100%",height:"230px",overflow:"auto",...y},children:(0,r.jsx)(a.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:100,overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"3px"}},children:(0,r.jsxs)(o.Z,{sx:{display:"grid",padding:"10px",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(3, 1fr)",md:"repeat(4, 1fr)",lg:"repeat(5, 1fr)"},gap:"10px",minHeight:"100%"},children:[(0,r.jsx)(a.Z,{sx:{pointerEvents:"auto",scrollbarWidth:"none !important"},children:(0,r.jsx)(g.Z,{ref:_,isUploading:W,sx:{borderRadius:"10px",m:0,width:"100%",height:"auto",aspectRatio:"1/1",background:"rgba(0, 0, 0, 0.3)"},dropZoneSx:{borderRadius:0},onChange:P,onAreaClick:I?e=>{I&&(e.preventDefault(),A(e))}:void 0,zoomable:!0,deletable:!0,multiple:!0,accept:j,maxFiles:Z,title:I?"Drag and drop, upload / history":void 0})},"upload"),S?S.map(e=>(0,r.jsx)(u.Z,{children:(0,r.jsxs)(a.Z,{sx:{position:"relative",pointerEvents:"auto",aspectRatio:"1/1",width:"100%",border:e.isNSFW?"3px solid #EC681E":e.error?"3px solid red":"",borderRadius:"20px",maxHeight:"unset",cursor:"pointer"},children:[(0,r.jsx)(s.Z,{color:"primary",component:"span",onClick:()=>D(e),sx:{position:"absolute",top:6,right:10,zIndex:1,background:"rgba(0,0,0,0.6)",cursor:"pointer"},children:(0,r.jsx)(w.Z,{icon:"ic:round-delete-outline",sx:{width:20,height:20}})}),(0,r.jsx)("img",{width:"100%",height:"100%",alt:"",src:e.imageUrl,style:{objectFit:"cover",width:"100%",height:"100%",borderRadius:"20px"}})]})},e.imageUrl)):null]})})}),I?T:null,"bottom"===k&&q(S)]})}}}]);