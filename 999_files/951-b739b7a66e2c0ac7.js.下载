(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{93173:function(e,t,r){"use strict";var i=r(52676),a=r(75271),n=r(87261),o=r(22988),s=r(56407),l=r(80110),c=r(23187),d=r(13724),h=r(8928),u=r(90043),p=r(72509),g=r(97779),m=r(46973);let x=(0,h.ZP)(o.Z,{shouldForwardProp:e=>"expand"!==e})(e=>{let{theme:t,expand:r}=e;return{transform:r?"rotate(0deg)":"rotate(180deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}),f=(0,a.memo)(function(e){let{value:t,onChange:r,samples:h,allowChooseFromHistory:f=!0,title:b=f?"Drag and drop, upload, or select from history":"Click or drop image to upload",setImgLoading:v,extendFiledValues:y,url:w="/media/upload_image",accept:C,slot:j,disabled:A,checked:Z,sx:k,uploadAvatarSx:S,..._}=e,[I,M]=(0,a.useState)(!1),[R,F]=(0,a.useState)(),{isMobile:P,isDesktop:E}=(0,g.j)(),T=(0,a.useRef)(null),[B,D]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&(!R||R.preview!==t)&&F({preview:t})},[t]);let z=async e=>{if(e&&(!Z||await Z(e))){F({file:e});let t=new FormData;t.append("file",e),M(!0),null==v||v(!0),await m.ZP.post(w,t,{headers:{"Content-Type":"multipart/form-data"}}).then(async e=>{if(200===e.status&&e.data){let{imageUrl:t}=e.data;r(t)}}).finally(()=>{M(!1),null==v||v(!1)})}else F(void 0),r()},L=e=>{F({preview:e}),r(e)},{UploadContextMenu:U,handleMenuOpen:W}=(0,p.w)({onChange:e=>{if(e&&e.length>0){let t=e[0];F({preview:t}),r(t)}},onClickUpload:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.triggerInputClick()},maxSelectionCount:1});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{sx:{borderRadius:1,p:P?0:1,...k},..._,children:(0,i.jsxs)(s.Z,{alignItems:"center",spacing:1,children:[(0,i.jsx)(u.Z,{ref:T,isUploading:I,file:R,bordered:!1,title:b,sx:{borderRadius:0,margin:0,width:"100%",...S},dropZoneSx:{borderRadius:0},onChange:z,onAreaClick:f?W:void 0,zoomable:!0,deletable:!0,accept:C,disabled:A}),f?U:null,h?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{sx:{width:"100%"},children:(0,i.jsx)(l.Z,{variant:"body2",children:"Or try with one of ours"})}),(0,i.jsx)(s.Z,{direction:"row",flexWrap:"wrap",justifyContent:"space-around",alignItems:"start",sx:{width:"100%",minWidth:E?"340px":""},children:h.slice(0,B?void 0:3).map(e=>{let{url:t}=e;return(0,i.jsx)(o.Z,{sx:{p:"8px 4px"},children:(0,i.jsx)(d.Z,{onClick:()=>L(t),sx:{cursor:"pointer"},children:(0,i.jsx)("img",{src:t,alt:"Sample",style:{objectFit:"cover",height:100,width:100}})})},t)})}),h.length<=3?null:(0,i.jsxs)(s.Z,{direction:"row",spacing:2,sx:{textAlign:"center",mt:1,padding:"4px",borderRadius:"4px",cursor:"pointer",width:"100%"},justifyContent:"center",alignItems:"center",onClick:()=>{D(!B)},children:[(0,i.jsx)(l.Z,{variant:"caption",children:B?"Less examples":"More examples"}),(0,i.jsx)(x,{expand:!B,sx:{display:"flex",alignItems:"center"},children:(0,i.jsx)(n.Z,{})})]})]}):null]})}),j]})}),b=(0,h.ZP)(e=>(0,i.jsx)(f,{...e}))(e=>{let{theme:t}=e;return{border:`1px dashed ${t.palette.grey[50032]}`}});t.Z=b},39781:function(e,t,r){"use strict";r.d(t,{gy:function(){return ek},$L:function(){return tM},WP:function(){return tz},zK:function(){return p},MY:function(){return tE},Z6:function(){return g},YO:function(){return eu},qz:function(){return M},cZ:function(){return ey},Qp:function(){return R},WL:function(){return eR}});var i=r(52676),a=r(56407),n=r(80110),o=r(77379),s=r(75542),l=r(7999),c=r(79446),d=r(27806),h=r(16585);let u=[{title:"Start with 4+ Images",description:"Have 4+ high-quality images? Skip previews and create character directly.",mode:"four_more_images",imageUrl:"/_next/static/media/create_from_four_more_images.8b021e2e.svg"},{title:"Start with One Image",description:"Upload one image to guide the design.",mode:"image",imageUrl:"/_next/static/media/create_from_one_image.4d84e41d.svg"},{title:"Start with Description",description:"Describe your character. You'll preview visuals before finalizing.",mode:"description",imageUrl:"/_next/static/media/create_from_description.091bba99.svg"}],p=e=>{let{onDialogOpen:t}=e,r=(0,c.B)(),p=eR(e=>e.setCreateCharacterMode),g=e=>{p(e),t(),h.B("character_creation_started",{creation_method:e})};return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(n.Z,{variant:"h3",component:"h1",sx:{display:"flex",flexWrap:"wrap",fontWeight:700},children:"Create Your Character"}),(0,i.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",pb:1,children:[(0,i.jsx)(n.Z,{variant:"body2",color:"text.secondary",fontSize:16,fontWeight:500,children:"Start building characters to use in your future image creation!"}),(0,i.jsx)(o.Z,{size:"small",variant:"outlined",component:"a",href:"https://www.youtube.com/watch?v=k4dZBQ5d5Lo",target:"_blank",rel:"noopener noreferrer",startIcon:(0,i.jsx)(d.PhMonitorPlay,{}),sx:{flexShrink:0,p:"4px 12px",borderColor:l.UX,borderRadius:l.E0},children:"Tutorial"})]}),(0,i.jsx)(a.Z,{sx:{flexDirection:{xs:"column",md:"row"},alignItems:"stretch",gap:2,mt:1},children:u.map((e,t)=>(0,i.jsx)(a.Z,{sx:{flex:1},children:(0,i.jsx)(s.Z,{in:!0,timeout:300+100*t,style:{flex:1,display:"flex",alignItems:"stretch"},children:(0,i.jsx)(a.Z,{sx:{height:"100%"},children:(0,i.jsx)(tz,{title:e.title,description:e.description,imageUrl:e.imageUrl,onClick:()=>{r({onAuthenticated:()=>g(e.mode)})}})})})},e.title))})]})},g=e=>{let{characterModel:t}=e;return(0,i.jsx)(a.Z,{spacing:2,children:(0,i.jsx)(tE,{character:t})})};var m=r(75271),x=r(27574),f=r(19242),b=r(13724),v=r(24181);let y=()=>(0,i.jsxs)(b.Z,{sx:{position:"relative",width:"100%",p:2,bgcolor:"#222",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[(0,i.jsx)(v.Z,{variant:"circular",width:128,height:128,sx:{bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,i.jsx)(v.Z,{variant:"text",width:"80%",height:24,sx:{bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,i.jsx)(v.Z,{variant:"text",width:"60%",height:16,sx:{bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,i.jsx)(v.Z,{variant:"rounded",width:"100%",height:36,sx:{bgcolor:"rgba(255, 255, 255, 0.1)",borderRadius:"6px"}})]});var w=r(90117),C=r(24088),j=r(48867),A=r(52423),Z=r(19005),k=r(53138),S=r(38218),_=r(86660),I=r(42422);let M=e=>{let{hasTestingFeatures:t,onDeleteCharacter:r,showExpandButton:c=!0}=e,{data:h}=(0,Z.$_)(),u=(0,S.fE)(h)===k.Qe.Team,[p,g]=(0,m.useState)(!c),[b,v]=(0,m.useState)(!1),{ref:M,inView:R}=(0,f.YD)();(0,m.useEffect)(()=>{if(R){let e=setTimeout(()=>{v(!0)},200);return()=>clearTimeout(e)}},[R]);let F=(0,j.k)(),{data:P=[],isLoading:E}=(0,A.Wr)(),T=(0,_.Z)("up","sm"),B=(0,_.Z)("up","md"),D=(0,_.Z)("up","lg"),z=(0,_.Z)("up","xl"),L=Object.values({xs:{match:(0,_.Z)("down","sm"),displayCount:2},sm:{match:T&&!B,displayCount:2},md:{match:B&&!D,displayCount:3},lg:{match:D&&!z,displayCount:5},xl:{match:z,displayCount:6}}).find(e=>e.match),U=P.length>L.displayCount,W=U&&!p?P.slice(0,L.displayCount):P;return(0,i.jsxs)(a.Z,{spacing:2,children:[(0,i.jsx)(n.Z,{variant:"h4",component:"h2",sx:{fontSize:{xs:32}},children:u?"Shared Team Characters":"My Characters"}),u?(0,i.jsx)(x.Z,{severity:"info",children:"All characters created by team members are automatically shared with your teamâ€”but remain private to everyone outside your team."}):null,F?E?(0,i.jsx)(a.Z,{sx:{display:"grid",gap:{xs:1,md:2},gridTemplateColumns:`repeat(${L.displayCount}, 1fr)`},children:Array.from({length:L.displayCount},(e,t)=>(0,i.jsx)(y,{},`character-skeleton-${t}`))}):0===P.length?(0,i.jsx)(n.Z,{variant:"body2",color:"text.secondary",children:"You haven't created any characters yet. Create your first character above!"}):(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(a.Z,{ref:M,sx:{display:"grid",gap:{xs:1,md:2},gridTemplateColumns:`repeat(${L.displayCount}, 1fr)`},children:W.map((e,a)=>(0,i.jsx)("div",{children:(0,i.jsx)(s.Z,{in:b,timeout:300+100*a,children:(0,i.jsx)("div",{children:(0,i.jsx)(eu,{character:e,hasTestingFeatures:t,onDelete:()=>r(e.id)})})})},e.id))}),U&&!p?(0,i.jsxs)(o.Z,{variant:"contained",fullWidth:!0,onClick:()=>g(!p),sx:{mt:2,bgcolor:"rgba(182, 182, 182, 0.06)",color:"#B5B5B5","&:hover":{bgcolor:"#2A2A2A"}},children:["Show All Characters ",(0,i.jsx)(d.PhCaretDown,{})]}):null]}):(0,i.jsxs)(n.Z,{variant:"body2",color:"text.secondary",children:["Please"," ",(0,i.jsx)(w.r,{href:(0,I.uX)(C.eb),color:l.MK,underline:"always",children:"sign in"})," ","to view your characters."]})]})},R=e=>{let{showExpandButton:t=!0}=e;return(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsx)(n.Z,{variant:"h4",component:"h2",sx:{fontSize:{xs:32}},children:"Character Library"}),(0,i.jsx)(n.Z,{variant:"body2",color:"text.secondary",fontSize:16,fontWeight:500,pb:1,children:"Use these characters to get started quickly!"}),(0,i.jsx)(ey,{showExpandButton:t})]})};var F=r(88651),P=r(33893),E=r(58684),T=r(22988),B=r(29984),D=r(11685),z=r(43246),L=r(91415),U=r(82639),W=r(80148),H=r(16483),O=r.n(H),V=r(8765),Y=r(97792),N=r(11955),X=r(72660),G=r(45138),Q=r(35570),q=r(67936),J=r(94009),K=r.n(J),$=r(34216),ee=r(32897),et=r(91717),er=r(28989);let ei=".png,.jpg,.jpeg,.webp";function ea(e){let{value:t,onAvatarChange:r,isUploadFirst:s=!1,...c}=e,[d,h]=(0,m.useState)(1),[u,p]=(0,m.useState)(0),g=(0,m.useRef)(null),x=(0,m.useRef)(null),[f,b]=(0,m.useState)(!1),[v,y]=(0,et.i3)(),[w,C]=(0,m.useState)(""),j=w||t;(0,m.useEffect)(()=>{if(s&&c.open&&!w){var e;null===(e=x.current)||void 0===e||e.click()}},[s,c.open,w]);let A=async()=>{try{var e,t;if(!g.current)return;if(!f){null==r||r(j),null===(t=c.onClose)||void 0===t||t.call(c,{},"backdropClick");return}let i=g.current.getImage(),a=await new Promise((e,t)=>{i.toBlob(r=>{r?e(r):t(Error("Failed to convert canvas to blob"))},"image/webp",1)}),n=new File([a],"avatar.webp",{type:"image/webp"}),o=await v({file:n});null==r||r(o.imageUrl),null===(e=c.onClose)||void 0===e||e.call(c,{},"backdropClick")}catch(e){console.error("Failed to save avatar:",e),(0,er.cB)(e)}},[Z,k]=(0,m.useState)(!1),S=async e=>{var t,r,i;try{k(!0);let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!i){s&&(null===(r=c.onClose)||void 0===r||r.call(c,{},"backdropClick"));return}let a=await v({file:i});C(a.imageUrl),b(!1)}catch(e){(0,er.cB)(e),s&&(null===(i=c.onClose)||void 0===i||i.call(c,{},"backdropClick"))}finally{k(!1),x.current&&(x.current.value="")}};return s&&!w?(0,i.jsx)("input",{ref:x,type:"file",multiple:!1,accept:ei,onChange:S,style:{display:"none"}}):(0,i.jsxs)(Y.Z,{...c,sx:{"& .MuiDialog-paper":{maxWidth:{xs:"100%",md:800},width:"100%"}},children:[(0,i.jsxs)(N.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:["Edit Avatar",(0,i.jsx)($.h,{dark:!1,onClick:e=>{var t;null===(t=c.onClose)||void 0===t||t.call(c,e,"backdropClick")},sx:{ml:"auto"}})]}),(0,i.jsx)(X.Z,{children:(0,i.jsxs)(a.Z,{spacing:4,direction:{xs:"column",md:"row"},children:[(0,i.jsx)(T.Z,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:l.E0},children:(0,i.jsx)(K(),{ref:g,image:j,width:250,height:250,border:50,borderRadius:125,color:[0,0,0,.6],scale:d,rotate:u,crossOrigin:"anonymous",onImageChange:()=>b(!0)})}),(0,i.jsxs)(a.Z,{spacing:{xs:2,md:4},sx:{flex:1},children:[(0,i.jsxs)(a.Z,{spacing:{xs:1,md:2},children:[(0,i.jsx)(n.Z,{variant:"subtitle1",children:"Zoom"}),(0,i.jsx)(q.ZP,{value:d,min:1,max:3,step:.1,onChange:(e,t)=>h(t),valueLabelDisplay:"auto"})]}),(0,i.jsxs)(a.Z,{spacing:{xs:1,md:2},children:[(0,i.jsx)(n.Z,{variant:"subtitle1",children:"Rotate"}),(0,i.jsx)(q.ZP,{value:u,min:0,max:360,step:1,onChange:(e,t)=>p(t),valueLabelDisplay:"auto"})]}),(0,i.jsx)("input",{ref:x,type:"file",multiple:!1,accept:ei,onChange:S,style:{display:"none"}}),(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsxs)(ee.X2,{spacing:2,children:[(0,i.jsx)(o.Z,{variant:"outlined",onClick:()=>{h(1),p(0)},sx:{flex:1},children:"Reset"}),(0,i.jsx)(E.Z,{fullWidth:!0,loading:Z,variant:"outlined",onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},sx:{flex:1},children:"Upload"})]}),(0,i.jsx)(E.Z,{loading:y&&!Z,disabled:Z,variant:"primary",onClick:A,sx:{flex:1,height:44},children:"Save"})]})]})]})})]})}var en=r(34061);function eo(e){let{character:t,onSave:r,...s}=e,[c,h]=(0,m.useState)(t.character_name??""),[u,p]=(0,m.useState)(t.thumbnail),[g,x]=(0,m.useState)(!1),[f,b]=(0,m.useState)(!1),[v,y]=(0,A.c6)(),w=(0,m.useCallback)(()=>{var e;null===(e=s.onClose)||void 0===e||e.call(s,{},"backdropClick")},[s.onClose]),C=async()=>{try{if(!c)throw Error("Please enter character name");let e={id:t.id,character_name:c,thumbnail:u};await v(e),null==r||r(e),w()}catch(e){(0,er.cB)(e)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Y.Z,{...s,sx:{"& .MuiDialog-paper":{width:"100%",maxWidth:680,bgcolor:"rgba(41, 41, 41, 1)"}},children:[(0,i.jsxs)(N.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:["Edit Character",(0,i.jsx)($.h,{dark:!1,onClick:w})]}),(0,i.jsx)(X.Z,{children:(0,i.jsxs)(a.Z,{direction:{xs:"column",md:"row"},spacing:"18px",alignItems:"flex-start",children:[(0,i.jsxs)(a.Z,{spacing:2,alignItems:"center",alignSelf:"stretch",p:2,bgcolor:"rgba(29, 29, 29, 1)",borderRadius:"8px",children:[(0,i.jsx)(T.Z,{sx:{borderRadius:"50%",border:`1px solid ${l.tv}`},children:u?(0,i.jsx)(en.L6,{src:u,alt:"Character Avatar",sx:{borderRadius:"50%",width:"248px",height:"248px",objectFit:"cover"}}):null}),(0,i.jsxs)(ee.X2,{spacing:1,sx:{button:{padding:"8px 16px",fontSize:"16px",fontWeight:400,bgcolor:"black",color:"white"}},children:[(0,i.jsx)(o.Z,{variant:"contained",startIcon:(0,i.jsx)(d.PhUploadSimple,{size:16}),onClick:()=>{x(!1),setTimeout(()=>{b(!0),x(!0)},100)},sx:{borderRadius:l.E0},children:"Upload New"}),(0,i.jsx)(o.Z,{variant:"contained",startIcon:(0,i.jsx)(d.PhPencilSimple,{size:16}),onClick:()=>{x(!1),setTimeout(()=>{b(!1),x(!0)},100)},sx:{borderRadius:l.E0},children:"Adjust"})]})]}),(0,i.jsxs)(a.Z,{spacing:3,flexGrow:1,width:{xs:"100%",md:"auto"},children:[(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsx)(n.Z,{variant:"body2",color:"text.secondary",children:"Character Name"}),(0,i.jsx)(G.Z,{value:c,onChange:e=>h(e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:l.E0}}})]}),t.short_description?(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsxs)(n.Z,{variant:"body2",color:"text.secondary",display:"flex",flexDirection:"row",alignItems:"center",gap:1,children:["Short Description ",(0,i.jsx)(d.PhPencilSimpleSlash,{size:16})]}),(0,i.jsx)(G.Z,{value:t.short_description,disabled:!0,multiline:!0,minRows:8,sx:{"& .MuiOutlinedInput-root":{borderRadius:l.E0}}})]}):null]})]})}),(0,i.jsxs)(Q.Z,{children:[(0,i.jsx)(o.Z,{onClick:w,variant:"outlined",sx:{borderRadius:l.E0,height:44},children:"Cancel"}),(0,i.jsx)(E.Z,{onClick:C,loading:y,variant:"contained",className:"oa-button-primary",startIcon:(0,i.jsx)(d.PhCheck,{}),sx:{borderRadius:l.E0,height:44},children:"Save Changes"})]})]}),(0,i.jsx)(ea,{open:g,value:u,onAvatarChange:e=>{p(e)},onClose:()=>x(!1),isUploadFirst:f},g?"open":"closed")]})}var es=r(24368),el=r(24916),ec=r(37838),ed=r(15830),eh=r(97779);function eu(e){let{character:t,onDelete:r,onEdit:o,hasTestingFeatures:s}=e,{confirm:c}=(0,es.aT)(),d=(0,m.useRef)(null),[h,u]=(0,m.useState)(!1),[p,g]=(0,m.useState)(!1),[x,f]=(0,ec.jC)(),{showModal:v}=(0,V.dd)(),{isMobile:y,isDesktop:w}=(0,eh.j)(),{progress:C,finalized:j}=(0,A.hF)(t.id,!A.tK.has(t.status),t.created_at._seconds);(0,m.useEffect)(()=>{if(A.tK.has(t.status)||j)return;let e=setInterval(()=>{k(e=>!e)},6e3);return()=>clearInterval(e)},[t.status,j]);let[Z,k]=(0,m.useState)(!1),S=e=>{e.stopPropagation(),e.preventDefault(),x({base_model:t.model_id,parameters:{},clickEvent:e},ed.V.CHARACTER)},_=()=>{c({title:"Delete Character",content:"Are you sure you want to delete this character? This action cannot be undone.",iconType:"warning",confirmText:"Delete",confirmProps:{variant:"contained",color:"error",sx:{backgroundColor:"error.main","&:hover":{backgroundColor:"error.dark"}}},onConfirm:async()=>{await (null==r?void 0:r())}})},I=async e=>{await (null==o?void 0:o(e))},M="completed"!==t.status&&"failed"!==t.status,R="failed"===t.status,H="completed"===t.status,Y=()=>(0,i.jsx)(E.Z,{variant:y?"secondary":"primary",onClick:S,loading:f,sx:{minWidth:"auto",px:3,width:{xs:"100%",md:"auto"}},children:"Create"});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(b.Z,{onClick:S,sx:{position:"relative",width:"100%",p:2,bgcolor:"#222",borderRadius:l.E0,"& > *":{p:"0!important"},display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",cursor:"pointer","&:hover":{".character-image-wrapper":H&&w?{borderRadius:1,"& .image-overlay":{opacity:1}}:{}}},children:[(0,i.jsx)(P.Z,{ref:d,sx:{position:"absolute",top:"0px",right:"8px",cursor:"pointer",opacity:{xs:1,md:0},transition:"opacity 0.2s ease-in-out",zIndex:1,".MuiCard-root:hover &":{opacity:.7},"&:hover":{opacity:"1!important"}},onClick:e=>{e.stopPropagation(),u(!0)}}),(0,i.jsxs)(D.Z,{open:h,anchorEl:d.current,onClose:()=>u(!1),onClick:e=>e.stopPropagation(),children:[(0,i.jsx)(z.Z,{onClick:()=>{g(!0),u(!1)},disabled:M||R,children:"Edit"}),s?(0,i.jsx)(z.Z,{onClick:()=>{v(el.H,{model_id:t.model_id}),u(!1)},children:"Show Training Images"}):null,(0,i.jsx)(z.Z,{onClick:()=>{_(),u(!1)},sx:{color:"error.main"},children:"Delete"})]}),(0,i.jsxs)(T.Z,{sx:{position:"relative",width:128,height:128},children:[(0,i.jsxs)(T.Z,{className:"character-image-wrapper",sx:{width:"100%",height:"100%",position:"relative",borderRadius:"50%",overflow:"hidden",transition:"border-radius 0.2s ease-in-out"},children:[(0,i.jsx)(L.Z,{component:"img",image:t.thumbnail,sx:{width:"100%",height:"100%",p:"0!important",objectFit:"cover",filter:M?"blur(2px)":"none",transition:"all 0.3s ease-in-out"}}),H?(0,i.jsx)(T.Z,{className:"image-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s ease-in-out",borderRadius:"inherit"},children:Y()}):null,R?(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:"4px",sx:{zIndex:10,position:"absolute",height:"100%",width:"100%",top:0,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"inherit"},children:[(0,i.jsx)(n.Z,{variant:"body1",fontWeight:"bold",color:"error",children:"Failed"}),(0,i.jsx)(U.Z,{title:"Sorry, there was a minor issue with the character creation. Credits have already been returned.",placement:"top",children:(0,i.jsx)(F.Z,{fontSize:"small",color:"error"})})]}):null]}),M&&C?(e=>{let t="rgba(74, 13, 255, 1)";return(0,i.jsx)(T.Z,{sx:{position:"absolute",top:"-2px",left:"-2px",display:"flex",alignItems:"center",justifyContent:"center",width:136,height:136,"&::after":{content:`"${e}%"`,position:"absolute",bottom:4,bgcolor:t,borderRadius:"45px",px:"10px",fontSize:"16px",fontWeight:600,color:"white"}},children:(0,i.jsx)(B.Z,{variant:"determinate",thickness:2,value:e,size:136,sx:{color:t,"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}})})})(C):null]}),(0,i.jsxs)(W.Z,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",width:"100%"},children:[(0,i.jsx)(n.Z,{variant:"body1",fontSize:16,fontWeight:700,color:"white",textAlign:"center",sx:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.character_name}),(0,i.jsxs)(n.Z,{variant:"caption",color:"text.secondary",fontSize:12,fontWeight:500,textAlign:"center",lineHeight:1.2,sx:{mb:{xs:.5,md:0}},children:["Created at ",O()(1e3*t.created_at._seconds).fromNow()]}),H&&y?Y():null]})]}),(0,i.jsx)(eo,{open:p,character:t,onClose:()=>g(!1),onSave:I})]})}var ep=r(56547),eg=r(11577),em=r(66061);let ex={xs:"5px",md:"9px"};function ef(e){let{name:t,image:r,modelId:o,sx:s,createdBy:l}=e,[c,d]=(0,ec.jC)(),h=(0,eg.R)(),{isMobile:u}=(0,eh.j)(),p=e=>{e.stopPropagation(),e.preventDefault(),c({base_model:o,parameters:{},clickEvent:e},ed.V.CHARACTER)},g=()=>(0,i.jsx)(E.Z,{variant:u?"secondary":"primary",loading:d,component:w.Z,to:(0,em.nt)(o,{finetuned_model_name:t}),target:h,onClick:p,sx:{minWidth:120},children:"Create"});return(0,i.jsx)(ep.Z,{component:"div",onClick:p,sx:{width:"100%",flexShrink:0,borderRadius:ex,transition:"all 0.2s ease-in-out",background:"#222",p:"12px",position:"relative","&:hover":{"& .overlay":{opacity:{md:1}}},...s},children:(0,i.jsxs)(a.Z,{width:"100%",spacing:1,children:[(0,i.jsxs)(a.Z,{position:"relative",children:[(0,i.jsx)(en.L6,{src:r,alt:t,sx:{width:"100%",aspectRatio:"1/1",objectFit:"cover",display:"block",borderTopLeftRadius:ex,borderTopRightRadius:ex}}),(0,i.jsx)(a.Z,{className:"overlay",position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",sx:{opacity:0,transition:"opacity 0.2s ease-in-out",background:"rgba(0, 0, 0, 0.5)",borderTopLeftRadius:ex,borderTopRightRadius:ex},children:g()})]}),(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(n.Z,{variant:"body1",color:"white",fontSize:16,fontWeight:700,children:t}),u?null:(0,i.jsx)(n.Z,{variant:"body2",color:"text.secondary",fontSize:12,fontWeight:400,sx:{mb:{xs:.5,md:0}},children:l?`Created by ${l}`:""}),u?g():null]})]})})}var eb=r(19509),ev=r(59809);function ey(e){let{sx:t,showExpandButton:r=!0}=e,[a,n]=(0,m.useState)(!r),s=(0,_.Z)("up","sm"),l=(0,_.Z)("up","md"),c=(0,_.Z)("up","lg"),h=(0,_.Z)("up","xl"),u=Object.values({xs:{match:(0,_.Z)("down","sm"),displayCount:4},sm:{match:s&&!l,displayCount:4},md:{match:l&&!c,displayCount:6},lg:{match:c&&!h,displayCount:8},xl:{match:h,displayCount:10}}).find(e=>e.match),p=ev.M.length>u.displayCount,g=p&&!a?ev.M.slice(0,u.displayCount):ev.M;return(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(eb.ZP,{container:!0,spacing:{xs:1,md:2},sx:{...t},children:g.map((e,t)=>(0,i.jsx)(eb.ZP,{item:!0,xs:6,md:4,lg:3,xl:2.4,children:(0,i.jsx)("div",{children:(0,i.jsx)(ef,{name:e.character_name,image:e.thumbnail,modelId:e.model_id,createdBy:e.username,sx:{flexShrink:0}},e.model_id)})},e.model_id))}),p&&!a?(0,i.jsxs)(o.Z,{variant:"contained",fullWidth:!0,onClick:()=>n(!0),sx:{mt:2,bgcolor:"rgba(182, 182, 182, 0.06)",color:"#B5B5B5","&:hover":{bgcolor:"#2A2A2A"}},children:["Show All Characters ",(0,i.jsx)(d.PhCaretDown,{})]}):null]})}function ew(e){let{title:t,image:r,sx:o,loading:s,onClick:l,isVideo:c,videoUrl:h}=e,{isMobile:u}=(0,eh.j)(),[p,g]=(0,m.useState)(!1),x=(0,m.useRef)(null);return(0,m.useEffect)(()=>{p&&x.current?x.current.play():!p&&x.current&&(x.current.pause(),x.current.currentTime=0)},[p]),(0,i.jsxs)(T.Z,{onClick:e=>{u&&l&&l(e)},sx:{position:"relative",flex:1,borderRadius:2,overflow:"hidden",bgcolor:"rgba(255, 255, 255, 0.08)","&:hover .template-overlay":{opacity:1},"&:hover .template-button":{opacity:1},pb:1},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[c?(0,i.jsx)(T.Z,{sx:{position:"absolute",top:10,right:10,zIndex:2,color:"white",backgroundColor:"rgba(1, 1, 1, 0.2)",border:"1px solid rgba(255, 255, 255, 0.13)",borderRadius:"50%",padding:"4px",height:"20px",width:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(d.PhPlayFill,{})}):null,c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.Z,{component:"img",src:r,alt:t,sx:{width:"100%",height:{xs:98,md:136},display:p?"none":"block",...o}}),(0,i.jsx)(T.Z,{component:"video",ref:x,src:h,loop:!0,muted:!0,playsInline:!0,autoPlay:p,sx:{width:"100%",height:{xs:98,md:136},objectFit:"cover",objectPosition:"top",zIndex:1,display:p?"block":"none",borderRadius:"6px",...o}})]}):(0,i.jsx)(T.Z,{component:"img",src:r,alt:t,sx:{width:"100%",height:{xs:98,md:136},...o}}),u?null:(0,i.jsx)(T.Z,{className:"template-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.5)",opacity:0,transition:"opacity 0.2s",width:"100%",height:{xs:200,md:136}},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1)}),u?(0,i.jsxs)(a.Z,{alignItems:"center",children:[(0,i.jsx)(n.Z,{sx:{p:1.5,color:"white"},fontWeight:700,fontSize:14,children:t}),(0,i.jsx)(E.Z,{variant:"secondary",onClick:l,loading:s,sx:{minWidth:"auto",px:3,width:"106px"},children:"Use it ->"})]}):(0,i.jsx)(n.Z,{sx:{p:1.5,color:"white"},fontWeight:700,fontSize:16,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:t}),!u&&(0,i.jsx)(E.Z,{loading:s,className:"template-button",variant:"primary",onClick:l,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.2s",whiteSpace:"nowrap"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:"Use this template ->"})]})}function eC(e){let{onCloseAnyway:t,...r}=e,a=()=>{var e;null===(e=r.onClose)||void 0===e||e.call(r,{},"backdropClick")};return(0,i.jsxs)(Y.Z,{...r,children:[(0,i.jsxs)(N.Z,{sx:{mb:1.5},children:[(0,i.jsx)(n.Z,{variant:"h4",color:"white",fontWeight:700,children:"Are you sure you want to exit?"}),(0,i.jsx)($.h,{dark:!1,onClick:a,sx:{position:"absolute",top:10,right:10}})]}),(0,i.jsx)(X.Z,{children:(0,i.jsx)(n.Z,{variant:"body1",color:"white",fontSize:16,fontWeight:500,children:"You haven't started creating your character yet. If you close now, your progress will not be saved. You can come back later and start again later."})}),(0,i.jsxs)(Q.Z,{sx:{borderTop:`1px solid ${l.UX}`},children:[(0,i.jsx)(o.Z,{variant:"text",onClick:a,sx:{textDecoration:"underline",textTransform:"none"},children:"Go back"}),(0,i.jsx)(o.Z,{variant:"contained",onClick:()=>{a(),t()},sx:{borderRadius:l.E0,textTransform:"none",bgcolor:"rgba(255, 0, 0, 0.7)",color:"white","&:hover":{bgcolor:"red"}},children:"Close anyway"})]})]})}var ej=r(14231);let eA={color:"white",borderRadius:l.E0,p:"8px 20px",textTransform:"none"},eZ=new Set([ej.fp.Default,ej.fp.Architecture,ej.fp.Interior,ej.fp.Minecraft]),ek=[{name:"Custom",value:"Custom",thumbnail_url:""},...ej.x1.filter(e=>!eZ.has(e.name))];var eS=r(2345),e_=r(52973),eI=r(57170);let eM={creationFlowType:"description",currentStep:0,params:{character_name:"",short_description:"",style:"",generated_visuals:[],selected_visual:"",source_image_url:"",sample_images:[],settings:{expand_expression_count:13,character_clone_count:16,custom_training_steps:1e3,custom_learning_rate:615e-6}},isCreatingPreviewVisuals:!1,isCreatingCharacter:!1,previewVisualsHistoryId:"",previewVisualsMediaResourceIds:[],characterId:""},eR=(0,eS.U)()((0,e_.mW)((e,t)=>({...eM,reset:()=>e(eM,!1,{type:"character/reset",initStore:eM}),setCreateCharacterMode:t=>e({creationFlowType:t},!1,{type:"character/setCreateCharacterMode",mode:t}),setCurrentStep:t=>e({currentStep:t},!1,{type:"character/setCurrentStep",step:t}),setParams:r=>e({params:"function"==typeof r?r(t().params):r},!1,{type:"character/setParams",params:r}),setIsCreatingPreviewVisuals:t=>e({isCreatingPreviewVisuals:t},!1,{type:"character/setLoadingPreviews",loading:t}),setIsCreatingCharacter:t=>e({isCreatingCharacter:t},!1,{type:"character/setIsCreatingCharacter",isCreating:t}),setPreviewVisualsHistoryId:t=>e({previewVisualsHistoryId:t},!1,{type:"character/setPreviewVisualsHistoryId",id:t}),setPreviewVisualsMediaResourceIds:t=>e({previewVisualsMediaResourceIds:t},!1,{type:"character/setPreviewVisualsMediaResourceIds",ids:t}),setCharacterId:t=>e({characterId:t},!1,{type:"character/setCharacterId",id:t})}),{name:"character",enabled:!1,trace:!0})),eF=(0,eI.N)(eR),eP=e=>{let{currentStepConfig:t,handleBack:r,handleActionButtonClick:a,actionButtonLoading:s}=e,c=eF.use.currentStep(),h=eF.use.creationFlowType(),{isMobile:u}=(0,eh.j)(),p=u&&"Create Character"===t.actionButtonText,g=m.useCallback(()=>{var e;return(0,i.jsxs)(E.Z,{variant:"primary",loading:s,disabled:null===(e=t.actionButtonDisabled)||void 0===e?void 0:e.call(t),onClick:a,sx:{...eA,display:"flex",height:"44px",padding:"14px 36px !important",justifyContent:"center",alignItems:"center",gap:"8px !important",alignSelf:"stretch","&.Mui-disabled":{background:"#3C3C3C",color:"#ffffff30",cursor:"not-allowed"}},children:[(0,i.jsx)(n.Z,{component:"span",fontSize:16,fontWeight:600,children:null==t?void 0:t.actionButtonText}),(0,i.jsxs)(T.Z,{component:"span",display:"flex",alignItems:"center",gap:.5,children:[(0,i.jsx)(d.PhCurrencyEth,{size:20}),(0,i.jsx)(n.Z,{component:"span",fontSize:16,fontWeight:600,children:null==t?void 0:t.actionButtonCreditsCost()})]})]},null==t?void 0:t.label)},[s,t,a]),x=m.useCallback(()=>(0,i.jsxs)(Q.Z,{sx:{p:"12px!important",justifyContent:(null==t?void 0:t.backButtonText)?"space-between":"flex-end",alignItems:"center",borderTop:`1px solid ${l.UX}`,...p&&{flexDirection:"column",gap:1,alignItems:"center"}},children:[(null==t?void 0:t.backButtonText)&&!p?(0,i.jsx)(o.Z,{variant:"outlined",onClick:r,sx:{...eA},children:(0,i.jsx)(n.Z,{component:"span",fontSize:16,fontWeight:600,children:null==t?void 0:t.backButtonText})}):null,g(),p?(0,i.jsx)(o.Z,{variant:"text",onClick:r,sx:{...eA},children:(0,i.jsx)(n.Z,{component:"span",fontSize:16,fontWeight:600,color:"text.secondary",sx:{textDecoration:"underline"},children:null==t?void 0:t.backButtonText})}):null]}),[null==t?void 0:t.backButtonText,r,p,g]);switch(c){case 0:return(0,i.jsx)(T.Z,{display:"flex",justifyContent:"center",sx:{pb:{xs:"40px",md:"66px"},pt:{xs:"4px",md:"4px"},"& > button":{borderRadius:"5px",background:"#0929F7",height:"44px",padding:"10px 20px",gap:"10px",alignSelf:"stretch"},..."description"!==h&&{width:{xs:"100%",md:"44%"},px:{xs:3,md:0},maxWidth:"500px",margin:"0 auto","& > button":{width:"100%"}}},children:g()});case 1:return"description"===h?x():null;default:return null}};var eE=r(23802),eT=r(62168),eB=r(1163),eD=r(58031);let ez=e=>{let{currentStep:t,steps:r,handleClose:a}=e,{isMobile:n}=(0,eh.j)(),o=eF.use.creationFlowType(),s=()=>(0,i.jsx)(eE.Z,{activeStep:t,sx:{"& .MuiStepConnector-line":{maxWidth:"20px"},"& .MuiStepConnector-root":{width:"20px"}},children:r.map((e,r)=>{let{label:a}=e;return(0,i.jsx)(eT.Z,{children:(0,i.jsx)(eB.Z,{sx:{"& .MuiStepLabel-label":{color:"#808080",fontSize:12,fontWeight:500,userSelect:"none",transition:"all 0.2s",textAlign:"center",fontFamily:"Inter",fontStyle:"normal",lineHeight:"normal"},"& .MuiStepLabel-label.Mui-active":{color:"#FFF"},"& .MuiStepIcon-root":{width:"16px",height:"16px"},"& .MuiStepIcon-root.Mui-active, & .MuiStepIcon-root.Mui-completed":{color:"#0D99FF",backgroundColor:"#fff",borderRadius:"50%"},"& .MuiStepIcon-root:not(.Mui-active, .Mui-completed)":{color:"transparent",outline:"1px solid #0D99FF",borderRadius:"50%",boxSizing:"border-box",transform:"scale(0.95)"},"& .MuiStepIcon-text":{fill:t===r?"white":"#0D99FF",fontSize:"16px"}},children:a})},a)})}),l=()=>(0,i.jsx)(eD.Z,{variant:"text",steps:r.length,position:"static",activeStep:t,sx:{background:"transparent","& .MuiMobileStepper-dots":{display:"none"},"& .MuiMobileStepper-positionStatic":{padding:0}},nextButton:null,backButton:null});return(0,i.jsxs)(N.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",pt:"30px"},children:[(()=>{switch(o){case"description":return t<2?n?l():s():null;case"image":case"four_more_images":return null;default:return l()}})(),(0,i.jsx)($.h,{dark:!1,onClick:a,sx:{position:"absolute",top:22,right:22,width:30,height:30,"& svg":{color:"#FFF",opacity:1,transform:"scale(2.2)"}}})]})};var eL=r(76039),eU=r(17041),eW=r(59014),eH=r(4102),eO=r(80309),eV=r(68836),eY=r(38442),eN=r(93173);function eX(e){let{className:t,title:r,children:o,sx:s,rightTopComponent:l}=e;return(0,i.jsxs)(a.Z,{className:t,spacing:.5,sx:s,children:[(0,i.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(n.Z,{variant:"subtitle1",sx:{color:"#FFF",fontFamily:"Inter",fontSize:16,fontStyle:"normal",fontWeight:600,lineHeight:"24px",letterSpacing:"-0.24px",display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:r}),l]}),o]})}var eG=r(68170),eQ=r(30159),eq=r(16301),eJ={src:"/_next/static/media/blurry-face.9a0cda13.png",height:200,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAQlBMVEURc5cFcJcTXYEedJYGa44mdJMDX4U0epkEVnwDVnlZZ3BFe50OZZIkgq9afI+MorUzZYB2obxXjK1keIg8cZFWjq4wzyfFAAAACnRSTlP+/////////v75gbZWPwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADZJREFUeJwFwYkBgCAMBMFNuAQEFN/+W3UGIrxWjBIRSMcqQtY7Iu18dqEcl4uc9zeTrb3D2w8fgwFjbPxp3QAAAABJRU5ErkJggg==",blurWidth:6,blurHeight:8},eK={src:"/_next/static/media/check-icon.3a61af25.svg"},e$={src:"/_next/static/media/close-icon.76b6e357.svg"},e0={src:"/_next/static/media/full-body.c2e08ae5.png",height:200,width:176,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAMFBMVEX8/Pz9/f3////49vTu6+lnaWzPyMWRh4JUU1jZ0tDBq6B1dni0k4J/cmpJSku5urswqSc7AAAAAnRSTlP+9TF7B5gAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAzSURBVHicHcZJEsAwCASxoQHbibf//zZFTpJE7MAk+rhI6Iz8zZwlrT9UYjkI/C0NNcc+HKEA06pjWgoAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},e1={src:"/_next/static/media/half-body-1.83d250ff.png",height:200,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAYFBMVEVIMkjEiSBLP1leSETGiyWzhDeXd0rKkSiJa1bOnTyjiGZlUEvZozHVnCzfqTSimKKddlF0Y3NzVSHGlC+hdiePZijVrGNbOjnFq4SnhlCzlmm5jEBfTGV/bWq9l1JtUD0BIvNwAAAAEXRSTlP+4eLi++Di/v7+/eL//////pAcCiMAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA6SURBVHicBcEHAoAgDACxcwLaFnBv/v9LE1pdJudQW/dZEduSCXLFeAjyPjl/BA9p4D4LPtD1TT1WP09eAp/qXtmCAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e2={src:"/_next/static/media/half-body-2.17fd49cd.png",height:200,width:162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAZlBMVEUoNjRue2tNQjU5RDHR19Bia16IklhTXD9OSkI/UkCfgHyslYdyhnx3YVHc6uikpV5FNTN0UUSMZ1guHRdnY19YTEBvhEulsax2ZVlORFAfHiiAjGaAVjuij2tGKR6GeVwcKykvSmIUgk+yAAAAEHRSTlP7+f7x+v77/f7+/v72/vX50ZR+NgAAAAlwSFlzAAALEwAACxMBAJqcGAAAADtJREFUeJwFwYcBgCAQALFDqTYesHf3X9IElB66GsKiTaDq2yY5Ul5l8/hR9s/gpiwo5uMsr8Ved3niDzxYArBMPCcVAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e5={src:"/_next/static/media/multi-character.26709a77.png",height:200,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAYFBMVEWfgWeho5+YgnOam4yvy926y9uoiHB4sriwkiOkyNyzqZ6ScFCleVK7o5WPgF+dfGWlp6vm1tDGycJ/pYige2V+glqLjXbBk2uXkHhNRQ6FZTTBsaeeiXDRoRBfW0m/mIT6CkTnAAAACnRSTlP9/////////P79bmj9SwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADtJREFUeJwFwQcCwBAQAMHFOYJEei///2VmwIhIQ2+994IZ3L0vdO1ZtoOaV9UXOye+izG5XJQQpvjEHzjPAkmPFtpFAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e3={src:"/_next/static/media/smiling-face.6b32bc67.png",height:34,width:34,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAASFBMVEX/1zPXfQb8vzfdhQjskw1tAAD/sBpMaXHRdAT3ph/73HPztiv16mneqCzt4WfRpR///8r/AAD24l38pxT/+pb/41L/xCbmyCzmEYPaAAAAE3RSTlP+l5WemgL+AFBPnPz6+vz7/QL+MoNpGgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEBJREFUeJwFwYcRwCAMBLAHDG/Tc7T9N40ERsvZPoJ+z7k9YafX2o9BMN4bEMgFgCvQVVorSUG3UlqOYNQQNPIHXdMCZgaHBxMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},e4={src:"/_next/static/media/too-wide.7e75be76.png",height:200,width:162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAMAAADtGH4KAAAAKlBMVEX9/f3///8IChMiHyNHRkrU1NX////e3t3x8PCvrq5FIwmRe2C7urpTVV559TNsAAAABnRSTlP+9f39/vw2zvwoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAALUlEQVR4nDXFURIAEAhAwSepFPe/rmHG/iztwS5+GPGa02C5ewy6Vm2lS6bIARYqAO428PNsAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8},e6={src:"/_next/static/media/upside-down-face.c8c30e5b.png",height:40,width:40,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAUVBMVEVMaXH0tSz0mxL0kwfSdQTmjAj/uB7Yfgb+2DDLcgb5wjfQnSH7wDfy52n/33D//8T4ujTbxlHaxlD1tzHjhAb+qhT/zCn/5FLluSj//JX+6jmXWC2vAAAAFXRSTlMA+5lPT5n9mv1P+/uV/Jv9Tvr6Tk+Oq5NSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQElEQVR4nBXLxw3AIAAAsaN3SBF1/0Gj+G/grfUCyLu1nUHNcj9lKqT353gvMSOtlYZBdxGj6Bpct7a7vwXnAnxmLgKZRHZm+AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},e8=()=>{let[e,t]=(0,m.useState)(null);return(0,i.jsx)(eG.d,{onClickAway:()=>{t(null)},children:(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(n.Z,{variant:"body2",onClick:r=>{t(e?null:r.currentTarget)},sx:{cursor:"pointer",color:"#3551FF",display:"inline-block",fontWeight:400},children:"Example"}),(0,i.jsx)(eQ.Z,{open:!!e,anchorEl:e,placement:"bottom-start",sx:{zIndex:1300},children:(0,i.jsx)(eq.Z,{elevation:3,sx:{p:"22px 14px",mt:.5,bgcolor:"#2B2B2B",border:"1px solid #3F3F3F",borderRadius:"12px",width:"286.8px",boxSizing:"content-box"},children:(0,i.jsxs)(a.Z,{spacing:1.75,sx:{width:"100%"},children:[(0,i.jsxs)(a.Z,{spacing:.5,sx:{width:"100%"},children:[(0,i.jsx)(te,{title:"Recommended inputs",isRecommended:!0,emoji:e3}),(0,i.jsx)(eb.ZP,{container:!0,sx:{width:"100%",margin:0},children:(0,i.jsxs)(T.Z,{sx:{display:"flex",width:"100%",gap:"13.4px",justifyContent:"space-between"},children:[(0,i.jsx)(e7,{image:(0,i.jsx)(e9,{src:e0,alt:"Full body"}),text:"Full-body",isRecommended:!0}),(0,i.jsx)(e7,{image:(0,i.jsx)(e9,{src:e1,alt:"Half body 1"}),text:"Half-body",isRecommended:!0}),(0,i.jsx)(e7,{image:(0,i.jsx)(e9,{src:e2,alt:"Half body 2"}),text:"Half-body",isRecommended:!0})]})})]}),(0,i.jsxs)(a.Z,{spacing:.5,sx:{width:"100%"},children:[(0,i.jsx)(te,{title:"Not recommended inputs",isRecommended:!1,emoji:e6}),(0,i.jsx)(eb.ZP,{container:!0,sx:{width:"100%",margin:0},children:(0,i.jsxs)(T.Z,{sx:{display:"flex",width:"100%",gap:"13.4px",justifyContent:"space-between"},children:[(0,i.jsx)(e7,{image:(0,i.jsx)(e9,{src:eJ,alt:"Blurry face"}),text:"Blurry face",isRecommended:!1}),(0,i.jsx)(e7,{image:(0,i.jsx)(e9,{src:e5,alt:"Multi character"}),text:"Multi-character",isRecommended:!1}),(0,i.jsx)(e7,{image:(0,i.jsx)(e9,{src:e4,alt:"Too wide"}),text:"Too wide",isRecommended:!1})]})})]})]})})})]})})};let e9=e=>{let{src:t,alt:r}=e;return(0,i.jsx)(T.Z,{component:"img",src:t.src,alt:r,sx:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},e7=e=>{let{image:t,text:r,isRecommended:o,width:s=80}=e;return(0,i.jsxs)(T.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"3px",minWidth:s},children:[(0,i.jsx)(T.Z,{sx:{width:s,height:100,borderRadius:"4px",overflow:"hidden",backgroundColor:"#404042"},children:t}),(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:.5,sx:{maxWidth:"100px"},children:[(0,i.jsx)(T.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"transparent",width:8,height:8,flexShrink:0},children:(0,i.jsx)(T.Z,{component:"img",src:(o?eK:e$).src,alt:o?"Check":"Close",sx:{width:8,height:8,objectFit:"contain",maxWidth:"8px",maxHeight:"8px"}})}),(0,i.jsx)(n.Z,{variant:"caption",sx:{color:o?"#16D866":"#FF6363",fontWeight:500,fontSize:12,letterSpacing:"-0.02em",lineHeight:"1.33em",whiteSpace:"nowrap"},children:r})]})]})},te=e=>{let{title:t,isRecommended:r,emoji:o}=e;return(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:.5,justifyContent:"flex-start",width:"100%",children:[(0,i.jsx)(T.Z,{component:"img",src:o.src,alt:"Emoji",sx:{width:16,height:16,objectFit:"contain"}}),(0,i.jsx)(n.Z,{variant:"caption",sx:{color:r?"#16D866":"#FF6363",fontWeight:500,fontSize:12,letterSpacing:"-0.02em",lineHeight:"1.33em"},children:t})]})};var tt=r(44567);function tr(e){let{children:t,startIcon:r,sx:a,disabled:n,...o}=e;return(0,i.jsx)(E.Z,{variant:"outlined",size:"small",startIcon:r,disabled:n,sx:(0,tt.j)({p:.5,borderRadius:.5,minWidth:"auto",height:"24px",fontSize:"12px",color:"white",gap:.5,"& .MuiLoadingButton-loadingIndicator":{color:"white"},"& .MuiLoadingButton-loadingIndicator > .MuiCircularProgress-root":{width:"12px !important",height:"12px !important"},"& > .MuiButton-icon,& svg":{width:"12px",height:"12px",margin:0},...a}),...o,children:t})}function ti(e){let{url:t,label:r,selected:o,onClick:s}=e;return(0,i.jsx)(a.Z,{spacing:1,alignItems:"center",children:(0,i.jsx)(T.Z,{onClick:s,sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",aspectRatio:"1/1",position:"relative",cursor:"pointer",boxSizing:"border-box",outline:"none",borderRadius:"6px",overflow:"hidden",backgroundColor:"#303537",...o?{background:"linear-gradient(to bottom right, #0D99FF, #0D99FF)",padding:"2px","&::before":{content:'""',position:"absolute",inset:"2px",borderRadius:"4px",backgroundColor:"#303537",zIndex:0}}:{padding:"2px","&::before":{content:'""',position:"absolute",inset:"0",borderRadius:"6px",backgroundColor:"#303537",zIndex:0}},"&:hover":{"& .image-container":{opacity:1},"& .label-text":{opacity:1}},...o&&{"& .image-container":{opacity:1},"& .label-text":{opacity:1}}},children:(0,i.jsxs)(T.Z,{className:"image-container",sx:{width:"100%",height:"100%",position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"3.6px",overflow:"hidden",opacity:.5,transition:"opacity 0.2s ease"},children:["Custom"!==r?(0,i.jsx)("img",{src:t,alt:r,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,i.jsx)(d.PhPencilSimpleLine,{size:48}),(0,i.jsx)(T.Z,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"30%",background:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(3,3,3,1) 100%)",zIndex:2}}),(0,i.jsx)(n.Z,{variant:"body2",className:"label-text",sx:{position:"absolute",bottom:"10px",left:0,right:0,textAlign:"center",fontFamily:"Inter",fontWeight:600,fontSize:"12px",lineHeight:1.6,color:"white",zIndex:4,opacity:.7,transition:"opacity 0.2s ease"},children:r})]})})})}var ta=r(46973);let tn={width:960,height:1216},to=async e=>{var t,r;let i;let{data:a}=await ta.ZP.post("create",{base_model:"character_preview_visuals",model:"character_preview_visuals",prompt:(t=e.style,r=e.short_description,i=t,t.includes("art style")||(i=`${t} art style`),`full body shot front view of ${i} ${r} face to viewer, background is a suitable beautiful scene`),negative_prompt:"nude, naked, NSFW, nudity, explicit content, adult content, sexual content, gore, violence, blood, disturbing content, inappropriate content",prompt_assistant_mode:"off",tiling:!1,isGeneratedPrompt:!1,cfg_scale:3.5,steps:25,image_num:3,width:tn.width,height:tn.height});return a.generation_history_id},ts=(0,ta.py)(to),tl=async e=>{let{data:t}=await ta.ZP.post("character/enhance_short_description",e);return t.prompt};var tc=(0,ta.py)(tl);let td=new(r(72100)).EventEmitter;var th=r(19526),tu=r(328);function tp(e){let{hasTestingFeatures:t}=e,o=eR(e=>e.params),s=eR(e=>e.setParams),c=eR(e=>e.creationFlowType),u=eR(e=>e.setCurrentStep),{isMobile:p}=(0,eh.j)(),{control:g,handleSubmit:x,setValue:f,getFieldState:b,clearErrors:v}=(0,eY.cI)({defaultValues:o}),[y,w]=(0,m.useState)(!1),[C,j]=(0,m.useState)(!1),[Z,k]=(0,m.useState)(!1),S=(0,eO.Z)(),[_,I]=(0,m.useState)(ek.every(e=>e.name!==o.style)),M=eR(e=>e.setIsCreatingCharacter),R=eR(e=>e.setCharacterId),[F,P]=(0,A.HT)({onSuccess:e=>{R(e.id),h.B("character_creation_completed",{creation_method:c,character_name:o.character_name,character_description:o.short_description,character_style:o.style})}}),E=eR(e=>e.setIsCreatingPreviewVisuals),[B,D]=ts(),z=eR(e=>e.setPreviewVisualsHistoryId),L=(0,m.useRef)(),U=(0,m.useRef)();(0,m.useEffect)(()=>(M(P),E(D),()=>{M(!1),E(!1)}),[P,D,M,E]);let W=(0,m.useCallback)(()=>{let e,t=!1;"image"===c&&!o.source_image_url||"four_more_images"===c&&(o.sample_images.length<4||C)?(k(!0),t=!1):(k(!1),t=!0);let r=new Promise(t=>{e=t});return x(async()=>{if(!t){e(!1);return}setTimeout(()=>{e(!0)},10)},e=>{})(),L.current=window.setTimeout(()=>{S()}),U.current=window.setTimeout(()=>{var e;null===(e=document.querySelector("div.Mui-error"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},100),r},[c,o,C,x,S]),H=(0,m.useCallback)(async()=>{let e,t;let{default:i}=await r.e(2373).then(r.t.bind(r,27793,19));do e=Math.floor(Math.random()*i.length),t=i[e];while(t===o.short_description&&i.length>1);s(e=>({...e,short_description:t})),f("short_description",t)},[s,o.short_description,f]),[O,V]=tc(),Y=(0,m.useCallback)(async()=>{if(o.short_description){w(!0);try{let e=await O({prompt:o.short_description,model:"gpt-3.5-turbo-0125"});s(t=>({...t,short_description:e})),f("short_description",e)}catch(e){e instanceof eV.AxiosError||(console.error("Failed to enhance description:",e),(0,er.cB)("Failed to enhance description"))}finally{w(!1)}}},[s,o.short_description,f,O]);(0,m.useEffect)(()=>{let e=async()=>{await W()&&("image"===c?await F({creation_flow:"image",character_name:o.character_name,source_image_url:o.source_image_url,thumbnail:o.source_image_url,...t?{settings:o.settings}:{}}):"four_more_images"===c&&await F({creation_flow:"four_more_images",character_name:o.character_name,image_urls:[...o.sample_images.slice(1),o.sample_images[0]],thumbnail:o.sample_images[0]}),u(1))};return td.on("createCharacter",e),()=>{td.off("createCharacter",e),clearTimeout(L.current),clearTimeout(U.current)}},[F,c,t,o,o.character_name,o.sample_images,o.sample_images.length,o.settings,o.source_image_url,u,W]),(0,m.useEffect)(()=>{let e=async()=>{if(!await W())return;let e=await B({short_description:o.short_description,style:o.style});h.B("character_previewed",{creation_method:"description",preview:"initial",character_name:o.character_name,character_description:o.short_description,character_style:o.style}),z(e),u(1)};return td.on("createPreviewVisuals",e),()=>{td.off("createPreviewVisuals",e)}},[B,o,z,u,W]);let N=(0,m.useMemo)(()=>b("short_description").error?{bottom:36}:{},[b]),X=(0,m.useCallback)(()=>(0,i.jsx)(tr,{startIcon:(0,i.jsx)(d.PhSparkle,{}),sx:{bgcolor:"rgba(9, 41, 247, 0.30)",borderColor:"transparent","&:hover":{bgcolor:"rgba(9, 41, 247, 0.45)",borderColor:"transparent"}},onClick:H,children:"Random"}),[H]),G=(0,m.useCallback)(()=>{let e=!o.short_description;return(0,i.jsx)(tr,{disabled:e,loading:y||V,startIcon:(0,i.jsx)(eL.Z,{}),onClick:Y,sx:{bgcolor:"transparent",borderColor:"#6D6D6D","&:hover":{bgcolor:"rgba(109, 109, 109, 0.1)",borderColor:"#6D6D6D"}},children:"Enhance"})},[Y,V,y,o.short_description]),Q=(0,m.useCallback)(()=>(0,i.jsx)(eX,{title:"Describe your character",sx:{flexGrow:1,alignItems:"stretch"},children:(0,i.jsxs)(T.Z,{position:"relative",sx:{flexGrow:1,backgroundColor:"#2B2B2B",border:"1px solid #3F3F3F",borderRadius:"8px",p:0,display:"flex",flexDirection:"column",minHeight:p?"200px":"150px",maxHeight:p?"300px":"250px",overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"}},children:[(0,i.jsx)(eY.SF,{name:"short_description",control:g,fullWidth:!0,multiline:!0,minRows:p?6:3,onChange:e=>{s(t=>({...t,short_description:e.target.value})),setTimeout(()=>{S()})},required:!0,autoComplete:"off",placeholder:"Describe the defining traits of your character that need to stay consistent across all visuals. This includes physical attributes, outfits, accessories, or specific characteristics like 'a tall pirate with a scar.' ",sx:{flex:1,maxHeight:"calc(100% - 30px)",padding:"12px",overflowY:"auto",overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"},"& .MuiOutlinedInput-root":{height:"100%",padding:0,"& textarea":{fontFamily:"Inter",fontSize:"14px",lineHeight:"1.57",letterSpacing:"-0.01em",color:"primary",padding:"0 !important",height:"100% !important",overflowY:"auto !important",overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"},"&::placeholder":{color:"#636363"}},"& fieldset":{border:"none"},"&:hover":{borderColor:"#3F3F3F"},"&.Mui-focused":{borderColor:"#3F3F3F"}},"& .MuiInputBase-inputMultiline":{pb:3}}}),(0,i.jsxs)(a.Z,{direction:"row",spacing:1,sx:{position:"absolute",right:8,bottom:8,...N},children:[X(),G()]})]})}),[g,p,N,X,G,s,S]),q=(0,m.useCallback)(()=>(0,i.jsx)(eX,{title:"Style",sx:{height:"100%"},children:(0,i.jsxs)(a.Z,{sx:{borderRadius:1,border:"1px solid #3F3F3F",background:"#2B2B2B",padding:"12px 8px 12px 12px",height:{md:"300px",sx:"100%"},display:"flex",gap:1,alignItems:"stretch",flexDirection:"column"},children:[(0,i.jsx)(eY.SF,{name:"style",control:g,fullWidth:!0,disabled:!_,onChange:e=>{s(t=>({...t,style:e.target.value}))},placeholder:"Type your own style here or choose from the preset styles below.",required:!0,autoComplete:"off",InputProps:{startAdornment:(0,i.jsx)(eH.Z,{position:"start",sx:{m:1.5,mr:.5,height:"14px",width:"14px","& svg":{height:"14px",width:"14px"}},children:(0,i.jsx)(eU.Z,{})})},sx:{flex:"0 0 auto",width:"calc(100% - 8px)","& .MuiOutlinedInput-root":{backgroundColor:"#3C3C3C",border:"none",borderRadius:"5px",padding:0,"& input":{fontWeight:500,fontSize:"14px !important",lineHeight:1.71,letterSpacing:"-0.01em",color:"#FFFFFF",padding:"0 12px 0 0 !important","&::placeholder":{color:"#636363"}},"& fieldset":{border:"none",fontSize:"14px !important"},"&:hover":{"& input":{backgroundColor:"#3C3C3C"}},"&.Mui-focused":{"& input":{backgroundColor:"#3C3C3C"}},"&.Mui-disabled":{"& input":{backgroundColor:"#3C3C3C",opacity:.5}}}}}),(0,i.jsx)(T.Z,{sx:{overflowY:"auto",flex:1,minHeight:0,pr:.5,overscrollBehavior:"contain","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{borderRadius:"6px",background:"#404040"}},children:(0,i.jsx)(eb.ZP,{container:!0,spacing:.5,children:ek.map(e=>(0,i.jsx)(eb.ZP,{item:!0,xs:4,children:(0,i.jsx)(ti,{url:e.thumbnail_url,label:e.name,selected:_?"Custom"===e.name:o.style===e.value,onClick:()=>{if("Custom"===e.name){I(!0);return}I(!1),f("style",e.value),s(t=>({...t,style:e.value})),v("style")}})},e.value))})})]})}),[v,g,_,o.style,s,f]),J=(0,m.useCallback)(()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eX,{className:Z?"Mui-error":"",title:"Image",rightTopComponent:(0,i.jsx)(e8,{}),sx:{gap:1.5,flex:1,maxHeight:"calc(100% - 90px)",position:"relative"},children:(0,i.jsxs)(a.Z,{sx:{flex:1,maxHeight:"calc(100% - 40px)",position:"relative",borderRadius:1.5},children:[(0,i.jsx)(eN.Z,{title:"Upload one reference image or choose from history to guide your character's design.",allowChooseFromHistory:!0,value:o.source_image_url,onChange:e=>{s(t=>({...t,source_image_url:e})),e&&k(!1)},sx:{flex:1,p:0,display:"flex",alignSelf:"stretch",justifyContent:"stretch",borderRadius:1.5,border:"2px dashed #474747",maxHeight:"100%",position:"relative","&>.MuiStack-root":{flex:1,maxHeight:"100%",position:"relative"}},uploadAvatarSx:{flex:1,p:0,background:"#242424",borderRadius:1.5,alignItems:"center",justifyContent:"center","&>.MuiBox-root":{p:0}}}),!!Z&&(0,i.jsx)(tm,{message:"Please upload an image!"})]})}),t?(0,i.jsx)(tg,{control:g,setParams:s}):null]}),[g,t,Z,o.source_image_url,s]),K=(0,m.useCallback)(()=>(0,i.jsxs)(eX,{className:Z?"Mui-error":"",title:"Image",rightTopComponent:(0,i.jsx)(e8,{}),sx:{},children:[(0,i.jsx)(th.Z,{allowChooseFromHistory:!0,value:o.sample_images,successText:"",maxFiles:50,showUpgradeHintForMaxFiles:!1,showStatusAt:"bottom",sx:{borderRadius:1.5,border:"2px dashed #474747","&>.MuiBox-root":{overflowY:"scroll !important"},"& .MuiStack-root":{gap:1,"&>div, &>div>div, &>div>div img":{borderRadius:.75}}},onChange:e=>{s(t=>({...t,sample_images:e.map(e=>e.imageUrl)})),j(e.some(e=>e.isNSFW))}}),(0,i.jsxs)(a.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,i.jsx)(tu.Z,{icon:"mdi:lightbulb",sx:{width:25,height:25,color:l.MK}}),(0,i.jsx)(n.Z,{variant:"body2",fontWeight:500,sx:{color:l.MK,ml:1},children:"The first image is crucial. Select an image that showcases your character's key features."})]}),o.sample_images.length>0&&o.sample_images.length<=10&&(0,i.jsxs)(a.Z,{direction:"row",spacing:1,alignItems:"center",mb:2,children:[(0,i.jsx)(tu.Z,{icon:"ic:round-warning",sx:{width:25,height:25,color:"#EC681E"}}),(0,i.jsx)(n.Z,{variant:"body2",fontWeight:500,sx:{color:"#EC681E",ml:1},children:"Warning: It could lead to superior results with more than 10 images."})]})]}),[Z,o.sample_images,s]),$=(0,m.useCallback)(()=>(0,i.jsx)(eX,{title:"Name",children:(0,i.jsx)(eY.SF,{name:"character_name",control:g,fullWidth:!0,onChange:e=>{s(t=>({...t,character_name:e.target.value}))},required:!0,inputProps:{maxLength:50},rules:{validate:e=>/[!@#$%^&*(),.?":{}|<>]/.test(e)?"Name cannot contain special characters except single quote":/\s\s/.test(e)?"Name cannot contain consecutive spaces":!!/^[\p{L}\p{N}\s'-]+$/u.test(e)||"Name can only contain letters, numbers, spaces, hyphens and single quotes"},autoComplete:"off",placeholder:"You'll use this name in prompts later, like '@Amy is dancing.'",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#2B2B2B",border:"1px solid #3F3F3F",borderRadius:"8px","& input":{fontSize:"14px",lineHeight:"1.57",letterSpacing:"-0.01em",color:"primary",padding:"12px","&::placeholder":{color:"#636363"}},"& fieldset":{border:"none"},"&:hover":{borderColor:"#3F3F3F"},"&.Mui-focused":{borderColor:"#3F3F3F"}}}})}),[g,s]),ee=(0,m.useCallback)(()=>{switch(c){case"description":return(0,i.jsxs)(a.Z,{spacing:3,direction:{xs:"column",md:"row"},justifyContent:"stretch",children:[(0,i.jsxs)(a.Z,{spacing:1.5,alignItems:"stretch",sx:{flex:"1 1 50%"},children:[$(),Q()]}),(0,i.jsx)(a.Z,{alignItems:"stretch",sx:{flex:"1 1 50%"},children:q()})]});case"image":return(0,i.jsxs)(T.Z,{sx:{flex:1,display:"flex",flexDirection:"column",maxHeight:"100%",position:"relative",gap:1.5,px:0,alignItems:"stretch"},children:[$(),J()]});case"four_more_images":return(0,i.jsxs)(T.Z,{sx:{flex:1,display:"flex",flexDirection:"column",maxHeight:"100%",position:"relative",gap:1.5,px:0,alignItems:"stretch"},children:[$(),K()]})}},[c,Q,K,$,J,q]);return(0,i.jsx)(eY.Yb,{children:(0,i.jsxs)(a.Z,{spacing:{xs:3,md:5},width:"100%",maxWidth:"876px",py:4,justifyContent:"stretch",overflow:"auto",sx:{flex:"1 1 100%"},children:[(()=>{let e={description:"Tell us about your character",image:"Transform one image into a Character",four_more_images:"Turn 4+ images into a character"}[c];return(0,i.jsx)(n.Z,{variant:"h4",component:"h3",sx:{color:"#FFF",textAlign:"center",fontFamily:"Inter",fontStyle:"normal",fontWeight:600,letterSpacing:"-0.24px",fontSize:"description"===c?"28px !important":"24px !important",lineHeight:"description"===c?"normal":"24px"},children:e})})(),ee()]})})}function tg(e){let{control:t,setParams:r}=e;return(0,i.jsx)(eX,{title:"Internal Testing Config",sx:{flex:0,mt:1},children:(0,i.jsxs)(eb.ZP,{container:!0,spacing:2,sx:{width:"100% !important"},children:[(0,i.jsx)(eb.ZP,{item:!0,xs:4,children:(0,i.jsx)(eY.SF,{name:"settings.custom_training_steps",control:t,label:"Training Steps",placeholder:"# steps",type:"number",fullWidth:!0,size:"small",onChange:e=>{r(t=>({...t,settings:{...t.settings,custom_training_steps:Number(e.target.value)}}))}})}),(0,i.jsx)(eb.ZP,{item:!0,xs:4,children:(0,i.jsx)(eY.SF,{name:"settings.custom_learning_rate",control:t,label:"Learning Rate",placeholder:"0.0001-0.009",type:"number",fullWidth:!0,size:"small",onChange:e=>{r(t=>({...t,settings:{...t.settings,custom_learning_rate:Number(e.target.value)}}))}})})]})})}function tm(e){let{message:t}=e;return t?(0,i.jsxs)(n.Z,{variant:"body2",color:"error",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(eW.Z,{})," ",t]}):null}var tx=r(16402),tf=r(57671);function tb(e){let{}=e,t=eR(e=>e.params.generated_visuals),r=eR(e=>e.params.selected_visual),s=eR(e=>e.params),c=eR(e=>e.setParams),u=eR(e=>e.previewVisualsHistoryId),p=eR(e=>e.setPreviewVisualsHistoryId),{data:g}=(0,tf.My)(u),[x,f]=ts(),b=eR(e=>e.setCharacterId),[v,y]=(0,A.HT)({onSuccess:e=>{h.B("character_creation_completed",{creation_method:"description",character_name:s.character_name,character_description:s.short_description,character_style:s.style}),b(e.id)}}),w=eR(e=>e.setIsCreatingCharacter);(0,m.useEffect)(()=>(w(y),()=>{w(!1)}),[y,w]);let C=eR(e=>e.setCurrentStep);(0,m.useEffect)(()=>{let e=async()=>{await v({character_name:s.character_name,short_description:s.short_description,thumbnail:s.selected_visual,creation_flow:"description",generated_visuals:t,selected_visual:s.selected_visual}),C(2)};return td.on("createCharacter",e),()=>{td.off("createCharacter",e)}},[v,s,t,C]),(0,m.useEffect)(()=>{if(g){let e=g.map(e=>e.url),r=[...t],i=!1;for(let[a,n]of e.entries())n&&n!==t[a]&&(r[a]=n,i=!0);i&&c({...s,generated_visuals:r})}},[g,s,t,c]);let j=e=>{c({...s,selected_visual:t[e]})},Z=async()=>{let e=await x({style:s.style,short_description:s.short_description});h.B("character_previewed",{creation_method:"description",preview:"regenerate",character_name:s.character_name,character_description:s.short_description,character_style:s.style}),p(e),c({...s,selected_visual:""})},k=(e,t)=>{let n=r===t,s=null==g?void 0:g[e],c=(null==s?void 0:s.status)==="pending";return(0,i.jsxs)(o.Z,{onClick:()=>j(e),sx:{p:0,flex:"1 1 auto",height:"auto",borderRadius:l.E0,overflow:"hidden",position:"relative",border:e=>n&&!c?`2px solid ${e.palette.primary.main}`:"2px solid transparent","&:hover":{border:e=>`2px solid ${e.palette.primary.main}`}},children:[t?(0,i.jsx)("img",{src:t,alt:`Character preview ${e+1}`,style:{width:"100%",aspectRatio:`${tn.width}/${tn.height}`,objectFit:"cover"}}):null,n&&!c?(0,i.jsx)(T.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,i.jsx)(d.PhCheck,{size:64,color:"white"})}):null,c?(0,i.jsx)(a.Z,{justifyContent:"center",alignItems:"center",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,i.jsx)(tx._,{title:"",size:80})}):null]},e)};return(0,i.jsxs)(ee.sg,{spacing:3,maxHeight:"100%",width:"100%",children:[(0,i.jsxs)(ee.sg,{flex:0,spacing:1,children:[(0,i.jsx)(n.Z,{component:"h3",sx:{color:"#FFF",textAlign:"center",fontSize:"28px",fontStyle:"normal",fontWeight:600,lineHeight:"normal",letterSpacing:"-0.24px"},children:"Meet Your Character!"}),(0,i.jsx)(n.Z,{sx:{color:"#808080",textAlign:"center",fontSize:"12px",fontStyle:"normal",fontWeight:500,lineHeight:"normal",letterSpacing:"-0.24px"},children:"We've generated three character visuals based on your details."})]}),(0,i.jsx)(ee.X2,{flex:1,spacing:2,sx:{justifyContent:"stretch",overflowY:"hidden",overflowX:"auto","& > button":{aspectRatio:`${tn.width}/${tn.height}`}},children:Array.from({length:3}).map((e,r)=>k(r,t[r]))}),(0,i.jsx)(a.Z,{flex:0,alignItems:"center",alignSelf:"stretch",spacing:2,children:(0,i.jsxs)(E.Z,{variant:"outlined",loading:f,disabled:f,startIcon:(0,i.jsx)(d.PhArrowsCounterClockwiseBold,{}),onClick:Z,sx:(0,tt.j)(eA,{fontSize:"16px",fontWeight:600}),children:["Regenerate for",(0,i.jsxs)(T.Z,{component:"span",display:"flex",alignItems:"center",gap:1,sx:{ml:1},children:[(0,i.jsx)(d.PhCurrencyEth,{size:20}),3*(0,S.Xd)("create.model.character_preview_visuals")]})]})})]})}var tv=(0,r(99664).Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");let ty=.1*A.Ck,tw=A.Ck-ty,tC=20/ty,tj=79/tw;function tA(e){let{imageUrl:t}=e,[r,n]=(0,m.useState)(0);return(0,m.useEffect)(()=>{let e=Date.now(),t=setInterval(()=>{let t=Math.floor((Date.now()-e)/1e3);t>=A.Ck?n(99):t<=ty?n(Math.min(t*tC,20)):n(Math.min(20+(t-ty)*tj,99))},1e3);return()=>clearInterval(t)},[]),(0,i.jsx)(a.Z,{px:4,maxWidth:540,width:"100%",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(tZ,{variant:"determinate",value:r,imageUrl:t,thickness:2,size:160,sx:{color:l.MK,borderRadius:"50%",background:"transparent","& .MuiCircularProgress-circle":{backgroundColor:"primaryGreen",strokeLinecap:"round"}}})})}function tZ(e){return(0,i.jsxs)(T.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,i.jsx)(T.Z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:"rgba(255, 255, 255, 0.24)"}}),(0,i.jsx)(T.Z,{sx:{position:"absolute",top:"8px",left:"8px",right:"8px",bottom:"8px",display:"flex",alignItems:"center",borderRadius:"50%",justifyContent:"center",...e.imageUrl?{backgroundImage:`url(${e.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"}:{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:!e.imageUrl&&(0,i.jsx)(tv,{sx:{width:"100%",height:"100%",color:"rgba(255,255,255,0.3)"}})}),(0,i.jsx)(T.Z,{sx:{top:"8px",left:"8px",bottom:"8px",right:"8px",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fill:"rgba(0, 0, 0, 0.24)",backdropFilter:"blur(5.5px)"},children:(0,i.jsx)(n.Z,{component:"span",sx:{color:"#FFF",fontFamily:"Inter",fontSize:"20.707px",fontStyle:"normal",fontWeight:600,lineHeight:"20.127px",letterSpacing:"-0.201px"},children:`${Math.round(e.value)}%`})}),(0,i.jsx)(B.Z,{variant:"determinate",...e})]})}function tk(){let e=eR(e=>e.params.character_name),t=eR(e=>e.characterId),r=eR(e=>e.creationFlowType),o=eR(e=>e.params),{finalized:s}=(0,A.hF)(t,!0);s&&td.emit("closeCreateCharacterDialog");let l=(0,m.useMemo)(()=>{switch(r){case"description":return o.selected_visual;case"four_more_images":return o.sample_images[0];case"image":return o.source_image_url}},[r,o.selected_visual,o.sample_images,o.source_image_url]);return(0,i.jsxs)(ee.sg,{spacing:3,maxWidth:700,alignItems:"center",children:[(0,i.jsx)(a.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:(0,i.jsx)(n.Z,{component:"h2",sx:{color:"#FFF",textAlign:"center",fontFamily:"Inter",fontSize:"28px",fontStyle:"normal",fontWeight:600,lineHeight:"normal",letterSpacing:"-0.24px"},children:"Creating Your Model! \uD83D\uDE80"})}),(0,i.jsx)(tA,{imageUrl:l}),(0,i.jsxs)(n.Z,{variant:"body1",sx:{color:"rgba(255, 255, 255, 0.36)",textAlign:"center",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:500,lineHeight:"18px",letterSpacing:"-0.24px",maxWidth:"60%"},children:["It'll take about ",(0,i.jsx)("b",{style:{color:"#FFF"},children:"3 minutes"})," to complete. ",(0,i.jsx)("b",{children:e})," will be ready shortly. You can close this and check back later in the Characters tab."]}),(0,i.jsxs)(ee.sg,{spacing:2,width:"100%",children:[(0,i.jsx)("iframe",{width:"100%",style:{maxWidth:"100%",aspectRatio:"525/268",borderRadius:17,background:"rgba(70, 70, 70, 0.55)"},src:"https://www.youtube.com/embed/PscYg-XSY1k?si=BlqNQEwWxiHdDsf1&autoplay=1&mute=1",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),(0,i.jsx)(n.Z,{variant:"body1",sx:{color:"rgba(255, 255, 255, 0.44)",textAlign:"center",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:600,lineHeight:"16.35px"},children:"Quick Tips: Making the Most of Your Character"})]})]})}var tS=r(13605),t_=r(93942);let tI=3*(0,S.Xd)("create.model.character_preview_visuals");function tM(e){let{hasTestingFeatures:t,onClose:r,onContinue:a,...n}=e,o=eR(e=>e.reset),s=eF.use.creationFlowType(),c=eF.use.currentStep(),d=eF.use.setCurrentStep(),h=eF.use.params(),u=eF.use.setParams(),p=eF.use.isCreatingCharacter(),g=eF.use.isCreatingPreviewVisuals(),{showModal:x}=(0,V.dd)(),{isDesktop:f}=(0,eh.j)(),{data:b}=(0,A.CW)();(0,t_.Z)(n.open);let{data:v}=(0,tf.Gr)(),[y]=(0,S.Bw)("character.create",v),w=(0,tS.Xt)(),C=null==w?void 0:w["custom-credit-cost"],j=(0,m.useMemo)(()=>"description"!==s&&0===c,[s,c]),Z=(0,S.Xd)("character.create",C),k=b||!y?Z:0,_="description"===s,I={label:"All Set!",actionButtonText:"Done",actionButtonCreditsCost:()=>0,render:()=>(0,i.jsx)(tk,{})},M=[{label:"Character Details",backButtonText:"Cancel",actionButtonText:_?"Create Previews":"Create Character",actionButtonCreditsCost:()=>_?tI:k,render:()=>(0,i.jsx)(tp,{hasTestingFeatures:t}),actionButtonDisabled:()=>"four_more_images"===s?h.sample_images.length<4||h.sample_images.length>50||!h.character_name:"image"===s?!h.source_image_url||!h.character_name:"description"===s&&(!h.character_name||!h.short_description||!h.style)},..._?[{label:"Preview Visuals",backButtonText:"<- Back",actionButtonText:"Create Character",actionButtonCreditsCost:()=>k,render:()=>(0,i.jsx)(tb,{}),actionButtonDisabled:()=>!h.selected_visual},I]:[I]],R=M[c],F=(0,m.useCallback)(()=>{r(),setTimeout(()=>{o()},200)},[r,o]),P=e=>{var t,r;null!==(r=e.target)&&void 0!==r&&null!==(t=r.id)&&void 0!==t&&t.match(/rmiz-modal-.*/)||("Preview Visuals"===R.label?x(eC,{onCloseAnyway:()=>{F()}}):F())},E=e=>{a(h),P(e)};return(0,m.useEffect)(()=>(td.on("closeCreateCharacterDialog",F),()=>{td.off("closeCreateCharacterDialog",F)}),[F]),(0,i.jsxs)(Y.Z,{...n,onClose:P,maxWidth:"md",fullWidth:!0,disableScrollLock:!1,sx:{"& .MuiDialog-paper":{height:{xs:"100%",md:"820px"},maxWidth:"876px",bgcolor:l.LS}},children:[(0,i.jsx)(ez,{currentStep:c,steps:M.map(e=>({label:e.label})),handleClose:P}),(0,i.jsx)(X.Z,{sx:{width:{xs:"90%",md:j?"75%":"80%"},display:"flex",justifyContent:"center",mx:"auto",p:"0 !important",pt:"32px !important",boxSizing:"border-box","& > form":{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"& > div, & > form > div":f&&{overflowY:"auto",pr:1,msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},children:R.render()}),(0,i.jsx)(eP,{currentStepConfig:R,handleBack:()=>{0===c?r():("Preview Visuals"===R.label&&u({...h,selected_visual:""}),d(c-1))},handleActionButtonClick:e=>{let{actionButtonText:t}=R;switch(t){case"Create Character":td.emit("createCharacter");break;case"Create Previews":td.emit("createPreviewVisuals");break;case"Done":E(e)}},actionButtonLoading:p||g})]})}var tR=r(6721),tF=r(55319);let tP=e=>{let{direction:t,onClick:r,visible:n}=e;return(0,i.jsx)(a.Z,{sx:{["left"===t?"left":"right"]:0,position:"absolute",width:"85px",height:"100%",zIndex:99,background:"left"===t?"linear-gradient(271deg, rgba(26, 26, 26, 0.00) 0.9%, #1A1A1A 98.97%)":"linear-gradient(89deg, rgba(26, 26, 26, 0.00) 0.9%, #1A1A1A 98.97%)",display:n?"inline-flex":"none"},children:"left"===t?(0,i.jsx)(tR.Z,{onClick:r,sx:{fontSize:28,position:"absolute",zIndex:1,transition:"transform 0.2s ease-in-out",color:"white",left:0,transform:"translateY(-50%)",top:"50%",p:"4px",backgroundColor:"rgba(255,255,255, 0.16)",border:"1px solid rgba(255,255,255, 0.2)"},children:(0,i.jsx)(d.PhCaretLeft,{})}):(0,i.jsx)(tR.Z,{onClick:r,sx:{fontSize:28,position:"absolute",zIndex:1,transition:"transform 0.2s ease-in-out",color:"white",right:0,transform:"translateY(-50%)",top:"50%",p:"4px",backgroundColor:"rgba(255,255,255, 0.16)",border:"1px solid rgba(255,255,255, 0.2)"},children:(0,i.jsx)(d.PhCaretRight,{})})})},tE=e=>{let{character:t}=e,{isMobile:r}=(0,eh.j)(),o=(0,m.useRef)(null),[s,l]=(0,m.useState)({left:!1,right:!1}),[c,d]=(0,ec.jC)(),h=()=>{if(o.current){let{scrollWidth:e,clientWidth:t,scrollLeft:r}=o.current,i=e>t;l({left:i&&r>0,right:i&&r+t<e})}};(0,m.useEffect)(()=>{let e=o.current;if(!e)return;let t=new ResizeObserver(h);return t.observe(e),()=>t.disconnect()},[]);let u=e=>{o.current&&(o.current.scrollLeft+="right"===e?300:-300,setTimeout(h,300))},p=async(e,r)=>{var i;await c({parameters:{active_template:e.value,active_template_type:"essentials",creation_mode:"template",image_num:(null===(i=tF.z4.find(t=>t.value===e.value))||void 0===i?void 0:i.constructor)==="VideoTemplate"?1:2},uiState:{pages:["home","create"]},initActionState:{creation_mode:"modifyByUser"},clickEvent:r,modelConfig:t},ed.V.CHARACTER)};return(0,i.jsxs)(a.Z,{spacing:1,children:[(0,i.jsx)(n.Z,{variant:"h4",component:"h2",children:"Quick Template"}),(0,i.jsxs)(T.Z,{position:"relative",children:[!r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tP,{direction:"left",onClick:()=>u("left"),visible:s.left}),(0,i.jsx)(tP,{direction:"right",onClick:()=>u("right"),visible:s.right})]}),(0,i.jsx)(a.Z,{ref:o,onScroll:r?void 0:h,sx:{display:"grid",gap:2,...r?{gridTemplateColumns:{xs:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},mt:1}:{overflowX:"auto",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"},py:1,gridTemplateColumns:"none",gridAutoFlow:"column",gridAutoColumns:"minmax(250px, 1fr)"}},children:tF.ZP.map(e=>(0,i.jsx)(ew,{title:e.title,image:e.image,sx:e.sx,loading:d,isVideo:!!e.videoUrl,videoUrl:e.videoUrl,onClick:t=>p(e,t)},e.title))})]})]})};var tT=r(14930),tB=r(23638),tD=r(39204);function tz(e){let{title:t,description:r,sx:s,onClick:l,imageUrl:c}=e,[d,h]=(0,m.useState)(!1),u=(0,tT.Z)(e=>e.breakpoints.up("lg"));return(0,i.jsx)(ep.Z,{component:"div",onClick:l,onMouseEnter:()=>{u&&h(!0)},onMouseLeave:()=>{u&&h(!1)},sx:{flex:1,borderRadius:2,overflow:"hidden",bgcolor:"#2A2A2A",boxShadow:1,position:"relative",...s},children:(0,i.jsxs)(a.Z,{alignItems:"center",gap:2.5,sx:{width:"100%",height:"100%",py:4,px:2,textAlign:"center"},children:[(0,i.jsx)(tD.E.div,{animate:{y:u&&d?-38:0},transition:{duration:.2,ease:"easeInOut"},children:(0,i.jsxs)(a.Z,{alignItems:"center",sx:{maxWidth:232},children:[(0,i.jsx)(en.L6,{src:c,alt:t,fetchPriority:"high",sx:{width:"100%",aspectRatio:"232/164"}}),(0,i.jsx)(o.Z,{variant:"primary",fullWidth:!0,sx:{py:1,fontSize:"16px",fontWeight:600,textAlign:"center"},children:t})]})}),r?u?(0,i.jsx)(tB.M,{children:d?(0,i.jsx)(tD.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},style:{position:"absolute",bottom:16,left:0,right:0,padding:"0 16px"},children:(0,i.jsx)(n.Z,{variant:"body2",color:"white",fontSize:14,fontWeight:500,children:r})}):null}):(0,i.jsx)(n.Z,{variant:"body2",color:"white",fontSize:14,fontWeight:500,children:r}):null]})})}},86186:function(e,t,r){"use strict";r.d(t,{Y:function(){return c}});var i=r(52676),a=r(27806);let n=[{icon:a.CustomCharacterCreate,labels:{desktopLabel:"Create Character",mobileLabel:"Character"},label:"Character",href:"/characters",isActive:e=>"/characters"===e,isMobile:!0,isDesktop:!0},{icon:a.CustomCharacterCreateImage,labels:{desktopLabel:"Create Visual",mobileLabel:"Create"},label:"Create",href:"/characters/create",isActive:e=>"/characters/create"===e,isMobile:!0,isDesktop:!0},{icon:a.PhUserCircle,labels:{desktopLabel:"My Characters",mobileLabel:"My"},label:"My",href:"/characters/my",isActive:e=>"/characters/my"===e,isMobile:!0,isDesktop:!0},{icon:a.CustomCommunityStories,labels:{desktopLabel:"Community Library",mobileLabel:"Community"},label:"Community Library",href:"/characters/library",isActive:e=>"/characters/library"===e,isMobile:!0,isDesktop:!0},{icon:a.PhUserSound,labels:{desktopLabel:"Lip-Sync Character",mobileLabel:"Lip-Sync"},label:"Lip-Sync Character",href:"/characters/lip-sync",isActive:e=>e.startsWith("/characters/lip-sync"),isMobile:!0,isDesktop:!0}],o=n.filter(e=>e.isDesktop).map(e=>({...e,label:e.labels.desktopLabel})),s=n.filter(e=>e.isMobile).map(e=>({...e,label:e.labels.mobileLabel}));var l=r(95966);let c=e=>{let{children:t,...r}=e;return(0,i.jsx)(l._,{title:"Character",desktopNavigationItems:o,mobileNavigationItems:s,...r,children:t})}},76039:function(e,t,r){"use strict";var i=r(26538);t.Z=void 0;var a=i(r(90219)),n=r(52676);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"}),"AutoFixHigh")},17041:function(e,t,r){"use strict";var i=r(26538);t.Z=void 0;var a=i(r(90219)),n=r(52676);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Create")},59014:function(e,t,r){"use strict";var i=r(26538);t.Z=void 0;var a=i(r(90219)),n=r(52676);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline")},94009:function(e,t,r){var i;i=function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(e),a=r(t);function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function l(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)),i}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,a=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw n}}return r}}(e,t)||g(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function x(e,t){return new Promise(function(r,i){var a=new Image;a.onload=function(){return r(a)},a.onerror=i,!1==(null!==e&&!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(a.crossOrigin=t),a.src=e})}var f,b=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),v="undefined"!=typeof File,y={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},w=b?y.touch:y.desktop,C="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,j={x:.5,y:.5},A=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,a.default.Component);var e,t,r,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var t,r=d(l);return t=e?Reflect.construct(r,arguments,d(this).constructor):r.apply(this,arguments),t&&("object"==typeof t||"function"==typeof t)?t:u(this)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l),o(u(t=i.call(this,e)),"state",{drag:!1,my:null,mx:null,image:j}),o(u(t),"handleImageReady",function(e){var r=t.getInitialSize(e.width,e.height);r.resource=e,r.x=.5,r.y=.5,r.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:r},t.props.onImageReady),t.props.onLoadSuccess(r)}),o(u(t),"clearImage",function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:j})}),o(u(t),"handleMouseDown",function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})}),o(u(t),"handleMouseUp",function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())}),o(u(t),"handleMouseMove",function(e){var r,i,a,n,o,s,l,d,h,u,p,g,m,x,f,b;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),a={mx:r=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:i=e.targetTouches?e.targetTouches[0].pageY:e.clientY},b=(b=t.props.rotate%360)<0?b+360:b,t.state.mx&&t.state.my&&(n=t.state.mx-r,o=t.state.my-i,s=t.state.image.width*t.props.scale,l=t.state.image.height*t.props.scale,h=(d=t.getCroppingRect()).x,u=d.y,h*=s,u*=l,g=Math.cos((p=function(e){return Math.PI/180*e})(b)),x=u+-n*(m=Math.sin(p(b)))+o*g,f={x:(h+n*g+o*m)/s+1/t.props.scale*t.getXScale()/2,y:x/l+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(f),a.image=c(c({},t.state.image),f)),t.setState(a),t.props.onMouseMove(e))}),o(u(t),"setCanvas",function(e){t.canvas=e}),t.canvas=null,t}return t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(C=1);var e,t,r=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(r),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=w.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),b&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===j||this.clearImage();var r=this.canvas.getContext("2d");r.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(r),this.paintImage(r,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=w.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),b&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,r=e.height,i=e.rotate,a=e.border,n={},o=p(this.getBorders(a),2),s=o[0],l=o[1];return this.isVertical()?(n.width=r,n.height=t):(n.width=t,n.height=r),n.width+=2*s,n.height+=2*l,{canvas:n,rotate:i,width:t,height:r,border:a}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var r=document.createElement("canvas");this.isVertical()?(r.width=e.height,r.height=e.width):(r.width=e.width,r.height=e.height);var i=r.getContext("2d");return i.translate(r.width/2,r.height/2),i.rotate(this.props.rotate*Math.PI/180),i.translate(-r.width/2,-r.height/2),this.isVertical()&&i.translate((r.width-r.height)/2,(r.height-r.width)/2),t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),i.drawImage(t.resource,-e.x,-e.y),r}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,r=e.height,i=document.createElement("canvas");return this.isVertical()?(i.width=r,i.height=t):(i.width=t,i.height=r),this.paintImage(i.getContext("2d"),this.state.image,0,1),i}},{key:"getXScale",value:function(){return Math.min(1,this.props.width/this.props.height/(this.state.image.width/this.state.image.height))}},{key:"getYScale",value:function(){return Math.min(1,this.props.height/this.props.width/(this.state.image.height/this.state.image.width))}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),r=1/this.props.scale*this.getYScale(),i={x:e.x-t/2,y:e.y-r/2,width:t,height:r},a=0,n=1-i.width,o=0,s=1-i.height;return(this.props.disableBoundaryChecks||1<t||1<r)&&(a=-i.width,o=-i.height,s=n=1),c(c({},i),{},{x:Math.max(a,Math.min(i.x,n)),y:Math.max(o,Math.min(i.y,s))})}},{key:"loadImage",value:function(e){v&&e instanceof File?this.loadingImage=new Promise(function(t,r){var i=new FileReader;i.onload=function(e){try{var i=x(e.target.result);t(i)}catch(e){r(e)}},i.readAsDataURL(e)}).then(this.handleImageReady).catch(this.props.onLoadFailure):"string"==typeof e&&(this.loadingImage=x(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var r,i,a=this.getDimensions();return t/e<a.height/a.width?i=(r=this.getDimensions().height)/t*e:r=(i=this.getDimensions().width)/e*t,{height:r,width:i}}},{key:"paintImage",value:function(e,t,r,i){var a,n=3<arguments.length&&void 0!==i?i:C;t.resource&&(a=this.calculatePosition(t,r),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(n,n),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,a.x,a.y,a.width,a.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.width,a.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var r=p(this.getBorders(t),2),i=r[0],a=r[1],n=this.getCroppingRect(),o=e.width*this.props.scale,s=e.height*this.props.scale,l=-n.x*o,c=-n.y*s;return this.isVertical()?(l+=a,c+=i):(l+=i,c+=a),{x:l,y:c,height:s,width:o}}},{key:"paint",value:function(e){e.save(),e.scale(C,C),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,r,i,a,n,o=this.props.borderRadius,s=this.getDimensions(),l=p(this.getBorders(s.border),2),c=l[0],d=l[1],h=s.canvas.height,u=s.canvas.width,o=Math.max(o,0);o=Math.min(o,u/2-c,h/2-d),e.beginPath(),t=u-2*c,r=h-2*d,0===(i=o)?e.rect(c,d,t,r):(a=t-i,n=r-i,e.translate(c,d),e.arc(i,i,i,Math.PI,1.5*Math.PI),e.lineTo(a,0),e.arc(a,i,i,1.5*Math.PI,2*Math.PI),e.lineTo(t,n),e.arc(a,n,i,2*Math.PI,.5*Math.PI),e.lineTo(i,r),e.arc(i,n,i,.5*Math.PI,Math.PI),e.translate(-c,-d)),e.rect(u,0,-u,h),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),r=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,function(e,t){if(null==e)return{};var r,i=function(e,t){if(null==e)return{};for(var r,i={},a=Object.keys(e),n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r]);return i}(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),i=this.getDimensions(),n={width:i.canvas.width,height:i.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},o={width:i.canvas.width*C,height:i.canvas.height*C,style:c(c({},n),t)};return o[w.react.down]=this.handleMouseDown,b&&(o[w.react.mouseDown]=this.handleMouseDown),a.default.createElement("canvas",s({ref:this.setCanvas},o,r))}}],n(l.prototype,t),r&&n(l,r),l}();return o(A,"propTypes",{scale:i.default.number,rotate:i.default.number,image:i.default.oneOfType([i.default.string].concat(function(e){if(Array.isArray(e))return m(e)}(f=v?[i.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(f)||g(f)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:i.default.oneOfType([i.default.number,i.default.arrayOf(i.default.number)]),borderRadius:i.default.number,width:i.default.number,height:i.default.number,position:i.default.shape({x:i.default.number,y:i.default.number}),color:i.default.arrayOf(i.default.number),backgroundColor:i.default.string,crossOrigin:i.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:i.default.func,onLoadSuccess:i.default.func,onImageReady:i.default.func,onImageChange:i.default.func,onMouseUp:i.default.func,onMouseMove:i.default.func,onPositionChange:i.default.func,disableBoundaryChecks:i.default.bool,disableHiDPIScaling:i.default.bool,disableCanvasRotation:i.default.bool}),o(A,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),A},e.exports=i(r(40507),r(75271))}}]);