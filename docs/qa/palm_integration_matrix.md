# Palm Module Integration & Regression Matrix

| 流程 | 依赖模块 | 验证点 | 预期结果 | 备注 |
| ---- | -------- | ------ | -------- | ---- |
| 掌纹上传 -> 报告生成 | Auth 登录、Supabase 存储、报告 API (`/api/reports/palm`) | 登录状态下上传后，报告页出现最新掌纹条目 | 报告列表包含新掌纹，且点击可跳转标注/详情 | 若报告未刷新，检查批处理任务或缓存 |
| 掌纹上传 -> 通知 | 通知/消息服务 | 上传成功触发通知（若有）并记录时间 | 用户收到“上传成功”/“离线待同步”等提醒 | 离线上传的通知需在同步成功后发送 |
| 批量上传 -> 报告页 | 批量接口、报告读取 | 批量导入多记录后，报告页按上传顺序展示 | 所有成功记录显示，失败者有提示 | 验证离线入队的情况 |
| 标注完成 -> 报告详情 | 标注 API (`/api/palmprints/:id/features`) | 保存标注后刷新报告详情 | 详情页显示特征数量/质量评分 | 检查多语言/格式 |
| 离线队列 -> 同步 -> 通知 | IndexedDB 队列、同步逻辑、通知服务 | 离线上传后恢复网络自动同步并发送提醒 | 队列清空，通知提示同步成功 | 失败时保留日志并可重试 |
| 上传 -> 账户配额 | 计费/配额 (如有) | 上传计入用户配额或限制 | 达到上限时阻断上传并提示 | 结合 Billing 规则 |

## 回归执行步骤
1. 使用测试账户 A（普通用户）执行上述流程。  
2. 使用测试账户 B（批量上传权限/高级订阅）验证扩展功能。  
3. 每次执行记录在 `QA Checklist` 的验收记录栏，附时间、结果与截图。  
4. 若发现跨模块问题，创建 Issue 并指派到对应模块负责人。  

## 注意事项
- 批量和离线流程需在多设备（桌面/移动）验证。  
- Supabase 日志表 `palm_upload_logs` 与通知日志同步核对。  
- 回归完成后更新版本发布记录。  
